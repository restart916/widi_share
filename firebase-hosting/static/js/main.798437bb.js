/*! For license information please see main.798437bb.js.LICENSE.txt */
(()=>{var t={940:(t,e,n)=>{var i,r=r||{version:"5.3.0"};if(e.fabric=r,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?r.document=document:r.document=document.implementation.createHTMLDocument(""),r.window=window;else{var o=new(n(88).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;r.document=o.document,r.jsdomImplForWrapper=n(300).implForWrapper,r.nodeCanvas=n(500).Canvas,r.window=o,DOMParser=r.window.DOMParser}function s(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1);var o=n.height-i.height;r.drawImage(n,0,o,i.width,i.height,0,0,i.width,i.height)}function a(t,e){var n=e.targetCanvas.getContext("2d"),i=e.destinationWidth,r=e.destinationHeight,o=i*r*4,s=new Uint8Array(this.imageBuffer,0,o),a=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,s);var l=new ImageData(a,i,r);n.putImageData(l,0,0)}r.isTouchSupported="ontouchstart"in r.window||"ontouchstart"in r.document||r.window&&r.window.navigator&&r.window.navigator.maxTouchPoints>0,r.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window,r.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],r.DPI=96,r.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",r.commaWsp="(?:\\s+,?\\s*|,\\s*)",r.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,r.reNonWord=/[ \n\.,;!\?\-]/,r.fontPaths={},r.iMatrix=[1,0,0,1,0,0],r.svgNS="http://www.w3.org/2000/svg",r.perfLimitSizeTotal=2097152,r.maxCacheSideLimit=4096,r.minCacheSideLimit=256,r.charWidthsCache={},r.textureSize=2048,r.disableStyleCopyPaste=!1,r.enableGLFiltering=!0,r.devicePixelRatio=r.window.devicePixelRatio||r.window.webkitDevicePixelRatio||r.window.mozDevicePixelRatio||1,r.browserShadowBlurConstant=1,r.arcToSegmentsCache={},r.boundsOfCurveCache={},r.cachesBoundsOfCurve=!0,r.forceGLPutImageData=!1,r.initFilterBackend=function(){return r.enableGLFiltering&&r.isWebglSupported&&r.isWebglSupported(r.textureSize)?(console.log("max texture size: "+r.maxTextureSize),new r.WebglFilterBackend({tileSize:r.textureSize})):r.Canvas2dFilterBackend?new r.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=r),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:r.util.array.fill(n,!1)}}function e(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)}.bind(this);this.on(t,n)}r.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter((function(t){return!1!==t})),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,n){if(1===arguments.length)for(var i in t)e.call(this,i,t[i]);else e.call(this,t,n);return this},off:function(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}}}(),r.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return"function"===typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0}),0)}},r.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof r.Gradient||this.set(e,new r.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof r.Pattern?n&&n():this.set(e,new r.Pattern(t,n))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,i=Math.pow,o=Math.PI/180,s=Math.PI/2;r.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/s){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/s){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,n){var i=new r.Point(t.x-e.x,t.y-e.y),o=r.util.rotateVector(i,n);return new r.Point(o.x,o.y).addEquals(e)},rotateVector:function(t,e){var n=r.util.sin(e),i=r.util.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},createVector:function(t,e){return new r.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new r.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,n){var i=r.util.createVector(t,e),o=r.util.createVector(t,n),s=r.util.calcAngleBetweenVectors(i,o),a=s*(0===r.util.calcAngleBetweenVectors(r.util.rotateVector(i,s),o)?1:-1)/2;return{vector:r.util.getHatVector(r.util.rotateVector(i,a)),angle:s}},projectStrokeOnPoints:function(t,e,n){var i=[],o=e.strokeWidth/2,s=e.strokeUniform?new r.Point(1/e.scaleX,1/e.scaleY):new r.Point(1,1),a=function(t){var e=o/Math.hypot(t.x,t.y);return new r.Point(t.x*e*s.x,t.y*e*s.y)};return t.length<=1||t.forEach((function(l,c){var u,h,d=new r.Point(l.x,l.y);0===c?(h=t[c+1],u=n?a(r.util.createVector(h,d)).addEquals(d):t[t.length-1]):c===t.length-1?(u=t[c-1],h=n?a(r.util.createVector(u,d)).addEquals(d):t[0]):(u=t[c-1],h=t[c+1]);var f,p,g=r.util.getBisector(d,u,h),m=g.vector,v=g.angle;if("miter"===e.strokeLineJoin&&(f=-o/Math.sin(v/2),p=new r.Point(m.x*f*s.x,m.y*f*s.y),Math.hypot(p.x,p.y)/o<=e.strokeMiterLimit))return i.push(d.add(p)),void i.push(d.subtract(p));f=-o*Math.SQRT2,p=new r.Point(m.x*f*s.x,m.y*f*s.y),i.push(d.add(p)),i.push(d.subtract(p))})),i},transformPoint:function(t,e,n){return n?new r.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new r.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=r.util.transformPoint(t[n],e);var i=[t[0].x,t[1].x,t[2].x,t[3].x],o=r.util.array.min(i),s=r.util.array.max(i)-o,a=[t[0].y,t[1].y,t[2].y,t[3].y],l=r.util.array.min(a);return{left:o,top:l,width:s,height:r.util.array.max(a)-l}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=r.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=r.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*r.DPI/25.4;case"cm":return i*r.DPI/2.54;case"in":return i*r.DPI;case"pt":return i*r.DPI/72;case"pc":return i*r.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=r.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),r.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(e){if(!e)return r;var n,i=e.split("."),o=i.length,s=t||r.window;for(n=0;n<o;++n)s=s[i[n]];return s},loadImage:function(t,e,n,i){if(t){var o=r.util.createImage(),s=function(){e&&e.call(n,o,!1),o=o.onload=o.onerror=null};o.onload=s,o.onerror=function(){r.log("Error loading "+o.src),e&&e.call(n,null,!0),o=o.onload=o.onerror=null},0!==t.indexOf("data")&&void 0!==i&&null!==i&&(o.crossOrigin=i),"data:image/svg"===t.substring(0,14)&&(o.onload=null,r.util.loadImageInDom(o,s)),o.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=r.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),r.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){var o=[],s=0,a=(t=t||[]).length;function l(){++s===a&&e&&e(o.filter((function(t){return t})))}a?t.forEach((function(t,e){t&&t.type?r.util.getKlass(t.type,n).fromObject(t,(function(n,r){r||(o[e]=n),i&&i(t,n,r),l()})):l()})):e&&e(o)},enlivenObjectEnlivables:function(t,e,n){var i=r.Object.ENLIVEN_PROPS.filter((function(e){return!!t[e]}));r.util.enlivenObjects(i.map((function(e){return t[e]})),(function(t){var r={};i.forEach((function(n,i){r[n]=t[i],e&&(e[n]=t[i])})),n&&n(r)}))},enlivenPatterns:function(t,e){function n(){++o===s&&e&&e(i)}var i=[],o=0,s=(t=t||[]).length;s?t.forEach((function(t,e){t&&t.source?new r.Pattern(t,(function(t){i[e]=t,n()})):(i[e]=t,n())})):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?("undefined"!==typeof n&&(t[0].sourcePath=n),t[0]):(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new r.Group(t,e),"undefined"!==typeof n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},createCanvasElement:function(){return r.document.createElement("canvas")},copyCanvasElement:function(t){var e=r.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return r.document.createElement("img")},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var r=n(t[1],t[0]),s=i(t[0],2)+i(t[1],2),a=e(s),l=(t[0]*t[3]-t[2]*t[1])/a,c=n(t[0]*t[2]+t[1]*t[3],s);return{angle:r/o,scaleX:a,scaleY:l,skewX:c/o,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return r.iMatrix.concat();var e=r.util.degreesToRadians(t.angle),n=r.util.cos(e),i=r.util.sin(e);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,n="undefined"===typeof t.scaleY?1:t.scaleY,i=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],o=r.util.multiplyTransformMatrices,s=r.util.degreesToRadians;return t.skewX&&(i=o(i,[1,0,Math.tan(s(t.skewX)),1],!0)),t.skewY&&(i=o(i,[1,Math.tan(s(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=r.util.multiplyTransformMatrices;return t.angle&&(e=n(e,r.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,r.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,o=!0,s=t.getImageData(e,n,2*i||1,2*i||1),a=s.data.length;for(r=3;r<a&&!1!==(o=s.data[r]<=0);r+=4);return s=null,o},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i=t.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(e=n,n="meet"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?r.charWidthsCache[t]&&delete r.charWidthsCache[t]:r.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return r.util.toFixed(t,r.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var n=r.util.invertTransform(e),i=r.util.multiplyTransformMatrices(n,t.calcOwnMatrix());r.util.applyTransformToObject(t,i)},addTransformToObject:function(t,e){r.util.applyTransformToObject(t,r.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var n=r.util.qrDecompose(e),i=new r.Point(n.translateX,n.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(t,e,n){var i=t/2,o=e/2,s=[{x:-i,y:-o},{x:i,y:-o},{x:-i,y:o},{x:i,y:o}],a=r.util.calcDimensionsMatrix(n),l=r.util.makeBoundingBoxFromPoints(s,a);return{x:l.width,y:l.height}},mergeClipPaths:function(t,e){var n=t,i=e;n.inverted&&!i.inverted&&(n=e,i=t),r.util.applyTransformToObject(i,r.util.multiplyTransformMatrices(r.util.invertTransform(n.calcTransformMatrix()),i.calcTransformMatrix()));var o=n.inverted&&i.inverted;return o&&(n.inverted=i.inverted=!1),new r.Group([n],{clipPath:i,inverted:o})},hasStyleChanged:function(t,e,n){return n=n||!1,t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||n&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},stylesToArray:function(t,e){t=r.util.object.clone(t,!0);for(var n=e.split("\n"),i=-1,o={},s=[],a=0;a<n.length;a++)if(t[a])for(var l=0;l<n[a].length;l++){i++;var c=t[a][l];if(c&&Object.keys(c).length>0)r.util.hasStyleChanged(o,c,!0)?s.push({start:i,end:i+1,style:c}):s[s.length-1].end++;o=c||{}}else i+=n[a].length;return s},stylesFromArray:function(t,e){if(!Array.isArray(t))return t;for(var n=e.split("\n"),i=-1,r=0,o={},s=0;s<n.length;s++)for(var a=0;a<n[s].length;a++)i++,t[r]&&t[r].start<=i&&i<t[r].end&&(o[s]=o[s]||{},o[s][a]=Object.assign({},t[r].style),i===t[r].end-1&&r++);return o}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function i(t,e,n,i,o,s,a,l,c,u,h){var d=r.util.cos(t),f=r.util.sin(t),p=r.util.cos(e),g=r.util.sin(e),m=n*o*p-i*s*g+a,v=i*o*p+n*s*g+l;return["C",u+c*(-n*o*f-i*s*d),h+c*(-i*o*f+n*s*d),m+c*(n*o*g+i*s*p),v+c*(i*o*g-n*s*p),m,v]}function o(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return o>=r?o-r:2*Math.PI-(r-o)}function s(t,e,n){for(var s=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=function(t,e,n,s,a,l,c){var u=Math.PI,h=c*u/180,d=r.util.sin(h),f=r.util.cos(h),p=0,g=0,m=-f*t*.5-d*e*.5,v=-f*e*.5+d*t*.5,y=(n=Math.abs(n))*n,b=(s=Math.abs(s))*s,_=v*v,w=m*m,x=y*b-y*_-b*w,C=0;if(x<0){var S=Math.sqrt(1-x/(y*b));n*=S,s*=S}else C=(a===l?-1:1)*Math.sqrt(x/(y*_+b*w));var T=C*n*v/s,E=-C*s*m/n,k=f*T-d*E+.5*t,O=d*T+f*E+.5*e,A=o(1,0,(m-T)/n,(v-E)/s),I=o((m-T)/n,(v-E)/s,(-m-T)/n,(-v-E)/s);0===l&&I>0?I-=2*u:1===l&&I<0&&(I+=2*u);for(var D=Math.ceil(Math.abs(I/u*2)),P=[],L=I/D,M=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),R=A+L,F=0;F<D;F++)P[F]=i(A,R,f,d,n,s,k,O,M,p,g),p=P[F][5],g=P[F][6],A=R,R+=L;return P}(n[6]-t,n[7]-e,s,a,c,u,l),d=0,f=h.length;d<f;d++)h[d][1]+=t,h[d][2]+=e,h[d][3]+=t,h[d][4]+=e,h[d][5]+=t,h[d][6]+=e;return h}function a(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}function l(t,e,n,i,r,o,s,a){return function(l){var c,u=(c=l)*c*c,h=function(t){return 3*t*t*(1-t)}(l),d=function(t){return 3*t*(1-t)*(1-t)}(l),f=function(t){return(1-t)*(1-t)*(1-t)}(l);return{x:s*u+r*h+n*d+t*f,y:a*u+o*h+i*d+e*f}}}function c(t,e,n,i,r,o,s,a){return function(l){var c=1-l,u=3*c*c*(n-t)+6*c*l*(r-n)+3*l*l*(s-r),h=3*c*c*(i-e)+6*c*l*(o-i)+3*l*l*(a-o);return Math.atan2(h,u)}}function u(t,e,n,i,r,o){return function(s){var a,l=(a=s)*a,c=function(t){return 2*t*(1-t)}(s),u=function(t){return(1-t)*(1-t)}(s);return{x:r*l+n*c+t*u,y:o*l+i*c+e*u}}}function h(t,e,n,i,r,o){return function(s){var a=1-s,l=2*a*(n-t)+2*s*(r-n),c=2*a*(i-e)+2*s*(o-i);return Math.atan2(c,l)}}function d(t,e,n){var i,r,o={x:e,y:n},s=0;for(r=1;r<=100;r+=1)i=t(r/100),s+=a(o.x,o.y,i.x,i.y),o=i;return s}function f(t,e){for(var n,i,r,o=0,s=0,l=t.iterator,c={x:t.x,y:t.y},u=.01,h=t.angleFinder;s<e&&u>1e-4;)n=l(o),r=o,(i=a(c.x,c.y,n.x,n.y))+s>e?(o-=u,u/=2):(c=n,o+=u,s+=i);return n.angle=h(r),n}function p(t){for(var e,n,i,r,o=0,s=t.length,f=0,p=0,g=0,m=0,v=[],y=0;y<s;y++){switch(i={x:f,y:p,command:(e=t[y])[0]},e[0]){case"M":i.length=0,g=f=e[1],m=p=e[2];break;case"L":i.length=a(f,p,e[1],e[2]),f=e[1],p=e[2];break;case"C":n=l(f,p,e[1],e[2],e[3],e[4],e[5],e[6]),r=c(f,p,e[1],e[2],e[3],e[4],e[5],e[6]),i.iterator=n,i.angleFinder=r,i.length=d(n,f,p),f=e[5],p=e[6];break;case"Q":n=u(f,p,e[1],e[2],e[3],e[4]),r=h(f,p,e[1],e[2],e[3],e[4]),i.iterator=n,i.angleFinder=r,i.length=d(n,f,p),f=e[3],p=e[4];break;case"Z":case"z":i.destX=g,i.destY=m,i.length=a(f,p,g,m),f=g,p=m}o+=i.length,v.push(i)}return v.push({length:o,x:f,y:p}),v}r.util.joinPath=function(t){return t.map((function(t){return t.join(" ")})).join(" ")},r.util.parsePath=function(t){var i,o,s,a,l,c=[],u=[],h=r.rePathCommand,d="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",f="("+d+")"+r.commaWsp,p="([01])"+r.commaWsp+"?",g=new RegExp(f+"?"+f+"?"+f+p+p+f+"?("+d+")","g");if(!t||!t.match)return c;for(var m,v=0,y=(l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;v<y;v++){a=(i=l[v]).slice(1).trim(),u.length=0;var b=i.charAt(0);if(m=[b],"a"===b.toLowerCase())for(var _;_=g.exec(a);)for(var w=1;w<_.length;w++)u.push(_[w]);else for(;s=h.exec(a);)u.push(s[0]);w=0;for(var x=u.length;w<x;w++)o=parseFloat(u[w]),isNaN(o)||m.push(o);var C=e[b.toLowerCase()],S=n[b]||b;if(m.length-1>C)for(var T=1,E=m.length;T<E;T+=C)c.push([b].concat(m.slice(T,T+C))),b=S;else c.push(m)}return c},r.util.makePathSimpler=function(t){var e,n,i,r,o,a,l=0,c=0,u=t.length,h=0,d=0,f=[];for(n=0;n<u;++n){switch(i=!1,(e=t[n].slice(0))[0]){case"l":e[0]="L",e[1]+=l,e[2]+=c;case"L":l=e[1],c=e[2];break;case"h":e[1]+=l;case"H":e[0]="L",e[2]=c,l=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=l,e[2]=c;break;case"m":e[0]="M",e[1]+=l,e[2]+=c;case"M":l=e[1],c=e[2],h=e[1],d=e[2];break;case"c":e[0]="C",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c,e[5]+=l,e[6]+=c;case"C":o=e[3],a=e[4],l=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"S":"C"===r?(o=2*l-o,a=2*c-a):(o=l,a=c),l=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=o,e[2]=a,o=e[3],a=e[4];break;case"q":e[0]="Q",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"Q":o=e[1],a=e[2],l=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=l,e[2]+=c;case"T":"Q"===r?(o=2*l-o,a=2*c-a):(o=l,a=c),e[0]="Q",l=e[1],c=e[2],e[1]=o,e[2]=a,e[3]=l,e[4]=c;break;case"a":e[0]="A",e[6]+=l,e[7]+=c;case"A":i=!0,f=f.concat(s(l,c,e)),l=e[6],c=e[7];break;case"z":case"Z":l=h,c=d}i||f.push(e),r=e[0]}return f},r.util.getSmoothPathFromPoints=function(t,e){var n,i=[],o=new r.Point(t[0].x,t[0].y),s=new r.Point(t[1].x,t[1].y),a=t.length,l=1,c=0,u=a>2;for(e=e||0,u&&(l=t[2].x<s.x?-1:t[2].x===s.x?0:1,c=t[2].y<s.y?-1:t[2].y===s.y?0:1),i.push(["M",o.x-l*e,o.y-c*e]),n=1;n<a;n++){if(!o.eq(s)){var h=o.midPointFrom(s);i.push(["Q",o.x,o.y,h.x,h.y])}o=t[n],n+1<t.length&&(s=t[n+1])}return u&&(l=o.x>t[n-2].x?1:o.x===t[n-2].x?0:-1,c=o.y>t[n-2].y?1:o.y===t[n-2].y?0:-1),i.push(["L",o.x+l*e,o.y+c*e]),i},r.util.getPathSegmentsInfo=p,r.util.getBoundsOfCurve=function(e,n,i,o,s,a,l,c){var u;if(r.cachesBoundsOfCurve&&(u=t.call(arguments),r.boundsOfCurveCache[u]))return r.boundsOfCurveCache[u];var h,d,f,p,g,m,v,y,b=Math.sqrt,_=Math.min,w=Math.max,x=Math.abs,C=[],S=[[],[]];d=6*e-12*i+6*s,h=-3*e+9*i-9*s+3*l,f=3*i-3*e;for(var T=0;T<2;++T)if(T>0&&(d=6*n-12*o+6*a,h=-3*n+9*o-9*a+3*c,f=3*o-3*n),x(h)<1e-12){if(x(d)<1e-12)continue;0<(p=-f/d)&&p<1&&C.push(p)}else(v=d*d-4*f*h)<0||(0<(g=(-d+(y=b(v)))/(2*h))&&g<1&&C.push(g),0<(m=(-d-y)/(2*h))&&m<1&&C.push(m));for(var E,k,O,A=C.length,I=A;A--;)E=(O=1-(p=C[A]))*O*O*e+3*O*O*p*i+3*O*p*p*s+p*p*p*l,S[0][A]=E,k=O*O*O*n+3*O*O*p*o+3*O*p*p*a+p*p*p*c,S[1][A]=k;S[0][I]=e,S[1][I]=n,S[0][I+1]=l,S[1][I+1]=c;var D=[{x:_.apply(null,S[0]),y:_.apply(null,S[1])},{x:w.apply(null,S[0]),y:w.apply(null,S[1])}];return r.cachesBoundsOfCurve&&(r.boundsOfCurveCache[u]=D),D},r.util.getPointOnPath=function(t,e,n){n||(n=p(t));for(var i=0;e-n[i].length>0&&i<n.length-2;)e-=n[i].length,i++;var o,s=n[i],a=e/s.length,l=s.command,c=t[i];switch(l){case"M":return{x:s.x,y:s.y,angle:0};case"Z":case"z":return(o=new r.Point(s.x,s.y).lerp(new r.Point(s.destX,s.destY),a)).angle=Math.atan2(s.destY-s.y,s.destX-s.x),o;case"L":return(o=new r.Point(s.x,s.y).lerp(new r.Point(c[1],c[2]),a)).angle=Math.atan2(c[2]-s.y,c[1]-s.x),o;case"C":case"Q":return f(s,e)}},r.util.transformPath=function(t,e,n){return n&&(e=r.util.multiplyTransformMatrices(e,[1,0,0,1,-n.x,-n.y])),t.map((function(t){for(var n=t.slice(0),i={},o=1;o<t.length-1;o+=2)i.x=t[o],i.y=t[o+1],i=r.util.transformPoint(i,e),n[o]=i.x,n[o+1]=i.y;return n}))}}(),function(){var t=Array.prototype.slice;function e(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}r.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(e,n){for(var i=t.call(arguments,2),r=[],o=0,s=e.length;o<s;o++)r[o]=i.length?e[o][n].apply(e[o],i):e[o][n].call(e[o]);return r},min:function(t,n){return e(t,n,(function(t,e){return t<e}))},max:function(t,n){return e(t,n,(function(t,e){return t>=e}))}}}(),function(){function t(e,n,i){if(i)if(!r.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var o=0,s=n.length;o<s;o++)e[o]=t({},n[o],i)}else if(n&&"object"===typeof n)for(var a in n)"canvas"===a||"group"===a?e[a]=null:n.hasOwnProperty(a)&&(e[a]=t({},n[a],i));else e=n;else for(var a in n)e[a]=n[a];return e}r.util.object={extend:t,clone:function(e,n){return t({},e,n)}},r.util.object.extend(r.util,r.Observable)}(),function(){function t(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}r.util.string={camelize:function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var n,i=0,r=[];for(i=0;i<e.length;i++)!1!==(n=t(e,i))&&r.push(n);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),i=function(t,e,i){for(var r in e)r in t.prototype&&"function"===typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function o(){}function s(e){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}r.util.createClass=function(){var n=null,r=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"===typeof r[0]&&(n=r.shift()),a.superclass=n,a.subclasses=[],n&&(o.prototype=n.prototype,a.prototype=new o,n.subclasses.push(a));for(var l=0,c=r.length;l<c;l++)i(a,r[l],n);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=s,a}}(),function(){var t=!!r.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];r.util.addListener=function(e,n,i,r){e&&e.addEventListener(n,i,!t&&r)},r.util.removeListener=function(e,n,i,r){e&&e.removeEventListener(n,i,!t&&r)},r.util.getPointer=function(t){var e=t.target,n=r.util.getScrollLeftTop(e),i=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:i.clientX+n.left,y:i.clientY+n.top}},r.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||"touch"===t.pointerType}}(),function(){var t=r.document.createElement("div"),e="string"===typeof t.style.opacity,n="string"===typeof t.style.filter,i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};e?o=function(t,e){return t.style.opacity=e,t}:n&&(o=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),i.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(i,e)):n.filter+=" alpha(opacity="+100*e+")",t}),r.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)if("opacity"===i)o(t,e[i]);else{var r="float"===i||"cssFloat"===i?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":i;n.setProperty(r,e[i])}return t}}(),function(){var t=Array.prototype.slice;var e,n,i=function(e){return t.call(e,0)};try{e=i(r.document.childNodes)instanceof Array}catch(a){}function o(t,e){var n=r.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function s(t){for(var e=0,n=0,i=r.document.documentElement,o=r.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===r.document?(e=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:n}}e||(i=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),n=r.document.defaultView&&r.document.defaultView.getComputedStyle?function(t,e){var n=r.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=r.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";r.util.makeElementUnselectable=function(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=r.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t},r.util.makeElementSelectable=function(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}}(),r.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},r.util.getById=function(t){return"string"===typeof t?r.document.getElementById(t):t},r.util.toArray=i,r.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},r.util.makeElement=o,r.util.wrapElement=function(t,e,n){return"string"===typeof e&&(e=o(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},r.util.getScrollLeftTop=s,r.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,o={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return a;for(var c in l)a[l[c]]+=parseInt(n(t,c),10)||0;return e=r.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=s(t),{left:o.left+i.left-(e.clientLeft||0)+a.left,top:o.top+i.top-(e.clientTop||0)+a.top}},r.util.getNodeCanvas=function(t){var e=r.jsdomImplForWrapper(t);return e._canvas||e._image},r.util.cleanUpJsdomNode=function(t){if(r.isLikelyNode){var e=r.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}r.util.request=function(e,n){n||(n={});var i=n.method?n.method.toUpperCase():"GET",o=n.onComplete||function(){},s=new r.window.XMLHttpRequest,a=n.body||n.parameters;return s.onreadystatechange=function(){4===s.readyState&&(o(s),s.onreadystatechange=t)},"GET"===i&&(a=null,"string"===typeof n.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,n.parameters))),s.open(i,e,!0),"POST"!==i&&"PUT"!==i||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(a),s}}(),r.log=console.log,r.warn=console.warn,function(){var t=r.util.object.extend,e=r.util.object.clone,n=[];function i(){return!1}function o(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}r.util.object.extend(n,{cancelAll:function(){var t=this.splice(0);return t.forEach((function(t){t.cancel()})),t},cancelByCanvas:function(t){if(!t)return[];var e=this.filter((function(e){return"object"===typeof e.target&&e.target.canvas===t}));return e.forEach((function(t){t.cancel()})),e},cancelByTarget:function(t){var e=this.findAnimationsByTarget(t);return e.forEach((function(t){t.cancel()})),e},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(t){return this.find((function(e){return e.cancel===t}))},findAnimationsByTarget:function(t){return t?this.filter((function(e){return e.target===t})):[]}});var s=r.window.requestAnimationFrame||r.window.webkitRequestAnimationFrame||r.window.mozRequestAnimationFrame||r.window.oRequestAnimationFrame||r.window.msRequestAnimationFrame||function(t){return r.window.setTimeout(t,1e3/60)},a=r.window.cancelAnimationFrame||r.window.clearTimeout;function l(){return s.apply(r.window,arguments)}r.util.animate=function(n){n||(n={});var s,a=!1,c=function(){var t=r.runningAnimations.indexOf(s);return t>-1&&r.runningAnimations.splice(t,1)[0]};return s=t(e(n),{cancel:function(){return a=!0,c()},currentValue:"startValue"in n?n.startValue:0,completionRate:0,durationRate:0}),r.runningAnimations.push(s),l((function(t){var e,r=t||+new Date,u=n.duration||500,h=r+u,d=n.onChange||i,f=n.abort||i,p=n.onComplete||i,g=n.easing||o,m="startValue"in n&&n.startValue.length>0,v="startValue"in n?n.startValue:0,y="endValue"in n?n.endValue:100,b=n.byValue||(m?v.map((function(t,e){return y[e]-v[e]})):y-v);n.onStart&&n.onStart(),function t(n){var i=(e=n||+new Date)>h?u:e-r,o=i/u,_=m?v.map((function(t,e){return g(i,v[e],b[e],u)})):g(i,v,b,u),w=m?Math.abs((_[0]-v[0])/b[0]):Math.abs((_-v)/b);if(s.currentValue=m?_.slice():_,s.completionRate=w,s.durationRate=o,!a){if(!f(_,w,o))return e>h?(s.currentValue=m?y.slice():y,s.completionRate=1,s.durationRate=1,d(m?y.slice():y,1,1),p(y,1,1),void c()):(d(_,w,o),void l(t));c()}}(r)})),s.cancel},r.util.requestAnimFrame=l,r.util.cancelAnimFrame=function(){return a.apply(r.window,arguments)},r.runningAnimations=n}(),function(){function t(t,e,n){var i="rgba("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return i+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1),i+=")"}r.util.animateColor=function(e,n,i,o){var s=new r.Color(e).getSource(),a=new r.Color(n).getSource(),l=o.onComplete,c=o.onChange;return o=o||{},r.util.animate(r.util.object.extend(o,{duration:i||500,startValue:s,endValue:a,byValue:a,easing:function(e,n,i,r){return t(n,i,o.colorEasing?o.colorEasing(e,r):1-Math.cos(e/r*(Math.PI/2)))},onComplete:function(e,n,i){if(l)return l(t(a,a,0),n,i)},onChange:function(e,n,i){if(c){if(Array.isArray(e))return c(t(e,e,0),n,i);c(e,n,i)}}}))}}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}r.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,o){var s=0;return 0===n?i:1===(n/=o)?i+r:(s||(s=.3*o),-e(t(r,r,s,1.70158),n,o)+i)},easeOutElastic:function(e,n,i,r){var o=0;if(0===e)return n;if(1===(e/=r))return n+i;o||(o=.3*r);var s=t(i,i,o,1.70158);return s.a*Math.pow(2,-10*e)*Math.sin((e*r-s.s)*(2*Math.PI)/s.p)+s.c+n},easeInOutElastic:function(n,i,r,o){var s=0;if(0===n)return i;if(2===(n/=o/2))return i+r;s||(s=o*(.3*1.5));var a=t(r,r,s,1.70158);return n<1?-.5*e(a,n,o)+i:a.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-a.s)*(2*Math.PI)/a.p)*.5+a.c+i},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,o){return t<o/2?.5*n(2*t,0,r,o)+e:.5*i(2*t-o,0,r,o)+.5*r+e}}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.parseUnit,s=e.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",u="clip-path";function h(t){return t in a?a[t]:t}function d(t,n,i,r){var a,l=Array.isArray(n);if("fill"!==t&&"stroke"!==t||"none"!==n){if("strokeUniform"===t)return"non-scaling-stroke"===n;if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=i&&i.transformMatrix?s(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),i&&"undefined"!==typeof i.opacity&&(n*=i.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)a=o(n,r)/r*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(n="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return n;if("imageSmoothing"===t)return"optimizeQuality"===n;a=l?n.map(o):o(n,r)}}else n="";return!l&&isNaN(a)?n:a}function f(t){return new RegExp("^("+t.join("|")+")\\b","i")}function p(t,e){var n,i,r,o,s=[];for(r=0,o=e.length;r<o;r++)n=e[r],i=t.getElementsByTagName(n),s=s.concat(Array.prototype.slice.call(i));return s}function g(t,e){var n,i=!0;return(n=m(t,e.pop()))&&e.length&&(i=function(t,e){var n,i=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),i=m(t=t.parentNode,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function m(t,e){var n,i,r=t.nodeName,o=t.getAttribute("class"),s=t.getAttribute("id");if(n=new RegExp("^"+r,"i"),e=e.replace(n,""),s&&e.length&&(n=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),o&&e.length)for(i=(o=o.split(" ")).length;i--;)n=new RegExp("\\."+o[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function v(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o,s=t.getElementsByTagName("*");for(r=0,o=s.length;r<o;r++)if(e===(i=s[r]).getAttribute("id"))return i}e.svgValidTagNamesRegEx=f(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=f(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=f(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=f(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}var n=e.iMatrix,i=e.reNum,r=e.commaWsp,o="(?:"+("(?:(matrix)\\s*\\(\\s*("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+")"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\))")+")",s=new RegExp("^\\s*(?:"+("(?:"+o+"(?:"+r+"*"+o+")*)")+"?)\\s*$"),a=new RegExp(o,"g");return function(i){var r=n.concat(),l=[];if(!i||i&&!s.test(i))return r;i.replace(a,(function(i){var s=new RegExp(o).exec(i).filter((function(t){return!!t})),a=s[1],c=s.slice(2).map(parseFloat);switch(a){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),o=0,s=0;3===n.length&&(o=n[1],s=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=o-(i*o-r*s),t[5]=s-(r*o+i*s)}(r,c);break;case"scale":!function(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}(r,c);break;case"skewX":t(r,c,2);break;case"skewY":t(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=n.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var y=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function b(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var n,i,r,s,a,l,c=t.getAttribute("viewBox"),u=1,h=1,d=t.getAttribute("width"),f=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!c||!(c=c.match(y)),b=!d||!f||"100%"===d||"100%"===f,_=v&&b,w={},x="",C=0,S=0;if(w.width=0,w.height=0,w.toBeParsed=_,v&&(p||g)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") ",a=(t.getAttribute("transform")||"")+x,t.setAttribute("transform",a),t.removeAttribute("x"),t.removeAttribute("y")),_)return w;if(v)return w.width=o(d),w.height=o(f),w;if(n=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),s=parseFloat(c[4]),w.minX=n,w.minY=i,w.viewBoxWidth=r,w.viewBoxHeight=s,b?(w.width=r,w.height=s):(w.width=o(d),w.height=o(f),u=w.width/r,h=w.height/s),"none"!==(m=e.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(h=u=u>h?h:u),"slice"===m.meetOrSlice&&(h=u=u>h?u:h),C=w.width-r*u,S=w.height-s*u,"Mid"===m.alignX&&(C/=2),"Mid"===m.alignY&&(S/=2),"Min"===m.alignX&&(C=0),"Min"===m.alignY&&(S=0)),1===u&&1===h&&0===n&&0===i&&0===p&&0===g)return w;if((p||g)&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") "),a=x+" matrix("+u+" 0 0 "+h+" "+(n*u+C)+" "+(i*h+S)+") ","svg"===t.nodeName){for(l=t.ownerDocument.createElementNS(e.svgNS,"g");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else(l=t).removeAttribute("x"),l.removeAttribute("y"),a=l.getAttribute("transform")+a;return l.setAttribute("transform",a),w}function _(t,e){var n="xlink:href",i=v(t,e.getAttribute(n).slice(1));if(i&&i.getAttribute(n)&&_(t,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(t){i&&!e.hasAttribute(t)&&i.hasAttribute(t)&&e.setAttribute(t,i.getAttribute(t))})),!e.children.length)for(var r=i.cloneNode(!0);r.firstChild;)e.appendChild(r.firstChild);e.removeAttribute(n)}e.parseSVGDocument=function(t,n,r,o){if(t){!function(t){for(var n=p(t,["use","svg:use"]),i=0;n.length&&i<n.length;){var r=n[i],o=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===o)return;var s,a,l,c,u=o.slice(1),h=r.getAttribute("x")||0,d=r.getAttribute("y")||0,f=v(t,u).cloneNode(!0),g=(f.getAttribute("transform")||"")+" translate("+h+", "+d+")",m=n.length,y=e.svgNS;if(b(f),/^svg$/i.test(f.nodeName)){var _=f.ownerDocument.createElementNS(y,"g");for(a=0,c=(l=f.attributes).length;a<c;a++)s=l.item(a),_.setAttributeNS(y,s.nodeName,s.nodeValue);for(;f.firstChild;)_.appendChild(f.firstChild);f=_}for(a=0,c=(l=r.attributes).length;a<c;a++)"x"!==(s=l.item(a)).nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&"href"!==s.nodeName&&("transform"===s.nodeName?g=s.nodeValue+" "+g:f.setAttribute(s.nodeName,s.nodeValue));f.setAttribute("transform",g),f.setAttribute("instantiated_by_use","1"),f.removeAttribute("id"),r.parentNode.replaceChild(f,r),n.length===m&&i++}}(t);var s,a,l=e.Object.__uid++,c=b(t),u=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===u.length&&e.isLikelyNode){var h=[];for(s=0,a=(u=t.selectNodes('//*[name(.)!="svg"]')).length;s<a;s++)h[s]=u[s];u=h}var d=u.filter((function(t){return b(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)}));if(!d||d&&!d.length)n&&n([],{});else{var f={};u.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var n=t.getAttribute("id");f[n]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=f,e.parseElements(d,(function(t,i){n&&(n(t,c,i,u),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])}),i(c),r,o)}}};var w=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(w);if(n){var i=n[1],r=n[3],s=n[4],a=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=o(s)),l&&(e.fontFamily=l),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,n=p(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,r={};for(i=n.length;i--;)(e=n[i]).getAttribute("xlink:href")&&_(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,i,s){if(t){var a,f,p,m={};"undefined"===typeof s&&(s=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(m=e.parseAttributes(t.parentNode,i,s));var v=i.reduce((function(e,n){return(a=t.getAttribute(n))&&(e[n]=a),e}),{}),y=n(function(t,n){var i={};for(var r in e.cssRules[n])if(g(t,r.split(" ")))for(var o in e.cssRules[n][r])i[o]=e.cssRules[n][r][o];return i}(t,s),e.parseStyleAttribute(t));v=n(v,y),y[u]&&t.setAttribute(u,y[u]),f=p=m.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,v[c]&&(v[c]=f=o(v[c],p));var b,_,w={};for(var x in v)_=d(b=h(x),v[x],m,f),w[b]=_;w&&w.font&&e.parseFontDeclaration(w.font,w);var C=n(m,w);return e.svgValidParentsRegEx.test(t.nodeName)?C:function(t){for(var n in l)if("undefined"!==typeof t[l[n]]&&""!==t[n]){if("undefined"===typeof t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[l[n]],2)).toRgba()}}return t}(C)}},parseElements:function(t,n,i,r,o){new e.ElementsParser(t,n,i,r,o).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"===typeof n?function(t,e){var n,i;t.replace(/;\s*$/,"").split(";").forEach((function(t){var r=t.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i}))}(n,e):function(t,e){var n,i;for(var r in t)"undefined"!==typeof t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r=t.getElementsByTagName("style"),o={};for(n=0,i=r.length;n<i;n++){var s=r[n].textContent;""!==(s=s.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&s.split("}").filter((function(t){return t.trim()})).forEach((function(t){var r=t.split("{"),s={},a=r[1].trim().split(";").filter((function(t){return t.trim()}));for(n=0,i=a.length;n<i;n++){var l=a[n].split(":"),c=l[0].trim(),u=l[1].trim();s[c]=u}(t=r[0].trim()).split(",").forEach((function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]?e.util.object.extend(o[t],s):o[t]=e.util.object.clone(s))}))}))}return o},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:function(t){var o=t.responseXML;if(!o||!o.documentElement)return n&&n(null),!1;e.parseSVGDocument(o.documentElement,(function(t,e,i,r){n&&n(t,e,i,r)}),i,r)}})},loadSVGFromString:function(t,n,i,r){var o=(new e.window.DOMParser).parseFromString(t.trim(),"text/xml");e.parseSVGDocument(o.documentElement,(function(t,e,i,r){n(t,e,i,r)}),i,r)}})}(e),r.ElementsParser=function(t,e,n,i,r,o){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},(i=r.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},i.createObjects=function(){var t=this;this.elements.forEach((function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)}))},i.findTag=function(t){return r[r.util.string.capitalize(t.tagName.replace("svg:",""))]},i.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(i){r.log(i)}else this.checkIfDone()},i.createCallback=function(t,e){var n=this;return function(i){var o;n.resolveGradient(i,e,"fill"),n.resolveGradient(i,e,"stroke"),i instanceof r.Image&&i._originalElement&&(o=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(o),n.resolveClipPath(i,e),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},i.extractPropertyDefinition=function(t,e,n){var i=t[e],o=this.regexUrl;if(o.test(i)){o.lastIndex=0;var s=o.exec(i)[1];return o.lastIndex=0,r[n][this.svgUid][s]}},i.resolveGradient=function(t,e,n){var i=this.extractPropertyDefinition(t,n,"gradientDefs");if(i){var o=e.getAttribute(n+"-opacity"),s=r.Gradient.fromElement(i,t,o,this.options);t.set(n,s)}},i.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},i.resolveClipPath=function(t,e){var n,i,o,s,a=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(a){o=[],i=r.util.invertTransform(t.calcTransformMatrix());for(var l=a[0].parentNode,c=e;c.parentNode&&c.getAttribute("clip-path")!==t.clipPath;)c=c.parentNode;c.parentNode.appendChild(l);for(var u=0;u<a.length;u++)n=a[u],this.findTag(n).fromElement(n,this.createClipPathCallback(t,o),this.options);a=1===o.length?o[0]:new r.Group(o),s=r.util.multiplyTransformMatrices(i,a.calcTransformMatrix()),a.clipPath&&this.resolveClipPath(a,c);var h=r.util.qrDecompose(s);a.flipX=!1,a.flipY=!1,a.set("scaleX",h.scaleX),a.set("scaleY",h.scaleY),a.angle=h.angle,a.skewX=h.skewX,a.skewY=0,a.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),t.clipPath=a}else delete t.clipPath},i.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))},function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(i.x-t.x)-(o.x-r.x)*(i.y-t.y);if(0!==c){var u=a/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(s=new n("Intersection")).appendPoint(new e.Point(t.x+u*(i.x-t.x),t.y+u*(i.y-t.y))):s=new n}else s=new n(0===a||0===l?"Coincident":"Parallel");return s},e.Intersection.intersectLinePolygon=function(t,e,i){var r,o,s,a,l=new n,c=i.length;for(a=0;a<c;a++)r=i[a],o=i[(a+1)%c],s=n.intersectLineLine(t,e,r,o),l.appendPoints(s.points);return l.points.length>0&&(l.status="Intersection"),l},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,o=t.length;for(i=0;i<o;i++){var s=t[i],a=t[(i+1)%o],l=n.intersectLinePolygon(s,a,e);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var o=i.min(r),s=i.max(r),a=new e.Point(s.x,o.y),l=new e.Point(o.x,s.y),c=n.intersectLinePolygon(o,a,t),u=n.intersectLinePolygon(a,s,t),h=n.intersectLinePolygon(s,l,t),d=n.intersectLinePolygon(l,o,t),f=new n;return f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(h.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){t/=255,n/=255,i/=255;var r,o,s,a=e.util.array.max([t,n,i]),l=e.util.array.min([t,n,i]);if(s=(a+l)/2,a===l)r=o=0;else{var c=a-l;switch(o=s>.5?c/(2-a-l):c/(a+l),a){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?"0"+t:t,e=1===(e=i[1].toString(16)).length?"0"+e:e,n=1===(n=i[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),o=this.getSource(),s=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*o[e]+.5*s[e]));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,o,s,a=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)r=o=s=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;r=i(h,u,a+1/3),o=i(h,u,a),s=i(h,u,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,o=i?e.charAt(0)+e.charAt(0):e.substring(0,2),s=i?e.charAt(1)+e.charAt(1):e.substring(2,4),a=i?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(s,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],i=["ns","nesw","ew","nwse"],r={},o="left",s="top",a="right",l="bottom",c="center",u={top:l,bottom:s,left:a,right:o,center:c},h=e.util.radiansToDegrees,d=Math.sign||function(t){return(t>0)-(t<0)||+t};function f(t,e){var n=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(n%360/45)}function p(t,n){var i=n.transform.target,r=i.canvas,o=e.util.object.clone(n);o.target=i,r&&r.fire("object:"+t,o),i.fire(t,n)}function g(t,e){var n=e.canvas,i=t[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function m(t){return t.originX===c&&t.originY===c}function v(t,e,n){var i=t.lockScalingX,r=t.lockScalingY;return!(!i||!r)||(!(e||!i&&!r||!n)||(!(!i||"x"!==e)||!(!r||"y"!==e)))}function y(t,e,n,i){return{e:t,transform:e,pointer:{x:n,y:i}}}function b(t){return function(e,n,i,r){var o=n.target,s=o.getCenterPoint(),a=o.translateToOriginPoint(s,n.originX,n.originY),l=t(e,n,i,r);return o.setPositionByOrigin(a,n.originX,n.originY),l}}function _(t,e){return function(n,i,r,o){var s=e(n,i,r,o);return s&&p(t,y(n,i,r,o)),s}}function w(t,n,i,r,o){var s=t.target,a=s.controls[t.corner],l=s.canvas.getZoom(),c=s.padding/l,u=s.toLocalPoint(new e.Point(r,o),n,i);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=a.offsetX,u.y-=a.offsetY,u}function x(t){return t.flipX!==t.flipY}function C(t,e,n,i,r){if(0!==t[e]){var o=r/t._getTransformedDimensions()[i]*t[n];t.set(n,o)}}function S(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(0,c.skewY),d=w(e,e.originX,e.originY,n,i),f=Math.abs(2*d.x)-u.x,p=c.skewX;f<2?r=0:(r=h(Math.atan2(f/c.scaleX,u.y/c.scaleY)),e.originX===o&&e.originY===l&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),x(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",r),C(c,"skewY","scaleY","y",m)}return g}function T(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(c.skewX,0),d=w(e,e.originX,e.originY,n,i),f=Math.abs(2*d.y)-u.y,p=c.skewY;f<2?r=0:(r=h(Math.atan2(f/c.scaleY,u.x/c.scaleX)),e.originX===o&&e.originY===l&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),x(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",r),C(c,"skewX","scaleX","x",m)}return g}function E(t,e,n,i,r){r=r||{};var o,s,a,l,c,h,f=e.target,p=f.lockScalingX,y=f.lockScalingY,b=r.by,_=g(t,f),x=v(f,b,_),C=e.gestureScale;if(x)return!1;if(C)s=e.scaleX*C,a=e.scaleY*C;else{if(o=w(e,e.originX,e.originY,n,i),c="y"!==b?d(o.x):1,h="x"!==b?d(o.y):1,e.signX||(e.signX=c),e.signY||(e.signY=h),f.lockScalingFlip&&(e.signX!==c||e.signY!==h))return!1;if(l=f._getTransformedDimensions(),_&&!b){var S=Math.abs(o.x)+Math.abs(o.y),T=e.original,E=S/(Math.abs(l.x*T.scaleX/f.scaleX)+Math.abs(l.y*T.scaleY/f.scaleY));s=T.scaleX*E,a=T.scaleY*E}else s=Math.abs(o.x*f.scaleX/l.x),a=Math.abs(o.y*f.scaleY/l.y);m(e)&&(s*=2,a*=2),e.signX!==c&&"y"!==b&&(e.originX=u[e.originX],s*=-1,e.signX=c),e.signY!==h&&"x"!==b&&(e.originY=u[e.originY],a*=-1,e.signY=h)}var k=f.scaleX,O=f.scaleY;return b?("x"===b&&f.set("scaleX",s),"y"===b&&f.set("scaleY",a)):(!p&&f.set("scaleX",s),!y&&f.set("scaleY",a)),k!==f.scaleX||O!==f.scaleY}r.scaleCursorStyleHandler=function(t,e,i){var r=g(t,i),o="";if(0!==e.x&&0===e.y?o="x":0===e.x&&0!==e.y&&(o="y"),v(i,o,r))return"not-allowed";var s=f(i,e);return n[s]+"-resize"},r.skewCursorStyleHandler=function(t,e,n){var r="not-allowed";if(0!==e.x&&n.lockSkewingY)return r;if(0!==e.y&&n.lockSkewingX)return r;var o=f(n,e)%4;return i[o]+"-resize"},r.scaleSkewCursorStyleHandler=function(t,e,n){return t[n.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,n):r.scaleCursorStyleHandler(t,e,n)},r.rotationWithSnapping=_("rotating",b((function(t,e,n,i){var r=e,o=r.target,s=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var a,l=Math.atan2(r.ey-s.y,r.ex-s.x),c=Math.atan2(i-s.y,n-s.x),u=h(c-l+r.theta);if(o.snapAngle>0){var d=o.snapAngle,f=o.snapThreshold||d,p=Math.ceil(u/d)*d,g=Math.floor(u/d)*d;Math.abs(u-g)<f?u=g:Math.abs(u-p)<f&&(u=p)}return u<0&&(u=360+u),u%=360,a=o.angle!==u,o.angle=u,a}))),r.scalingEqually=_("scaling",b((function(t,e,n,i){return E(t,e,n,i)}))),r.scalingX=_("scaling",b((function(t,e,n,i){return E(t,e,n,i,{by:"x"})}))),r.scalingY=_("scaling",b((function(t,e,n,i){return E(t,e,n,i,{by:"y"})}))),r.scalingYOrSkewingX=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,n,i):r.scalingY(t,e,n,i)},r.scalingXOrSkewingY=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,n,i):r.scalingX(t,e,n,i)},r.changeWidth=_("resizing",b((function(t,e,n,i){var r=e.target,o=w(e,e.originX,e.originY,n,i),s=r.strokeWidth/(r.strokeUniform?r.scaleX:1),a=m(e)?2:1,l=r.width,c=Math.abs(o.x*a/r.scaleX)-s;return r.set("width",Math.max(c,0)),l!==c}))),r.skewHandlerX=function(t,e,n,i){var r,l=e.target,u=l.skewX,h=e.originY;return!l.lockSkewingX&&(0===u?r=w(e,c,c,n,i).x>0?o:a:(u>0&&(r=h===s?o:a),u<0&&(r=h===s?a:o),x(l)&&(r=r===o?a:o)),e.originX=r,_("skewing",b(S))(t,e,n,i))},r.skewHandlerY=function(t,e,n,i){var r,a=e.target,u=a.skewY,h=e.originX;return!a.lockSkewingY&&(0===u?r=w(e,c,c,n,i).y>0?s:l:(u>0&&(r=h===o?s:l),u<0&&(r=h===o?l:s),x(a)&&(r=r===s?l:s)),e.originY=r,_("skewing",b(T))(t,e,n,i))},r.dragHandler=function(t,e,n,i){var r=e.target,o=n-e.offsetX,s=i-e.offsetY,a=!r.get("lockMovementX")&&r.left!==o,l=!r.get("lockMovementY")&&r.top!==s;return a&&r.set("left",o),l&&r.set("top",s),(a||l)&&p("moving",y(t,e,n,i)),a||l},r.scaleOrSkewActionName=function(t,e,n){var i=t[n.canvas.altActionKey];return 0===e.x?i?"skewX":"scaleY":0===e.y?i?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(t,e,n){return n.lockRotation?"not-allowed":e.cursorStyle},r.fireEvent=p,r.wrapWithFixedAnchor=b,r.wrapWithFireEvent=_,r.getLocalPoint=w,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians,i=e.controlsUtils;i.renderCircleControl=function(t,e,n,i,r){i=i||{};var o,s=this.sizeX||i.cornerSize||r.cornerSize,a=this.sizeY||i.cornerSize||r.cornerSize,l="undefined"!==typeof i.transparentCorners?i.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),h=e,d=n;t.save(),t.fillStyle=i.cornerColor||r.cornerColor,t.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,s>a?(o=s,t.scale(1,a/s),d=n*s/a):a>s?(o=a,t.scale(s/a,1),h=e*a/s):o=s,t.lineWidth=1,t.beginPath(),t.arc(h,d,o/2,0,2*Math.PI,!1),t[c](),u&&t.stroke(),t.restore()},i.renderSquareControl=function(t,e,i,r,o){r=r||{};var s=this.sizeX||r.cornerSize||o.cornerSize,a=this.sizeY||r.cornerSize||o.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:o.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||o.cornerStrokeColor),h=s/2,d=a/2;t.save(),t.fillStyle=r.cornerColor||o.cornerColor,t.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(n(o.angle)),t[c+"Rect"](-h,-d,s,a),u&&t.strokeRect(-h,-d,s,a),t.restore()}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Control=function(t){for(var e in t)this[e]=t[e]},e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var n=t._controlsVisibility;return n&&"undefined"!==typeof n[e]?n[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,n){return e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},n)},calcCornerCoords:function(t,n,i,r,o){var s,a,l,c,u=o?this.touchSizeX:this.sizeX,h=o?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){var d=Math.atan2(h,u),f=Math.sqrt(u*u+h*h)/2,p=d-e.util.degreesToRadians(t),g=Math.PI/2-d-e.util.degreesToRadians(t);s=f*e.util.cos(p),a=f*e.util.sin(p),l=f*e.util.cos(g),c=f*e.util.sin(g)}else{f=.7071067812*(u&&h?u:n);p=e.util.degreesToRadians(45-t);s=l=f*e.util.cos(p),a=c=f*e.util.sin(p)}return{tl:{x:i-c,y:r-l},tr:{x:i+s,y:r-a},bl:{x:i-s,y:r+a},br:{x:i+c,y:r+l}}},render:function(t,n,i,r,o){if("circle"===((r=r||{}).cornerStyle||o.cornerStyle))e.controlsUtils.renderCircleControl.call(this,t,n,i,r,o);else e.controlsUtils.renderSquareControl.call(this,t,n,i,r,o)}}}(e),function(){function t(t,e){var n,i,o,s,a=t.getAttribute("style"),l=t.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,a){var c=a.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),s=c.length;s--;){var u=c[s].split(/\s*:\s*/),h=u[0].trim(),d=u[1].trim();"stop-color"===h?n=d:"stop-opacity"===h&&(o=d)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),o||(o=t.getAttribute("stop-opacity")),i=(n=new r.Color(n)).getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=i*e,{offset:l,color:n.toRgb(),opacity:o}}var e=r.util.object.clone;r.Gradient=r.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach((function(e){n[e]=t[e]})),this.id?this.id+="_"+r.Object.__uid++:this.id=r.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new r.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return r.util.populateWithProperties(this,e,t),e},toSVG:function(t,n){var i,o,s,a,l=e(this.coords,!0),c=(n=n||{},e(this.colorStops,!0)),u=l.r1>l.r2,h=this.gradientTransform?this.gradientTransform.concat():r.iMatrix.concat(),d=-this.offsetX,f=-this.offsetY,p=!!n.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===g?(d/=t.width,f/=t.height):(d+=t.width/2,f+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(d-=t.pathOffset.x,f-=t.pathOffset.y),h[4]-=d,h[5]-=f,a='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',a+=' gradientTransform="'+(p?n.additionalTransform+" ":"")+r.util.matrixToSVG(h)+'" ',"linear"===this.type?s=["<linearGradient ",a,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(s=["<radialGradient ",a,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for((c=c.concat()).reverse(),i=0,o=c.length;i<o;i++)c[i].offset=1-c[i].offset;var m=Math.min(l.r1,l.r2);if(m>0){var v=m/Math.max(l.r1,l.r2);for(i=0,o=c.length;i<o;i++)c[i].offset+=v*(1-c[i].offset)}}for(i=0,o=c.length;i<o;i++){var y=c[i];s.push("<stop ",'offset="',100*y.offset+"%",'" style="stop-color:',y.color,"undefined"!==typeof y.opacity?";stop-opacity: "+y.opacity:";",'"/>\n')}return s.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),s.join("")},toLive:function(t){var e,n,i,o=r.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(o.x1,o.y1,o.x2,o.y2):"radial"===this.type&&(e=t.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),n=0,i=this.colorStops.length;n<i;n++){var s=this.colorStops[n].color,a=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof a&&(s=new r.Color(s).setAlpha(a).toRgba()),e.addColorStop(l,s)}return e}}}),r.util.object.extend(r.Gradient,{fromElement:function(e,n,i,o){var s=parseFloat(i)/(/%$/.test(i)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var a,l,c,u,h=e.getElementsByTagName("stop"),d="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",f=e.getAttribute("gradientTransform")||"",p=[],g=0,m=0;for("linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(a="linear",l=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e)):(a="radial",l=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),c=h.length;c--;)p.push(t(h[c],s));return u=r.parseTransformAttribute(f),function(t,e,n,i){var r,o;Object.keys(e).forEach((function(t){"Infinity"===(r=e[t])?o=1:"-Infinity"===r?o=0:(o=parseFloat(e[t],10),"string"===typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===i&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(o*=n.viewBoxHeight||n.height)))),e[t]=o}))}(0,l,o,d),"pixels"===d&&(g=-n.left,m=-n.top),new r.Gradient({id:e.getAttribute("id"),type:a,coords:l,colorStops:p,gradientUnits:d,gradientTransform:u,offsetX:g,offsetY:m})}})}(),function(){"use strict";var t=r.util.toFixed;r.Pattern=r.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=r.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else{var n=this;this.source=r.util.createImage(),r.util.loadImage(t.source,(function(t,i){n.source=t,e&&e(n,i)}),null,this.crossOrigin)}},toObject:function(e){var n,i,o=r.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},r.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,o&&(i+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"===typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,r=40,o=e.Object.NUM_FRACTION_DIGITS,s=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(s.x)+this.blur)/t.width,o)+20,r=100*n((Math.abs(s.y)+this.blur)/t.height,o)+20),t.flipX&&(s.x*=-1),t.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(s.x,o)+'" dy="'+n(s.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==n[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(r.StaticCanvas)r.warn("fabric.StaticCanvas is already defined.");else{var t=r.util.object.extend,e=r.util.getElementOffset,n=r.util.removeFromArray,i=r.util.toFixed,o=r.util.transformPoint,s=r.util.invertTransform,a=r.util.getNodeCanvas,l=r.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");r.StaticCanvas=r.util.createClass(r.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:r.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return r.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,r.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=r.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,n,i){return"string"===typeof e?r.util.loadImage(e,(function(e,o){if(e){var s=new r.Image(e,i);this[t]=s,s.canvas=this}n&&n(e,o)}),this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e,!1)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=l();if(!t)throw c;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=r.util.getById(t)||this._createCanvasElement(),r.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject,o=this.backgroundImage,s=this.overlayImage;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)(e=this._objects[n]).group||e.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),s&&s.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=o(t,s(this.viewportTransform)),i[0]=e,i[3]=e;var r=o(t,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new r.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new r.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=r.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=s(this.viewportTransform);return t.tl=o({x:0,y:0},i),t.br=o({x:e,y:n},i),t.tr=new r.Point(t.br.x,t.tl.y),t.bl=new r.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),r.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],i=this[e+"Image"],r=this.viewportTransform,o=this[e+"Vpt"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var s=n.gradientTransform||n.patternTransform;s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.fill(),t.restore()}i&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new r.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new r.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new r.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=s(this.viewportTransform);return o(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i=this.clipPath,o={version:r.version,objects:this._toObjects(e,n)};return i&&!i.excludeFromExport&&(o.clipPath=this._toObject(this.clipPath,e,n)),t(o,this.__serializeBgOverlay(e,n)),r.util.populateWithProperties(this,o,n),o},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){return this._toObject(n,t,e)}),this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,s=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(n.background=o.toObject(e)):o&&(n.background=o),s&&s.toObject?s.excludeFromExport||(n.overlay=s.toObject(e)):s&&(n.overlay=s),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,o=e.width||this.width,s=e.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',l=r.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,a='viewBox="'+i(-n[4]/n[0],l)+" "+i(-n[5]/n[3],l)+" "+i(this.width/n[0],l)+" "+i(this.height/n[3],l)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',o,'" ','height="',s,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",r.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+r.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map((function(e){var n=t[e+"Color"];if(n&&n.toLive){var i=t[e+"Vpt"],o=t.viewportTransform,s={width:t.width/(i?o[0]:1),height:t.height/(i?o[3]:1)};return n.toSVG(s,{additionalTransform:i?r.util.matrixToSVG(o):""})}})).join("")},createSVGFontFacesMarkup:function(){var t,e,n,i,o,s,a,l,c="",u={},h=r.fontPaths,d=[];for(this._objects.forEach((function t(e){d.push(e),e._objects&&e._objects.forEach(t)})),a=0,l=d.length;a<l;a++)if(e=(t=d[a]).fontFamily,-1!==t.type.indexOf("text")&&!u[e]&&h[e]&&(u[e]=!0,t.styles))for(o in n=t.styles)for(s in i=n[o])!u[e=i[s].fontFamily]&&h[e]&&(u[e]=!0);for(var f in u)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",f,"';\n","\t\t\tsrc: url('",h[f],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(t,e){var n,i,r,o=this._objects;for(i=0,r=o.length;i<r;i++)(n=o[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],i=this.viewportTransform,o=this.width,s=this.height;if(n)if(n.toLive){var a=n.repeat,l=r.util.invertTransform(i),c=this[e+"Vpt"]?r.util.matrixToSVG(l):"";t.push('<rect transform="'+c+" translate(",o/2,",",s/2,')"',' x="',n.offsetX-o/2,'" y="',n.offsetY-s/2,'" ','width="',"repeat-y"===a||"no-repeat"===a?n.source.width:o,'" height="',"repeat-x"===a||"no-repeat"===a?n.source.height:s,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(e=(r=o._objects).length;e--;)i=r[e],n(this._objects,i),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=0;e<r.length;e++)i=r[e],n(this._objects,i),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,o,s,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(a=l._objects,i=0;i<a.length;i++)r=a[i],(o=this._objects.indexOf(r))>0+c&&(s=o-1,n(this._objects,r),this._objects.splice(s,0,r)),c++;else 0!==(o=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,o,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n)for(i=e,r=e-1;r>=0;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,o,s,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(i=(a=l._objects).length;i--;)r=a[i],(o=this._objects.indexOf(r))<this._objects.length-1-c&&(s=o+1,n(this._objects,r),this._objects.splice(s,0,r)),c++;else(o=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,o,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,o;if(n)for(i=e,r=e+1,o=this._objects.length;r<o;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),r.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),r.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(r.StaticCanvas.prototype,r.Observable),t(r.StaticCanvas.prototype,r.Collection),t(r.StaticCanvas.prototype,r.DataURLExporter),t(r.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=l();if(!e||!e.getContext)return null;var n=e.getContext("2d");return n&&"setLineDash"===t?"undefined"!==typeof n.setLineDash:null}}),r.StaticCanvas.prototype.toJSON=r.StaticCanvas.prototype.toObject,r.isLikelyNode&&(r.StaticCanvas.prototype.createPNGStream=function(){var t=a(this.lowerCanvasEl);return t&&t.createPNGStream()},r.StaticCanvas.prototype.createJPEGStream=function(t){var e=a(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),r.BaseBrush=r.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,i=t.getZoom();t&&t._isRetinaScaling()&&(i*=r.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*i,n.shadowOffsetX=e.offsetX*i,n.shadowOffsetY=e.offsetY*i}},needsFullRender:function(){return new r.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),r.PencilBrush=r.util.createClass(r.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new r.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){var e=new r.Point(t.x,t.y);return this._addPoint(e)},_render:function(t){var e,n,i=this._points[0],o=this._points[1];if(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&i.x===o.x&&i.y===o.y){var s=this.width/1e3;i=new r.Point(i.x,i.y),o=new r.Point(o.x,o.y),i.x-=s,o.x+=s}for(t.moveTo(i.x,i.y),e=1,n=this._points.length;e<n;e++)this._drawSegment(t,i,o),i=this._points[e],o=this._points[e+1];t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return r.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return"M 0 0 Q 0 0 0 0 L 0 0"===r.util.joinPath(t)},createPath:function(t){var e=new r.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new r.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i=this.canvas.getZoom(),r=Math.pow(e/i,2),o=t.length-1,s=t[0],a=[s];for(n=1;n<o-1;n++)Math.pow(s.x-t[n].x,2)+Math.pow(s.y-t[n].y,2)>=r&&(s=t[n],a.push(s));return a.push(t[o]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(t))this.canvas.requestRenderAll();else{var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}}),r.CircleBrush=r.util.createClass(r.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var o=this.points[t],s=new r.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(s.shadow=new r.Shadow(this.shadow)),i.push(s)}var a=new r.Group(i);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new r.Point(t.x,t.y),n=r.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new r.Color(this.color).setAlpha(r.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),r.SprayBrush=r.util.createClass(r.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var o=this.sprayChunks[n],s=0,a=o.length;s<a;s++){var l=new r.Rect({width:o[s].width,height:o[s].width,left:o[s].x+1,top:o[s].y+1,originX:"center",originY:"center",fill:this.color});e.push(l)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new r.Group(e);this.shadow&&c.set("shadow",new r.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)r[e=t[n].left+""+t[n].top]||(r[e]=t[n]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];"undefined"!==typeof r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,o,s=this.width/2;for(o=0;o<this.density;o++){e=r.util.getRandomInt(t.x-s,t.x+s),n=r.util.getRandomInt(t.y-s,t.y+s),i=this.dotWidthVariance?r.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new r.Point(e,n);a.width=i,this.randomOpacity&&(a.opacity=r.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),r.PatternBrush=r.util.createClass(r.PencilBrush,{getPatternSrc:function(){var t=r.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(t){this.callSuper("_setBrushStyles",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new r.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=r.util.getPointer,e=r.util.degreesToRadians,n=r.util.isTouchEvent;for(var i in r.Canvas=r.util.createClass(r.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=r.PencilBrush&&new r.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,o=this._objects.length;r<o;r++)t=this._objects[r],-1===i.indexOf(t)?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=r.util.invertTransform(n),o=this.restorePointerVpt(e);return r.util.transformPoint(o,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),o=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+i.y*t.zoomY,0);return r.util.isTransparent(t._cacheContext,Math.round(o),Math.round(s),this.targetFindTolerance)}var a=this.contextCache,l=t.selectionBackgroundColor,c=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(a),a.save(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),t.render(a),a.restore(),t.selectionBackgroundColor=l,r.util.isTransparent(a,e,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey]},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e,n){var i;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?i=this.centeredScaling||t.centeredScaling:"rotate"===e&&(i=this.centeredRotation||t.centeredRotation),i?!n:n},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n,i){if(!e||!t)return"drag";var r=i.controls[e];return r.getActionName(n,r,i)},_setupCurrentTransform:function(t,n,i){if(n){var o=this.getPointer(t),s=n.__corner,a=n.controls[s],l=i&&s?a.getActionHandler(t,n,a):r.controlsUtils.dragHandler,c=this._getActionFromCorner(i,s,t,n),u=this._getOriginFromCorner(n,s),h=t[this.centeredKey],d={target:n,action:c,actionHandler:l,corner:s,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:o.x-n.left,offsetY:o.y-n.top,originX:u.x,originY:u.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:e(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:h,original:r.util.saveObjectTransform(n)};this._shouldCenterTransform(n,c,h)&&(d.originX="center",d.originY="center"),d.original.originX=u.x,d.original.originY=u.y,this._currentTransform=d,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=new r.Point(e.ex,e.ey),i=r.util.transformPoint(n,this.viewportTransform),o=new r.Point(e.ex+e.left,e.ey+e.top),s=r.util.transformPoint(o,this.viewportTransform),a=Math.min(i.x,s.x),l=Math.min(i.y,s.y),c=Math.max(i.x,s.x),u=Math.max(i.y,s.y),h=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(a,l,c-a,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,a+=h,l+=h,c-=h,u-=h,r.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(a,l,c-a,u-l))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,o=this.getPointer(t,!0),s=this._activeObject,a=this.getActiveObjects(),l=n(t),c=a.length>1&&!e||1===a.length;if(this.targets=[],c&&s._findTargetCorner(o,l))return s;if(a.length>1&&!e&&s===this._searchPossibleTargets([s],o))return s;if(1===a.length&&s===this._searchPossibleTargets([s],o)){if(!this.preserveObjectStacking)return s;i=s,r=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,o);return t[this.altSelectionKey]&&u&&i&&u!==i&&(u=i,this.targets=r),u}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,n.x,n.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,o=t.length;o--;){var s=t[o],a=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(a,s,e)){(n=t[o]).subTargetCheck&&n instanceof r.Group&&(i=this._searchPossibleTargets(n._objects,e))&&this.targets.push(i);break}}return n},restorePointerVpt:function(t){return r.util.transformPoint(t,r.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),o=this.upperCanvasEl,s=o.getBoundingClientRect(),a=s.width||0,l=s.height||0;a&&l||("top"in s&&"bottom"in s&&(l=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),i=0===a||0===l?{width:1,height:1}:{width:o.width/a,height:o.height/l},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),r.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=r.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),r.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),r.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;r.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,r.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],o=[];t.forEach((function(t){-1===i.indexOf(t)&&(n=!0,t.fire("deselected",{e:e,target:t}),o.push(t))})),i.forEach((function(i){-1===t.indexOf(i)&&(n=!0,i.fire("selected",{e:e,target:i}),r.push(i))})),t.length>0&&i.length>0?n&&this.fire("selection:updated",{e:e,selected:r,deselected:o}):i.length>0?this.fire("selection:created",{e:e,selected:r}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:o})},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,r.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(n){e[n]=t[n]})),r.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),r.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),r.StaticCanvas)"prototype"!==i&&(r.Canvas[i]=r.StaticCanvas[i])}(),function(){var t=r.util.addListener,e=r.util.removeListener,n={passive:!1};function i(t,e){return t.button&&t.button===e-1}r.util.object.extend(r.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,o=this._getEventPrefix();t(r.window,"resize",this._onResize),t(i,o+"down",this._onMouseDown),t(i,o+"move",this._onMouseMove,n),t(i,o+"out",this._onMouseOut),t(i,o+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,n),"undefined"!==typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(r.document,t+"up",this._onMouseUp),e(r.document,"touchend",this._onTouchEnd,n),e(r.document,t+"move",this._onMouseMove,n),e(r.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var n=this;this._hoveredTargets.forEach((function(i){n.fire("mouse:out",{target:e,e:t}),i&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[]},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var o=this.upperCanvasEl,s=this._getEventPrefix();t(r.document,"touchend",this._onTouchEnd,n),t(r.document,"touchmove",this._onMouseMove,n),e(o,s+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var o=this.upperCanvasEl,s=this._getEventPrefix();e(o,s+"move",this._onMouseMove,n),t(r.document,s+"up",this._onMouseUp),t(r.document,s+"move",this._onMouseMove,n)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var o=this._getEventPrefix();e(r.document,"touchend",this._onTouchEnd,n),e(r.document,"touchmove",this._onMouseMove,n);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(s.upperCanvasEl,o+"down",s._onMouseDown),s._willAddMouseDown=0}),400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var o=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(i)&&(e(r.document,s+"up",this._onMouseUp),e(r.document,s+"move",this._onMouseMove,n),t(o,s+"move",this._onMouseMove,n))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,n=this._currentTransform,o=this._groupSelector,s=!1,a=!o||0===o.left&&0===o.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),i(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,a);else{if(i(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,a),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(n&&(this._finalizeCurrentTransform(t),s=n.actionPerformed),!a){var l=e===this._activeObject;this._maybeGroupObjects(t),s||(s=this._shouldRender(e)||!l&&e===this._activeObject)}var c,u;if(e){if(c=e._findTargetCorner(this.getPointer(t,!0),r.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),s=!0;else{var h=e.controls[c],d=h&&h.getMouseUpHandler(t,e,h);d&&d(t,n,(u=this.getPointer(t)).x,u.y)}e.isMoving=!1}if(n&&(n.target!==e||n.corner!==c)){var f=n.target&&n.target.controls[n.corner],p=f&&f.getMouseUpHandler(t,e,h);u=u||this.getPointer(t),p&&p(t,n,u.x,u.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,a),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():a||this.renderTop()}}},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var o=0;o<i.length;o++)i[o].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,o=this.targets||[],s={e:t,target:r,subTargets:o,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(s.currentTarget=this.findTarget(t),s.currentSubTargets=this.targets),this.fire("mouse:"+e,s),r&&r.fire("mouse"+e,s);for(var a=0;a<o.length;a++)o[a].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),(e.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",i)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(i(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(i(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var o=this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var a=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var l=e._findTargetCorner(this.getPointer(t,!0),r.util.isTouchEvent(t));if(e.__corner=l,e===this._activeObject&&(l||!s)){this._setupCurrentTransform(t,e,a);var c=e.controls[l],u=(n=this.getPointer(t),c&&c.getMouseDownHandler(t,e,c));u&&u(t,this._currentTransform,n.x,n.y)}}this._handleEvent(t,"down"),(o||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(n=this._absolutePointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,o=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:i[s],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,o=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:i[s],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var i,r,o,s=n.oldTarget,a=s!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;a&&(i={e:e,target:t,previousTarget:s},r={e:e,target:s,nextTarget:t}),o=t&&a,s&&a&&(c&&this.fire(c,r),s.fire(n.evtOut,r)),o&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.action,s=!1,a=e.actionHandler;a&&(s=a(t,e,i,r)),"drag"===o&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:r.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){n=t.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(t,e,n){var i=e.controls[t];return i.cursorStyleHandler(n,i,e)}})}(),function(){var t=Math.min,e=Math.max;r.util.object.extend(r.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0))&&e.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new r.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new r.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(n){for(var i,o=[],s=this._groupSelector.ex,a=this._groupSelector.ey,l=s+this._groupSelector.left,c=a+this._groupSelector.top,u=new r.Point(t(s,l),t(a,c)),h=new r.Point(e(s,l),e(a,c)),d=!this.selectionFullyContained,f=s===l&&a===c,p=this._objects.length;p--&&!((i=this._objects[p])&&i.selectable&&i.visible&&(d&&i.intersectsWithRect(u,h,!0)||i.isContainedWithinRect(u,h,!0)||d&&i.containsPoint(u,null,!0)||d&&i.containsPoint(h,null,!0))&&(o.push(i),f)););return o.length>1&&(o=o.filter((function(t){return!t.onSelect({e:n})}))),o},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),r.util.object.extend(r.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(i,t);return r.util.toDataURL(o,e,n)},toCanvasElement:function(t,e){t=t||1;var n=((e=e||{}).width||this.width)*t,i=(e.height||this.height)*t,o=this.getZoom(),s=this.width,a=this.height,l=o*t,c=this.viewportTransform,u=(c[4]-(e.left||0))*t,h=(c[5]-(e.top||0))*t,d=this.interactive,f=[l,0,0,l,u,h],p=this.enableRetinaScaling,g=r.util.createCanvasElement(),m=this.contextTop;return g.width=n,g.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=f,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=c,this.width=s,this.height=a,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=p,this.contextTop=m,g}}),r.util.object.extend(r.StaticCanvas.prototype,{loadFromJSON:function(t,e,n){if(t){var i="string"===typeof t?JSON.parse(t):r.util.object.clone(t),o=this,s=i.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,(function(t){o.clear(),o._setBgOverlay(i,(function(){s?o._enlivenObjects([s],(function(n){o.clipPath=n[0],o.__setupCanvas.call(o,i,t,a,e)})):o.__setupCanvas.call(o,i,t,a,e)}))}),n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,i){var o=this;if(!e)return n[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?r.util.enlivenObjects([e],(function(e){o[t]=e[0],n[t]=!0,i&&i()})):this["set"+r.util.string.capitalize(t,!0)](e,(function(){n[t]=!0,i&&i()}))},_enlivenObjects:function(t,e,n){t&&0!==t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),null,n):e&&e([])},_toDataURL:function(t,e){this.clone((function(n){e(n.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,n){this.clone((function(i){n(i.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(n,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=r.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new r.Canvas(e);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),t&&t(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.string.capitalize,s=e.util.degreesToRadians,a=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,o=e.maxCacheSideLimit,s=e.minCacheSideLimit;if(i<=o&&r<=o&&i*r<=n)return i<s&&(t.width=s),r<s&&(t.height=s),t;var a=i/r,l=e.util.limitDimsByArea(a,n),c=e.util.capValue,u=c(s,l.x,o),h=c(s,l.y,o);return i>u&&(t.zoomX/=i/u,t.width=u,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,i=t._currentTransform.action;if(this===n&&i.slice&&"scale"===i.slice(0,5))return!1}var r,o,s=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),l=e.minCacheSideLimit,c=a.width,u=a.height,h=a.zoomX,d=a.zoomY,f=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==d,g=f||p,m=0,v=0,y=!1;if(f){var b=this._cacheCanvas.width,_=this._cacheCanvas.height,w=c>b||u>_;y=w||(c<.9*b||u<.9*_)&&b>l&&_>l,w&&!a.capped&&(c>l||u>l)&&(m=.1*c,v=.1*u)}return this instanceof e.Text&&this.path&&(g=!0,y=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(y?(s.width=Math.ceil(c+m),s.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),r=a.x/2,o=a.y/2,this.cacheTranslationX=Math.round(s.width/2-r)+r,this.cacheTranslationY=Math.round(s.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,d),this.zoomX=h,this.zoomY=d,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype;return n.stateProperties.forEach((function(e){"left"!==e&&"top"!==e&&(t[e]===n[e]&&delete t[e],Array.isArray(t[e])&&Array.isArray(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])})),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i="scaleX"===t||"scaleY"===t,r=this[t]!==n,o=!1;return i&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,n){if(t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var n=e.fill;n&&(n.toLive?(t.fillStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=n)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,n){var i,r,o,a=this.getViewportTransform(),l=this.calcTransformMatrix();r="undefined"!==typeof(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,o="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(a,l),i=e.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(s(this.group?i.angle:this.angle)),n.forActiveSelection||this.group?r&&this.drawBordersInGroup(t,i,n):r&&this.drawBorders(t,n),o&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,s=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=e.devicePixelRatio,s*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(o+s)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*o*n.scaleX,t.shadowOffsetY=i.offsetY*s*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),a=r.x/this.scaleX/s,l=r.y/this.scaleY/s;o.width=a,o.height=l,(i=o.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(a,0),i.lineTo(a,l),i.lineTo(0,l),i.closePath(),i.translate(a/2,l/2),i.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.group,o=this.shadow,s=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var l,c,u,h,d=e.util.createCanvasElement(),f=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(s(p.offsetX)+c)*s(l.scaleX),g.y=2*Math.round(s(p.offsetY)+c)*s(l.scaleY)),u=f.width+g.x,h=f.height+g.y,d.width=Math.ceil(u),d.height=Math.ceil(h);var m=new e.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var y=m.toCanvasElement(a||1,t);return this.shadow=o,this.set("canvas",v),r&&(this.group=r),this.set(i).setCoords(),m._objects=[],m.dispose(),m=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,s(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){e.runningAnimations&&e.runningAnimations.cancelByTarget(this)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.ENLIVEN_PROPS=["clipPath"],e.Object._fromObject=function(t,n,r,o){var s=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],(function(t){"undefined"!==typeof t[0]&&(n.fill=t[0]),"undefined"!==typeof t[1]&&(n.stroke=t[1]),e.util.enlivenObjectEnlivables(n,n,(function(){var t=o?new s(n[o],n):new s(n);r&&r(t)}))}))},e.Object.__uid=0)}(e),function(){var t=r.util.degreesToRadians,e={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};r.util.object.extend(r.Object.prototype,{translateToGivenOrigin:function(t,i,o,s,a){var l,c,u,h=t.x,d=t.y;return"string"===typeof i?i=e[i]:i-=.5,"string"===typeof s?s=e[s]:s-=.5,"string"===typeof o?o=n[o]:o-=.5,"string"===typeof a?a=n[a]:a-=.5,c=a-o,((l=s-i)||c)&&(u=this._getTransformedDimensions(),h=t.x+l*u.x,d=t.y+c*u.y),new r.Point(h,d)},translateToCenterPoint:function(e,n,i){var o=this.translateToGivenOrigin(e,n,i,"center","center");return this.angle?r.util.rotatePoint(o,e,t(this.angle)):o},translateToOriginPoint:function(e,n,i){var o=this.translateToGivenOrigin(e,"center","center",n,i);return this.angle?r.util.rotatePoint(o,e,t(this.angle)):o},getCenterPoint:function(){var t=new r.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,i){var o,s,a=this.getCenterPoint();return o="undefined"!==typeof n&&"undefined"!==typeof i?this.translateToGivenOrigin(a,"center","center",n,i):new r.Point(this.left,this.top),s=new r.Point(e.x,e.y),this.angle&&(s=r.util.rotatePoint(s,a,-t(this.angle))),s.subtractEquals(o)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(n){var i,o,s=t(this.angle),a=this.getScaledWidth(),l=r.util.cos(s)*a,c=r.util.sin(s)*a;i="string"===typeof this.originX?e[this.originX]:this.originX-.5,o="string"===typeof n?e[n]:n-.5,this.left+=l*(o-i),this.top+=c*(o-i),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var t=r.util,e=t.degreesToRadians,n=t.multiplyTransformMatrices,i=t.transformPoint;t.object.extend(r.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return n=this._getCoords(t,e),[new r.Point(n.tl.x,n.tl.y),new r.Point(n.tr.x,n.tr.y),new r.Point(n.br.x,n.br.y),new r.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(t,e,n,i){var o=this.getCoords(n,i);return"Intersection"===r.Intersection.intersectPolygonRectangle(o,t,e).status},intersectsWithObject:function(t,e,n){return"Intersection"===r.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=e?t.aCoords:t.lineCoords,o=0,s=t._getImageLines(r);o<4;o++)if(!t.containsPoint(i[o],s))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){var r=this._getCoords(n,i),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some((function(t){return t.x<=n.x&&t.x>=e.x&&t.y<=n.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t))},_containsCenterOfCanvas:function(t,e,n){var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this.getCoords(!0,t).every((function(t){return(t.x>=n.x||t.x<=e.x)&&(t.y>=n.y||t.y<=e.y)}))&&this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o=0;for(var s in e)if(!((r=e[s]).o.y<t.y&&r.d.y<t.y)&&!(r.o.y>=t.y&&r.d.y>=t.y)&&(r.o.x===r.d.x&&r.o.x>=t.x?i=r.o.x:(0,n=(r.d.y-r.o.y)/(r.d.x-r.o.x),i=-(t.y-0*t.x-(r.o.y-n*r.o.x))/(0-n)),i>=t.x&&(o+=1),2===o))break;return o},getBoundingRect:function(e,n){var i=this.getCoords(e,n);return t.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcLineCoords:function(){var n=this.getViewportTransform(),r=this.padding,o=e(this.angle),s=t.cos(o)*r,a=t.sin(o)*r,l=s+a,c=s-a,u=this.calcACoords(),h={tl:i(u.tl,n),tr:i(u.tr,n),bl:i(u.bl,n),br:i(u.br,n)};return r&&(h.tl.x-=c,h.tl.y-=l,h.tr.x+=l,h.tr.y-=c,h.bl.x-=l,h.bl.y+=c,h.br.x+=c,h.br.y+=l),h},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),r=n(i,e),o=n(r,t),s=(o=n(o,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl((function(t,e,n){a[e]=t.positionHandler(s,o,n)})),a},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),r=n(e,t),o=this._getTransformedDimensions(),s=o.x/2,a=o.y/2;return{tl:i({x:-s,y:-a},r),tr:i({x:s,y:-a},r),bl:i({x:-s,y:a},r),br:i({x:s,y:a},r)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return t.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),r=this.matrixCache||(this.matrixCache={});return r.key===i?r.value:(this.group&&(e=n(this.group.calcTransformMatrix(!1),e)),r.key=i,r.value=e,e)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===e)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=e,n.value=t.composeMatrix(r),n.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(e,n){"undefined"===typeof e&&(e=this.skewX),"undefined"===typeof n&&(n=this.skewY);var i,r,o,s=0===e&&0===n;if(this.strokeUniform?(r=this.width,o=this.height):(r=(i=this._getNonTransformedDimensions()).x,o=i.y),s)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var a=t.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:n});return this._finalizeDimensions(a.x,a.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return i(e,t,!0).scalarAdd(2*this.padding)}})}(),r.util.object.extend(r.Object.prototype,{sendToBack:function(){return this.group?r.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?r.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?r.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?r.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?r.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new r.Color(e),i=t+": "+n.toRgb()+"; ",o=n.getAlpha();return 1!==o&&(i+=t+"-opacity: "+o.toString()+"; "),i}return t+": none; "}var e=r.util.toFixed;r.util.object.extend(r.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",n,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(e,n){var i="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+i:"",o=e.strokeWidth?"stroke-width: "+e.strokeWidth+i:"",s=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+i:""),a=e.fontStyle?"font-style: "+e.fontStyle+i:"",l=e.fontWeight?"font-weight: "+e.fontWeight+i:"",c=e.fill?t("fill",e.fill):"",u=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e);return h&&(h="text-decoration: "+h+i),[u,o,r,s,a,l,h,c,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+r.util.matrixToSVG(n)+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var n=r.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var n=(e=e||{}).reviver,i=e.additionalTransform||"",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=r,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var n,i,o=(e=e||{}).noStyle,s=e.reviver,a=o?"":'style="'+this.getSvgStyles()+'" ',l=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,d=this.stroke,f=this.fill,p=this.shadow,g=[],m=t.indexOf("COMMON_PARTS"),v=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+r.Object.__uid++,i='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(s)+"</clipPath>\n"),h&&g.push("<g ",l,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),h?"":l+this.getSvgCommons()," >\n"),n=[a,u,o?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),t[m]=n,f&&f.toLive&&g.push(f.toSVG(this)),d&&d.toLive&&g.push(d.toSVG(this)),p&&g.push(p.toSVG(this)),c&&g.push(i),g.push(t.join("")),g.push("</g>\n"),h&&g.push("</g>\n"),s?s(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=r.util.object.extend,e="stateProperties";function n(e,n,i){var r={};i.forEach((function(t){r[t]=e[t]})),t(e[n],r,!0)}function i(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0,o=t.length;r<o;r++)if(!i(t[r],e[r]))return!1;return!0}if(t&&"object"===typeof t){var s,a=Object.keys(t);if(!e||"object"!==typeof e||!n&&a.length!==Object.keys(e).length)return!1;for(r=0,o=a.length;r<o;r++)if("canvas"!==(s=a[r])&&"group"!==s&&!i(t[s],e[s]))return!1;return!0}}r.util.object.extend(r.Object.prototype,{hasStateChanged:function(t){var n="_"+(t=t||e);return Object.keys(this[n]).length<this[t].length||!i(this[n],this,!0)},saveState:function(t){var i=t&&t.propertySet||e,r="_"+i;return this[r]?(n(this,r,this[i]),t&&t.stateProperties&&n(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){var n=(t=t||{}).propertySet||e;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})}(),function(){var t=r.util.degreesToRadians;r.util.object.extend(r.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,o=t.x,s=t.y,a=Object.keys(this.oCoords),l=a.length-1;for(this.__corner=0;l>=0;l--)if(r=a[l],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(n=this._findCrossPoints({x:o,y:s},i))&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,o=n.y+i,s="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,a=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-r/2,-o/2,r,o),s&&(t.beginPath(),this.forEachControl((function(e,n,i){e.withConnection&&e.getVisibility(i,n)&&(a=!0,t.moveTo(e.x*r,e.y*o),t.lineTo(e.x*r+e.offsetX,e.y*o+e.offsetY))})),a&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i=r.util.sizeAfterTransform(this.width,this.height,e),o=this.strokeWidth,s=this.strokeUniform,a=this.borderScaleFactor,l=i.x+o*(s?this.canvas.getZoom():e.scaleX)+a,c=i.y+o*(s?this.canvas.getZoom():e.scaleY)+a;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-l/2,-c/2,l,c),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var n,i,o=this.canvas.getRetinaScaling();return t.setTransform(o,0,0,o,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(o,s,a){i=a.oCoords[s],o.getVisibility(a,s)&&(n&&(i=r.util.transformPoint(i,n)),o.render(t,i.x,i.y,e,a))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),r.util.object.extend(r.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,o=e.onChange||n,s=this;return r.util.animate({target:this,startValue:t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.requestRenderAll(),o()},onComplete:function(){t.setCoords(),i()}})},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,o=e.onChange||n,s=this;return r.util.animate({target:this,startValue:t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.requestRenderAll(),o()},onComplete:function(){t.setCoords(),i()}})},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,o=e.onChange||n,s=this;return r.util.animate({target:this,startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),s.requestRenderAll(),o()},onComplete:function(){s.remove(t),i()}})}}),r.util.object.extend(r.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,n=[],i=[];for(t in arguments[0])n.push(t);for(var r=0,o=n.length;r<o;r++)t=n[r],e=r!==o-1,i.push(this._animate(t,arguments[0][t],arguments[1],e));return i}return this._animate.apply(this,arguments)},_animate:function(t,e,n,i){var o,s=this;e=e.toString(),n=n?r.util.object.clone(n):{},~t.indexOf(".")&&(o=t.split("."));var a=s.colorProperties.indexOf(t)>-1||o&&s.colorProperties.indexOf(o[1])>-1,l=o?this.get(o[0])[o[1]]:this.get(t);"from"in n||(n.from=l),a||(e=~e.indexOf("=")?l+parseFloat(e.replace("=","")):parseFloat(e));var c={target:this,startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(s,t,e,i)},onChange:function(e,r,a){o?s[o[0]][o[1]]=e:s.set(t,e),i||n.onChange&&n.onChange(e,r,a)},onComplete:function(t,e,r){i||(s.setCoords(),n.onComplete&&n.onComplete(t,e,r))}};return a?r.util.animateColor(c.startValue,c.endValue,c.duration,c):r.util.animate(c)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function o(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(n)){case s:return Math.min(this.get(i),this.get(r));case a:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5;return{x1:n,x2:t*this.width*-.5,y1:i,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,i,r){r=r||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),s=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];i(new e.Line(s,n(o,r)))},e.Line.fromObject=function(t,n){var r=i(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,(function(t){delete t.points,n&&n(t)}),"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,i=(this.endAngle-this.startAngle)%360;if(0===i)t=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=n(this.startAngle),o=n(this.endAngle),s=this.radius;t=['<path d="M '+e.util.cos(r)*s+" "+e.util.sin(r)*s," A "+s+" "+s," 0 ",+(i>180?"1":"0")+" 1"," "+e.util.cos(o)*s+" "+e.util.sin(o)*s,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var i,r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=r)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,o=-this.width/2,s=-this.height/2,a=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(o+e,s),t.lineTo(o+i-e,s),a&&t.bezierCurveTo(o+i-l*e,s,o+i,s+l*n,o+i,s+n),t.lineTo(o+i,s+r-n),a&&t.bezierCurveTo(o+i,s+r-l*n,o+i-l*e,s+r,o+i-e,s+r),t.lineTo(o+e,s+r),a&&t.bezierCurveTo(o+l*e,s+r,o,s+r-l*n,o,s+r-n),t.lineTo(o,s+n),a&&t.bezierCurveTo(o,s+l*n,o+l*e,s,o+e,s),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var s=new e.Rect(n(r?e.util.object.clone(r):{},o));s.visible=s.visible&&s.width>0&&s.height>0,i(s)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.toFixed,s=e.util.projectStrokeOnPoints;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t),i=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-i,this.height=n.height-i,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+i/2,y:n.top-this.strokeWidth/2+i/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?n.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2+i/2,y:n.top+this.height/2+i/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=i(t,"x")||0,n=i(t,"y")||0;return{left:e,top:n,width:(r(t,"x")||0)-e,height:(r(t,"y")||0)-n}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,s=0,a=this.points.length;s<a;s++)t.push(o(this.points[s].x-n,r),",",o(this.points[s].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var o=0;o<n;o++)e=this.points[o],t.lineTo(e.x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,o){if(!i)return r(null);o||(o={});var s=e.parsePointsAttribute(i.getAttribute("points")),a=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new e[t](s,n(a,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.projectStrokeOnPoints;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,o=e.util.object.clone,s=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){delete(e=o(e||{})).path,this.callSuper("initialize",e),this._setPath(t||[],e)},_setPath:function(t,n){this.path=e.util.makePathSimpler(Array.isArray(t)?t:e.util.parsePath(t)),e.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(t){var e,n=0,i=0,r=0,o=0,s=0,a=0,l=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch((e=this.path[u])[0]){case"L":r=e[1],o=e[2],t.lineTo(r+l,o+c);break;case"M":n=r=e[1],i=o=e[2],t.moveTo(r+l,o+c);break;case"C":r=e[5],o=e[6],s=e[3],a=e[4],t.bezierCurveTo(e[1]+l,e[2]+c,s+l,a+c,r+l,o+c);break;case"Q":t.quadraticCurveTo(e[1]+l,e[2]+c,e[3]+l,e[4]+c),r=e[3],o=e[4],s=e[1],a=e[2];break;case"z":case"Z":r=n,o=i,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',e.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,t)+", "+s(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,o=[],s=[],a=0,l=0,c=0,u=0,h=0,d=this.path.length;h<d;++h){switch((t=this.path[h])[0]){case"L":c=t[1],u=t[2],r=[];break;case"M":a=c=t[1],l=u=t[2],r=[];break;case"C":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],u=t[6];break;case"Q":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],u=t[4];break;case"z":case"Z":c=a,u=l}r.forEach((function(t){o.push(t.x),s.push(t.y)})),o.push(c),s.push(u)}var f=n(o)||0,p=n(s)||0;return{left:f,top:p,width:(i(o)||0)-f,height:(i(s)||0)-p}}}),e.Path.fromObject=function(t,n){if("string"===typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,(function(i){var r=i[0];r.setOptions(t),t.clipPath?e.util.enlivenObjects([t.clipPath],(function(t){r.clipPath=t[0],n&&n(r)})):n&&n(r)}))}else e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,n(new e.Path(o.d,r(o,i)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(true)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,i=t.top;t.set({left:n-e.x,top:i-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(n&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,n);if("canvas"===t)for(;i--;)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i}))}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=n,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(n){e.util.addTransformToObject(n,t),delete n.group,n.setCoords()})),this},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,n.add(t)})),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(t){t.setCoords(true)})),this},_calcBounds:function(t){for(var e,n,i,r,o=[],s=[],a=["tr","br","bl","tl"],l=0,c=this._objects.length,u=a.length;l<c;++l){for(i=(e=this._objects[l]).calcACoords(),r=0;r<u;r++)n=a[r],o.push(i[n].x),s.push(i[n].y);e.aCoords=i}this._getBounds(o,s,t)},_getBounds:function(t,r,o){var s=new e.Point(n(t),n(r)),a=new e.Point(i(t),i(r)),l=s.y||0,c=s.x||0,u=a.x-s.x||0,h=a.y-s.y||0;this.width=u,this.height=h,o||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var i=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!==typeof i?e.util.enlivenObjects(i,(function(i){e.util.enlivenObjectEnlivables(t,r,(function(){n&&n(new e.Group(i,r,!0))}))})):e.loadSVGFromURL(i,(function(o){var s=e.util.groupSVGElements(o,t,i),a=r.clipPath;delete r.clipPath,s.set(r),a?e.util.enlivenObjects([a],(function(t){s.clipPath=t[0],n&&n(s)})):n&&n(s)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach((function(t){t.canvas.remove(t),t.group=i})),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),"undefined"===typeof(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,(function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))}))})}(e),function(t){"use strict";var e=r.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?r.warn("fabric.Image is already defined."):(r.Image=r.util.createClass(r.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:r.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+r.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=r.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},toObject:function(t){var n=[];this.filters.forEach((function(t){t&&n.push(t.toObject())}));var i=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=this._element,o=-this.width/2,s=-this.height/2,a="",l="";if(!i)return[];if(this.hasCrop()){var c=r.Object.__uid++;e.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+o+'" y="'+s+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',s-this.cropY,'" width="',i.width||i.naturalWidth,'" height="',i.height||i.height,l,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,t=["\t<rect ",'x="',o,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return e="fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return r.util.loadImage(t,(function(t,i){this.setElement(t,n),this._setWidthHeight(),e&&e(this,i)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,o=n.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&o>e)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=o);r.filterBackend||(r.filterBackend=r.initFilterBackend());var a=r.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=s.width,u=s.height;a.width=c,a.height=u,this._element=a,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=o,r.filterBackend.applyFilters([t],s,c,u,this._element,l),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var o=r.util.createCanvasElement();o.width=n,o.height=i,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return r.filterBackend||(r.filterBackend=r.initFilterBackend()),r.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){r.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){r.util.setImageSmoothing(t,this.imageSmoothing),r.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,o=this.height,s=Math.min,a=Math.max,l=a(this.cropX,0),c=a(this.cropY,0),u=e.naturalWidth||e.width,h=e.naturalHeight||e.height,d=l*n,f=c*i,p=s(r*n,u-d),g=s(o*i,h-f),m=-r/2,v=-o/2,y=s(r,u/n-l),b=s(o,h/i-c);e&&t.drawImage(e,d,f,p,g,m,v,y,b)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(r.util.getById(t),e),r.util.addClass(this.getElement(),r.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=r.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,o=1,s=1,a=0,l=0,c=0,u=0,h=this.width,d=this.height,f={width:h,height:d};return!e||"none"===e.alignX&&"none"===e.alignY?(o=h/n,s=d/i):("meet"===e.meetOrSlice&&(t=(h-n*(o=s=r.util.findScaleToFit(this._element,f)))/2,"Min"===e.alignX&&(a=-t),"Max"===e.alignX&&(a=t),t=(d-i*s)/2,"Min"===e.alignY&&(l=-t),"Max"===e.alignY&&(l=t)),"slice"===e.meetOrSlice&&(t=n-h/(o=s=r.util.findScaleToCover(this._element,f)),"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=i-d/s,"Mid"===e.alignY&&(u=t/2),"Max"===e.alignY&&(u=t),n=h/o,i=d/s)),{width:n,height:i,scaleX:o,scaleY:s,offsetLeft:a,offsetTop:l,cropX:c,cropY:u}}}),r.Image.CSS_CANVAS="canvas-img",r.Image.prototype.getSvgSrc=r.Image.prototype.getSrc,r.Image.fromObject=function(t,e){var n=r.util.object.clone(t);r.util.loadImage(n.src,(function(t,i){i?e&&e(null,!0):r.Image.prototype._initFilters.call(n,n.filters,(function(i){n.filters=i||[],r.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(i){n.resizeFilter=i[0],r.util.enlivenObjectEnlivables(n,n,(function(){var i=new r.Image(t,n);e(i,!1)}))}))}))}),null,n.crossOrigin)},r.Image.fromURL=function(t,e,n){r.util.loadImage(t,(function(t,i){e&&e(new r.Image(t,n),i)}),null,n&&n.crossOrigin)},r.Image.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),r.Image.fromElement=function(t,n,i){var o=r.parseAttributes(t,r.Image.ATTRIBUTE_NAMES);r.Image.fromURL(o["xlink:href"],n,e(i?r.util.object.clone(i):{},o))})}(e),r.util.object.extend(r.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,o=this;return r.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){o.rotate(t),i()},onComplete:function(){o.setCoords(),n()}})}}),r.util.object.extend(r.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.isWebglSupported=function(e){if(r.isLikelyNode)return!1;e=e||r.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),o=!1;if(i){r.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),o=r.maxTextureSize>=e;for(var s=["highp","mediump","lowp"],a=0;a<3;a++)if(t(i,s[a])){r.webGlPrecision=s[a];break}}return this.isSupported=o,o},r.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(p){n=!1}var o="undefined"!==typeof ArrayBuffer,l="undefined"!==typeof Uint8ClampedArray;if(i&&n&&o&&l){var c=r.util.createCanvasElement(),u=new ArrayBuffer(t*e*4);if(r.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=a);var h,d,f={imageBuffer:u,destinationWidth:t,destinationHeight:e,targetCanvas:c};c.width=t,c.height=e,h=window.performance.now(),s.call(f,this.gl,f),d=window.performance.now()-h,h=window.performance.now(),a.call(f,this.gl,f),d>window.performance.now()-h?(this.imageBuffer=u,this.copyGLTo2D=a):this.copyGLTo2D=s}},createWebGLCanvas:function(t,e){var n=r.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",i);o||(o=n.getContext("experimental-webgl",i)),o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)},applyFilters:function(t,e,n,i,r,o){var s,a=this.gl;o&&(s=this.getCachedTexture(o,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,n,i,!s&&e),targetTexture:this.createTexture(a,n,i),originalTexture:s||this.createTexture(a,n,i,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),t.forEach((function(t){t&&t.applyTo(l)})),function(t){var e=t.targetCanvas,n=e.width,i=e.height,r=t.destinationWidth,o=t.destinationHeight;n===r&&i===o||(e.width=r,e.height=o)}(l),this.copyGLTo2D(a,l),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(l.sourceTexture),a.deleteTexture(l.targetTexture),a.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i,r){var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),o},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}r.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var o=r.getContext("2d");o.drawImage(e,0,0,n,i);var s={sourceWidth:n,sourceHeight:i,imageData:o.getImageData(0,0,n,i),originalEl:e,originalImageData:o.getImageData(0,0,n,i),canvasEl:r,ctx:o,filterBackend:this};return t.forEach((function(t){t.applyTo(s)})),s.imageData.width===n&&s.imageData.height===i||(r.width=s.imageData.width,r.height=s.imageData.height),o.putImageData(s.imageData,0,0),s}}}(),r.Image=r.Image||{},r.Image.filters=r.Image.filters||{},r.Image.filters.BaseFilter=r.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==r.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+r.webGlPrecision+" float"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(i));var o=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(o));var s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,o),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(s));var a=this.getAttributeLocations(t,s),l=this.getUniformLocations(t,s)||{};return l.uStepW=t.getUniformLocation(s,"uStepW"),l.uStepH=t.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:a,uniformLocations:l}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=r.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),r.Image.filters.BaseFilter.fromObject=function(t,e){var n=new r.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,o,s=t.imageData.data,a=s.length,l=this.matrix,c=this.colorsOnly;for(o=0;o<a;o+=4)e=s[o],n=s[o+1],i=s[o+2],c?(s[o]=e*l[0]+n*l[1]+i*l[2]+255*l[4],s[o+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],s[o+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(r=s[o+3],s[o]=e*l[0]+n*l[1]+i*l[2]+r*l[3]+255*l[4],s[o+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],s[o+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],s[o+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Brightness=i(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(e=0;e<i;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,o,s,a,l,c,u,h,d,f,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),b=p.width,_=p.height,w=t.ctx.createImageData(b,_),x=w.data,C=this.opaque?1:0;for(h=0;h<_;h++)for(u=0;u<b;u++){for(o=4*(h*b+u),e=0,n=0,i=0,r=0,f=0;f<v;f++)for(d=0;d<v;d++)s=u+d-y,(a=h+f-y)<0||a>=_||s<0||s>=b||(l=4*(a*b+s),c=m[f*v+d],e+=g[l]*c,n+=g[l+1]*c,i+=g[l+2]*c,C||(r+=g[l+3]*c));x[o]=e,x[o+1]=n,x[o+2]=i,x[o+3]=C?g[o+3]:r}t.imageData=w},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Grayscale=i(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,i=t.imageData.data,r=i.length,o=this.mode;for(e=0;e<r;e+=4)"average"===o?n=(i[e]+i[e+1]+i[e+2])/3:"lightness"===o?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:"luminosity"===o&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Invert=i(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i=t.imageData.data,r=i.length,o=this.noise;for(e=0,r=i.length;e<r;e+=4)n=(.5-Math.random())*o,i[e]+=n,i[e+1]+=n,i[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Pixelate=i(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,i,r,o,s,a,l,c,u,h,d=t.imageData,f=d.data,p=d.height,g=d.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(r=f[e=4*n*g+4*i],o=f[e+1],s=f[e+2],a=f[e+3],u=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,g),l=n;l<u;l++)for(c=i;c<h;c++)f[e=4*l*g+4*c]=r,f[e+1]=o,f[e+2]=s,f[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,o,s=t.imageData.data,a=255*this.distance,l=new e.Color(this.color).getSource(),c=[l[0]-a,l[1]-a,l[2]-a],u=[l[0]+a,l[1]+a,l[2]+a];for(n=0;n<s.length;n+=4)i=s[n],r=s[n+1],o=s[n+2],i>c[0]&&r>c[1]&&o>c[2]&&i<u[0]&&r<u[1]&&o<u[2]&&(s[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],s=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,o),t.uniform4fv(n.uHigh,s)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)n[o]=i(n.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendColor=i(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,i,r,o,s,a,l,c=t.imageData.data,u=c.length,h=1-this.alpha;n=(l=new e.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<u;d+=4)switch(o=c[d],s=c[d+1],a=c[d+2],this.mode){case"multiply":c[d]=o*n/255,c[d+1]=s*i/255,c[d+2]=a*r/255;break;case"screen":c[d]=255-(255-o)*(255-n)/255,c[d+1]=255-(255-s)*(255-i)/255,c[d+2]=255-(255-a)*(255-r)/255;break;case"add":c[d]=o+n,c[d+1]=s+i,c[d+2]=a+r;break;case"diff":case"difference":c[d]=Math.abs(o-n),c[d+1]=Math.abs(s-i),c[d+2]=Math.abs(a-r);break;case"subtract":c[d]=o-n,c[d+1]=s-i,c[d+2]=a-r;break;case"darken":c[d]=Math.min(o,n),c[d+1]=Math.min(s,i),c[d+2]=Math.min(a,r);break;case"lighten":c[d]=Math.max(o,n),c[d+1]=Math.max(s,i),c[d+2]=Math.max(a,r);break;case"overlay":c[d]=n<128?2*o*n/255:255-2*(255-o)*(255-n)/255,c[d+1]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c[d+2]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255;break;case"exclusion":c[d]=n+o-2*n*o/255,c[d+1]=i+s-2*i*s/255,c[d+2]=r+a-2*r*a/255;break;case"tint":c[d]=n+o*h,c[d+1]=i+s*h,c[d+2]=r+a*h}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendImage=i(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var n,i,r,o,s,a,l,c,u,h,d,f=t.imageData,p=t.filterBackend.resources,g=f.data,m=g.length,v=f.width,y=f.height,b=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),h=(u=p.blendImage).getContext("2d"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),d=h.getImageData(0,0,v,y).data;for(var _=0;_<m;_+=4)switch(s=g[_],a=g[_+1],l=g[_+2],c=g[_+3],n=d[_],i=d[_+1],r=d[_+2],o=d[_+3],this.mode){case"multiply":g[_]=s*n/255,g[_+1]=a*i/255,g[_+2]=l*r/255,g[_+3]=c*o/255;break;case"mask":g[_+3]=o}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(i){var r=e.util.object.clone(t);r.image=i,n(new e.Image.filters.BlendImage(r))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.round,a=Math.sin,l=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach((function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var n=(e*=Math.PI)/t;return a(e)/e*a(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,o=e.width,a=e.height,l=s(o*n),c=s(a*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,o,a,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,o,a,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,o,a,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,o,a,l,c)),t.imageData=r},sliceByTwo:function(t,n,r,o,s){var a,l,c=t.imageData,u=.5,h=!1,d=!1,f=n*u,p=r*u,g=e.filterBackend.resources,m=0,v=0,y=n,b=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((a=g.sliceByTwo).width<1.5*n||a.height<r)&&(a.width=1.5*n,a.height=r),(l=a.getContext("2d")).clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),o=i(o),s=i(s);!h||!d;)n=f,r=p,o<i(f*u)?f=i(f*u):(f=o,h=!0),s<i(p*u)?p=i(p*u):(p=s,d=!0),l.drawImage(a,m,v,n,r,y,b,f,p),m=y,v=b,b+=p;return l.getImageData(m,v,o,s)},lanczosResize:function(t,e,s,a,c){var u=t.imageData.data,h=t.ctx.createImageData(a,c),d=h.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),b=l(g*this.lanczosLobes/2),_={},w={},x={};return function t(l){var C,S,T,E,k,O,A,I,D,P,L;for(w.x=(l+.5)*p,x.x=i(w.x),C=0;C<c;C++){for(w.y=(C+.5)*g,x.y=i(w.y),k=0,O=0,A=0,I=0,D=0,S=x.x-y;S<=x.x+y;S++)if(!(S<0||S>=e)){P=i(1e3*o(S-w.x)),_[P]||(_[P]={});for(var M=x.y-b;M<=x.y+b;M++)M<0||M>=s||(L=i(1e3*o(M-w.y)),_[P][L]||(_[P][L]=f(r(n(P*m,2)+n(L*v,2))/1e3)),(T=_[P][L])>0&&(k+=T,O+=T*u[E=4*(M*e+S)],A+=T*u[E+1],I+=T*u[E+2],D+=T*u[E+3]))}d[E=4*(C*a+l)]=O/k,d[E+1]=A/k,d[E+2]=I/k,d[E+3]=D/k}return++l<a?t(l):h}(0)},bilinearFiltering:function(t,e,n,r,o){var s,a,l,c,u,h,d,f,p,g=0,m=this.rcpScaleX,v=this.rcpScaleY,y=4*(e-1),b=t.imageData.data,_=t.ctx.createImageData(r,o),w=_.data;for(l=0;l<o;l++)for(c=0;c<r;c++)for(u=m*c-(s=i(m*c)),h=v*l-(a=i(v*l)),p=4*(a*e+s),d=0;d<4;d++)f=b[p+d]*(1-u)*(1-h)+b[p+4+d]*u*(1-h)+b[p+y+d]*h*(1-u)+b[p+y+4+d]*u*h,w[g++]=f;return _},hermiteFastResize:function(t,e,n,s,a){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),d=l(u/2),f=t.imageData.data,p=t.ctx.createImageData(s,a),g=p.data,m=0;m<a;m++)for(var v=0;v<s;v++){for(var y=4*(v+m*s),b=0,_=0,w=0,x=0,C=0,S=0,T=0,E=(m+.5)*u,k=i(m*u);k<(m+1)*u;k++)for(var O=o(E-(k+.5))/d,A=(v+.5)*c,I=O*O,D=i(v*c);D<(v+1)*c;D++){var P=o(A-(D+.5))/h,L=r(I+P*P);L>1&&L<-1||(b=2*L*L*L-3*L*L+1)>0&&(T+=b*f[(P=4*(D+k*e))+3],w+=b,f[P+3]<255&&(b=b*f[P+3]/250),x+=b*f[P],C+=b*f[P+1],S+=b*f[P+2],_+=b)}g[y]=x/_,g[y+1]=C/_,g[y+2]=S/_,g[y+3]=T/w}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Contrast=i(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData.data,i=n.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<i;e+=4)n[e]=o*(n[e]-128)+128,n[e+1]=o*(n[e+1]-128)+128,n[e+2]=o*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Saturation=i(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData.data,r=i.length,o=-this.saturation;for(e=0;e<r;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*o:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*o:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Vibrance=i(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,n,i,r,o=t.imageData.data,s=o.length,a=-this.vibrance;for(e=0;e<s;e+=4)n=Math.max(o[e],o[e+1],o[e+2]),i=(o[e]+o[e+1]+o[e+2])/3,r=2*Math.abs(n-i)/255*a,o[e]+=n!==o[e]?(n-o[e])*r:0,o[e+1]+=n!==o[e+1]?(n-o[e+1])*r:0,o[e+2]+=n!==o[e+2]?(n-o[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Blur=i(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,o=t.imageData.width,s=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===o&&n.height===s||(i.width=n.width=o,i.height=n.height=s);var a,l,c,u,h=n.getContext("2d"),d=i.getContext("2d"),f=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),d.clearRect(0,0,o,s),u=-15;u<=f;u++)c=p*(l=u/f)*o+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,c,a),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(u=-15;u<=f;u++)c=p*(l=u/f)*s+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,a,c),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var g=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Gamma=i(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData.data,i=this.gamma,r=n.length,o=1/i[0],s=1/i[1],a=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Composed=i(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,n){var i=(t.subFilters||[]).map((function(t){return new e.Image.filters[t.type](t)})),r=new e.Image.filters.Composed({subFilters:i});return n&&n(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=1/3,o=Math.sqrt(r)*i,s=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+s/3,this.matrix[1]=r*s-o,this.matrix[2]=r*s+o,this.matrix[5]=r*s+o,this.matrix[6]=n+r*s,this.matrix[7]=r*s-o,this.matrix[10]=r*s-o,this.matrix[11]=r*s+o,this.matrix[12]=n+r*s},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var i="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(i),cacheProperties:e.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,i,r,o,s,a=0,l=this._textLines.length;a<l;a++)if(("justify"===this.textAlign||a!==l-1&&!this.isEndOfWrapping(a))&&(i=0,r=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){n=s.length,t=(this.width-e)/n;for(var c=0,u=r.length;c<=u;c++)o=this.__charBounds[a][c],this._reSpaceAndTab.test(r[c])?(o.width+=t,o.kernedWidth+=t,o.left+=i,i+=t):o.left+=i}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,o){this._renderChars(t,e,n,i,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,i,r,o,s,a,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,d=0,f=this.path,p=0,g=this._textLines.length;p<g;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){i=this._textLines[p],n=this._getLineLeftOffset(p),d=0,h=0,r=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=i.length;m<v;m++)o=this.__charBounds[p][m],s=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),f?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=s,s&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):s!==r?(a=c+n+h,"rtl"===this.direction&&(a=this.width-a-d),t.fillStyle=r,r&&t.fillRect(a,u,d,e/this.lineHeight),h=o.left,d=o.width,r=s):d+=o.kernedWidth;s&&!f&&(a=c+n+h,"rtl"===this.direction&&(a=this.width-a-d),t.fillStyle=s,t.fillRect(a,u,d,e/this.lineHeight)),u+=e}else u+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,n,i){var r,o,s,a,l=this.getFontCache(e),c=n+t,u=this._getFontDeclaration(e)===this._getFontDeclaration(i),h=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(s=l[n]),void 0!==l[t]&&(a=r=l[t]),u&&void 0!==l[c]&&(a=(o=l[c])-s),void 0===r||void 0===s||void 0===o){var d=this.getMeasuringContext();this._setTextStyles(d,e,!0)}return void 0===r&&(a=r=d.measureText(t).width,l[t]=r),void 0===s&&u&&n&&(s=d.measureText(n).width,l[n]=s),u&&void 0===o&&(o=d.measureText(c).width,l[c]=o,a=o-s),{width:r*h,kernedWidth:a*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var n,i,r,o,s,a,l=0,c=this._textLines[t],u=new Array(c.length),h=0,d=this.path,f="right"===this.pathSide;for(this.__charBounds[t]=u,n=0;n<c.length;n++)i=c[n],o=this._getGraphemeBox(i,t,n,r),u[n]=o,l+=o.kernedWidth,r=i;if(u[n]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(a=d.segmentsInfo[d.segmentsInfo.length-1].length,(s=e.util.getPointOnPath(d.path,0,d.segmentsInfo)).x+=d.pathOffset.x,s.y+=d.pathOffset.y,this.textAlign){case"left":h=f?a-l:0;break;case"center":h=(a-l)/2;break;case"right":h=f?0:a-l}for(h+=this.pathStartOffset*(f?-1:1),n=f?c.length-1:0;f?n>=0:n<c.length;f?n--:n++)o=u[n],h>a?h%=a:h<0&&(h+=a),this._setGraphemeOnPath(h,o,s),h+=o.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(t,n,i){var r=t+n.kernedWidth/2,o=this.path,s=e.util.getPointOnPath(o.path,r,o.segmentsInfo);n.renderLeft=s.x-i.x,n.renderTop=s.y-i.y,n.angle=s.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,n,i,r){var o,s=this.getCompleteStyleDeclaration(e,n),a=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,s,i,a),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=o=this._getWidthOfCharSpacing(),c+=o);var h={width:u,left:0,height:s.fontSize,kernedWidth:c,deltaY:s.deltaY};if(n>0&&!r){var d=this.__charBounds[e][n-1];h.left=d.left+d.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),o=0,s=this._textLines.length;o<s;o++){var a=this.getHeightOfLine(o),l=a/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],i+c,r+n+l,o),n+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,n,i,r,o,s){var a,l,c,u,h,d=this.getHeightOfLine(s),f=-1!==this.textAlign.indexOf("justify"),p="",g=0,m=this.path,v=!f&&0===this.charSpacing&&this.isEmptyStyles(s)&&!m,y="ltr"===this.direction,b="ltr"===this.direction?1:-1,_=n.canvas.getAttribute("dir");if(n.save(),_!==this.direction&&(n.canvas.setAttribute("dir",y?"ltr":"rtl"),n.direction=y?"ltr":"rtl",n.textAlign=y?"left":"right"),o-=d*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(t,n,s,0,i.join(""),r,o,d),void n.restore();for(var w=0,x=i.length-1;w<=x;w++)u=w===x||this.charSpacing||m,p+=i[w],c=this.__charBounds[s][w],0===g?(r+=b*(c.kernedWidth-c.width),g+=c.width):g+=c.kernedWidth,f&&!u&&this._reSpaceAndTab.test(i[w])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(s,w),l=this.getCompleteStyleDeclaration(s,w+1),u=e.util.hasStyleChanged(a,l,!1)),u&&(m?(n.save(),n.translate(c.renderLeft,c.renderTop),n.rotate(c.angle),this._renderChar(t,n,s,w,p,-g/2,0,d),n.restore()):(h=r,this._renderChar(t,n,s,w,p,h,o,d)),p="",a=l,r+=b*g,g=0);n.restore()},_applyPatternGradientTransformText:function(t){var n,i=e.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return i.width=r,i.height=o,(n=i.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,o),n.lineTo(0,o),n.closePath(),n.translate(r/2,o/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(i,"no-repeat")},handleFiller:function(t,e,n){var i,r;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,t.translate(i,r),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(t[e]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,n,i,r,o,s){var a,l,c=this._getStyleDeclaration(n,i),u=this.getCompleteStyleDeclaration(n,i),h="fillText"===t&&u.fill,d="strokeText"===t&&u.stroke&&u.strokeWidth;(d||h)&&(e.save(),h&&(a=this._setFillStyles(e,u)),d&&(l=this._setStrokeStyles(e,u)),e.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(s+=c.deltaY),h&&e.fillText(r,o-a.offsetX,s-a.offsetY),d&&e.strokeText(r,o-l.offsetX,s-l.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),s={fontSize:r*n.size,deltaY:o+r*n.baseline};return this.setSelectionStyles(s,t,e),this},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,r=this.direction,o=0,s=this.isEndOfWrapping(t);return"justify"===i||"justify-center"===i&&!s||"justify-right"===i&&!s||"justify-left"===i&&!s?0:("center"===i&&(o=n/2),"right"===i&&(o=n),"justify-center"===i&&(o=n/2),"justify-right"===i&&(o=n),"rtl"===r&&(o-=n),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&"undefined"!==typeof i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,o,s,a,l,c,u,h,d,f,p,g,m,v,y=this._getLeftOffset(),b=this._getTopOffset(),_=this.path,w=this._getWidthOfCharSpacing(),x=this.offsets[e],C=0,S=this._textLines.length;C<S;C++)if(n=this.getHeightOfLine(C),this[e]||this.styleHas(e,C)){l=this._textLines[C],g=n/this.lineHeight,o=this._getLineLeftOffset(C),h=0,d=0,c=this.getValueOfPropertyAt(C,0,e),v=this.getValueOfPropertyAt(C,0,"fill"),u=b+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(C,0),s=this.getValueOfPropertyAt(C,0,"deltaY");for(var T=0,E=l.length;T<E;T++)if(f=this.__charBounds[C][T],p=this.getValueOfPropertyAt(C,T,e),m=this.getValueOfPropertyAt(C,T,"fill"),r=this.getHeightOfChar(C,T),a=this.getValueOfPropertyAt(C,T,"deltaY"),_&&p&&m)t.save(),t.fillStyle=v,t.translate(f.renderLeft,f.renderTop),t.rotate(f.angle),t.fillRect(-f.kernedWidth/2,x*r+a,f.kernedWidth,this.fontSize/15),t.restore();else if((p!==c||m!==v||r!==i||a!==s)&&d>0){var k=y+o+h;"rtl"===this.direction&&(k=this.width-k-d),c&&v&&(t.fillStyle=v,t.fillRect(k,u+x*i+s,d,this.fontSize/15)),h=f.left,d=f.width,c=p,v=m,i=r,s=a}else d+=f.kernedWidth;k=y+o+h;"rtl"===this.direction&&(k=this.width-k-d),t.fillStyle=m,p&&m&&t.fillRect(k,u+x*i+s,d-w,this.fontSize/15),b+=n}else b+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,o=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,s=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?i.fontFamily:'"'+i.fontFamily+'"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",s].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=["\n"],o=[],s=0;s<n.length;s++)i[s]=e.util.string.graphemeSplit(n[s]),o=o.concat(i[s],r);return o.pop(),{_unwrappedLines:i,lines:n,graphemeText:o,graphemeLines:i}},toObject:function(t){var n=i.concat(t),r=this.callSuper("toObject",n);return r.styles=e.util.stylesToArray(this.styles,this.text),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper("set",t,e);var n=!1,i=!1;if("object"===typeof t)for(var r in t)"path"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||"path"===r;else n=-1!==this._dimensionAffectingProps.indexOf(t),i="path"===t;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),s=o.textAnchor||"left";if((r=e.util.object.extend(r?n(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(r.underline=!0),-1!==a.indexOf("overline")&&(r.overline=!0),-1!==a.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new e.Text(l,r),h=u.getScaledHeight()/u.height,d=((u.height+u.strokeWidth)*u.lineHeight-u.height)*h,f=u.getScaledHeight()+d,p=0;"center"===s&&(p=u.getScaledWidth()/2),"right"===s&&(p=u.getScaledWidth()),u.set({left:u.left-p,top:u.top-(f-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),i(u)},e.Text.fromObject=function(t,i){var r=n(t),o=t.path;return delete r.path,e.Object._fromObject("Text",r,(function(n){n.styles=e.util.stylesFromArray(t.styles,t.text),o?e.Object._fromObject("Path",o,(function(t){n.set("path",t),i(n)}),"path"):i(n)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),r.util.object.extend(r.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var n="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if("undefined"!==typeof n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,i=this.styles,r=0,o=!0,s=0;for(var a in i){for(var l in e=0,i[a]){var c;r++,(c=i[a][l]).hasOwnProperty(t)?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete i[a][l]}0===e&&delete i[a]}for(var u=0;u<this._textLines.length;u++)s+=this._textLines[u].length;o&&r===s&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n])delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),r.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(t,e,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)r[n=this._styleProperties[o]]="undefined"===typeof i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}r.IText=r.util.createClass(r.Text,r.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,o=0,s=0,a=this.get2DCursorLocation(t);i=a.charIndex,n=a.lineIndex;for(var l=0;l<n;l++)o+=this.getHeightOfLine(l);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(s=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(s-=this._getWidthOfCharSpacing()),r={top:o,left:e+(s>0?s:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(i,r,"fontSize"),s=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/s,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,l+t.top+c,a,o)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(n),s=this.get2DCursorLocation(i),a=o.lineIndex,l=s.lineIndex,c=o.charIndex<0?0:o.charIndex,u=s.charIndex<0?0:s.charIndex,h=a;h<=l;h++){var d,f=this._getLineLeftOffset(h)||0,p=this.getHeightOfLine(h),g=0,m=0;if(h===a&&(g=this.__charBounds[a][c].left),h>=a&&h<l)m=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}d=p,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(p/=this.lineHeight);var y=t.left+f+g,b=m-g,_=p,w=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",_=1,w=p):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(y=this.width-y-b),e.fillRect(y,t.top+t.topOffset+w,b,_),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),r.IText.fromObject=function(e,n){var i=r.util.stylesFromArray(e.styles,e.text),o=Object.assign({},e,{styles:i});if(t(o),o.styles)for(var s in o.styles)for(var a in o.styles[s])t(o.styles[s][a]);r.Object._fromObject("IText",o,n,"text")}}(),function(){var t=r.util.object.clone;r.util.object.extend(r.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],r.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},searchWordBoundary:function(t,e){for(var n=this._text,i=this._reSpace.test(n[t])?t-1:t,o=n[i],s=r.reNonWord;!s.test(o)&&i>0&&i<n.length;)o=n[i+=e];return s.test(o)&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),o=r.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:o,selectionEnd:o};var s=n.slice(t,e);return{selectionStart:o,selectionEnd:o+r.util.string.graphemeSplit(s).length}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t).join("").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,o=n.charIndex,s=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,a=e.leftOffset,l=this.calcTransformMatrix(),c={x:e.left+a,y:e.top+e.topOffset+s},u=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,d=h.width/u,f=h.height/u,p=d-s,g=f-s,m=h.clientWidth/d,v=h.clientHeight/f;return c=r.util.transformPoint(c,l),(c=r.util.transformPoint(c,this.canvas.viewportTransform)).x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),s=r.lineIndex,a=r.charIndex,l=o.lineIndex,c=o.charIndex;if(s!==l){if(this.styles[s])for(n=a;n<this._unwrappedTextLines[s].length;n++)delete this.styles[s][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][a+n-c]=i);for(n=s+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,s-l)}else if(this.styles[s]){i=this.styles[s];var u,h,d=c-a;for(n=a;n<c;n++)delete i[n];for(h in this.styles[s])(u=parseInt(h,10))>=c&&(i[u-d]=i[h],delete i[h])}},shiftLineStyles:function(e,n){var i=t(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>e&&(this.styles[o+n]=i[o],i[o-n]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,n,i,r){var o,s={},a=!1,l=this._unwrappedTextLines[e].length===n;for(var c in i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&(o=this.styles[e][0===n?n:n-1]),this.styles[e]){var u=parseInt(c,10);u>=n&&(a=!0,s[u-n]=this.styles[e][c],l&&0===n||delete this.styles[e][c])}var h=!1;for(a&&!l&&(this.styles[e+i]=s,h=!0),h&&i--;i>0;)r&&r[i-1]?this.styles[e+i]={0:t(r[i-1])}:o?this.styles[e+i]={0:t(o)}:delete this.styles[e+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(e,n,i,r){this.styles||(this.styles={});var o=this.styles[e],s=o?t(o):{};for(var a in i||(i=1),s){var l=parseInt(a,10);l>=n&&(o[l+i]=s[l],s[l-i]||delete o[l])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+i]=t(r[i]));else if(o)for(var c=o[n?n-1:1];c&&i--;)this.styles[e][n+i]=t(c)},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],o=0,s=0;s<t.length;s++)"\n"===t[s]?r[++o]=0:r[o]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],o);for(s=1;s<o;s++)r[s]>0?this.insertCharStyleObject(i.lineIndex+s,0,r[s],n):n&&this.styles[i.lineIndex+s]&&n[0]&&(this.styles[i.lineIndex+s][0]=n[0]),n=n&&n.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(i.lineIndex+s,0,r[s],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),r.util.object.extend(r.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n=this.getLocalPointer(t),i=0,r=0,o=0,s=0,a=0,l=0,c=this._textLines.length;l<c&&o<=n.y;l++)o+=this.getHeightOfLine(l)*this.scaleY,a=l,l>0&&(s+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(a)*this.scaleX,e=this._textLines[a],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+r);for(var u=0,h=e.length;u<h&&(i=r,(r+=this.__charBounds[a][u].kernedWidth*this.scaleX)<=n.x);u++)s++;return this._getNewSelectionStartFromOffset(n,i,r,s,h)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=t.x-e,s=n-t.x,a=i+(s>o||s<0?0:1);return this.flipX&&(a=r-a),a>this._text.length&&(a=this._text.length),a}}),r.util.object.extend(r.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=r.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):r.document.body.appendChild(this.hiddenTextarea),r.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),r.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),r.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),r.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(r.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,o,s,a,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,h=u-c,d=this.selectionStart,f=this.selectionEnd,p=d!==f;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=d>g.selectionStart;p?(n=this._text.slice(d,f),h+=f-d):u<c&&(n=m?this._text.slice(f+h,f):this._text.slice(d,d-h)),i=l.slice(g.selectionEnd-h,g.selectionEnd),n&&n.length&&(i.length&&(o=this.getSelectionStyles(d,d+1,!1),o=i.map((function(){return o[0]}))),p?(s=d,a=f):m?(s=f-n.length,a=f):(s=f,a=f+n.length),this.removeStyleFromTo(s,a)),i.length&&(e&&i.join("")===r.copiedText&&!r.disableStyleCopyPaste&&(o=r.copiedTextStyle),this.insertNewStyleBlock(i,d,o)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(r.copiedText=this.getSelectedText(),r.disableStyleCopyPaste?r.copiedTextStyle=null:r.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||r.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(i+=(n=this.__charBounds[t][e-1]).left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var o=i.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,s);return this._textLines[r].slice(o).length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var o=i.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,s),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],o=this._getLineLeftOffset(t),s=0,a=0,l=r.length;a<l;a++)if((o+=n=this.__charBounds[t][a].width)>e){i=!0;var c=o-n,u=o,h=Math.abs(c-e);s=Math.abs(u-e)<h?a:a-1;break}return i||(s=r.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if("undefined"!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){"undefined"===typeof i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var o=r.util.string.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[].concat(this._text.slice(0,n),o,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=r.util.toFixed,e=/  +/g;r.util.object.extend(r.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],o=t;this._setSVGBg(r);for(var s=0,a=this._textLines.length;s<a;s++)n=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(r,s,e+n,o),this._setSVGTextLineText(i,s,e+n,o),o+=this.getHeightOfLine(s);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(n,i,o,s){var a=n!==n.trim()||n.match(e),l=this.getSvgSpanStyles(i,a),c=l?'style="'+l+'"':"",u=i.deltaY,h="",d=r.Object.NUM_FRACTION_DIGITS;return u&&(h=' dy="'+t(u,d)+'" '),['<tspan x="',t(o,d),'" y="',t(s,d),'" ',h,c,">",r.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,i){var o,s,a,l,c,u=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf("justify"),d="",f=0,p=this._textLines[e];i+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var g=0,m=p.length-1;g<=m;g++)c=g===m||this.charSpacing,d+=p[g],a=this.__charBounds[e][g],0===f?(n+=a.kernedWidth-a.width,f+=a.width):f+=a.kernedWidth,h&&!c&&this._reSpaceAndTab.test(p[g])&&(c=!0),c||(o=o||this.getCompleteStyleDeclaration(e,g),s=this.getCompleteStyleDeclaration(e,g+1),c=r.util.hasStyleChanged(o,s,!0)),c&&(l=this._getStyleDeclaration(e,g)||{},t.push(this._createTextCharSpan(d,l,n,i)),d="",o=s,n+=f,f=0)},_pushTextBgRect:function(e,n,i,o,s,a){var l=r.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(n),' x="',t(i,l),'" y="',t(o,l),'" width="',t(s,l),'" height="',t(a,l),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,o,s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,d=s.length;h<d;h++)r=this.__charBounds[e][h],(o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(t,u,n+c,i,l,a),c=r.left,l=r.width,u=o):l+=r.kernedWidth;o&&this._pushTextBgRect(t,o,n+c,i,l,a)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new r.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this.getHeightOfLine(i);return e=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return r.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[i]&&o>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(n++,i++),r[o]={line:e,offset:n},i+=t.graphemeLines[o].length,n+=t.graphemeLines[o].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,i=0,r=!1,o=this._styleMap[t],s=this._styleMap[t+1];for(var a in o&&(t=o.line,i=o.offset),s&&(r=s.line===t,e=s.offset),n="undefined"===typeof t?this.styles:{line:this.styles[t]})for(var l in n[a])if(l>=i&&(!r||l<e))for(var c in n[a][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0;n=n||0;for(var o=0,s=t.length;o<s;o++){r+=this._getGraphemeBox(t[o],e,o+n,i,true).kernedWidth,i=t[o]}return r},_wrapLine:function(t,n,i,r){var o=0,s=this.splitByGrapheme,a=[],l=[],c=s?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",h=0,d=s?"":" ",f=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=s?c[y]:e.util.string.graphemeSplit(c[y]),f=this._measureWord(u,n,h),h+=u.length,(o+=p+f-v)>i&&!m?(a.push(l),l=[],o=f,m=!0):o+=v,m||s||l.push(d),l=l.concat(u),p=s?0:this._measureWord([d],n,h),h++,m=!1,f>g&&(g=f);return y&&a.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i[o].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){var i=e.util.stylesFromArray(t.styles,t.text),r=Object.assign({},t,{styles:i});return e.Object._fromObject("Textbox",r,n,"text")}}(e),function(){var t=r.controlsUtils,e=t.scaleSkewCursorStyleHandler,n=t.scaleCursorStyleHandler,i=t.scalingEqually,o=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,a=t.scaleOrSkewActionName,l=r.Object.prototype.controls;if(l.ml=new r.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:a}),l.mr=new r.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:a}),l.mb=new r.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:o,getActionName:a}),l.mt=new r.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:o,getActionName:a}),l.tl=new r.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.tr=new r.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.bl=new r.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.br=new r.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.mtr=new r.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),r.Textbox){var c=r.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new r.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),c.ml=new r.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()},144:(t,e,n)=>{"use strict";var i=n(60),r=n(724);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=M&&t[M]||t["@@iterator"])?t:null}var F,j=Object.assign;function N(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var B=!1;function U(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?N(t):""}function V(t){switch(t.tag){case 5:return N(t.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return t=U(t.type,!1);case 11:return t=U(t.type.render,!1);case 1:return t=U(t.type,!0);default:return""}}function z(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case C:return"Fragment";case x:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case k:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(e=t.displayName||null)?e:z(t.type)||"Memo";case P:e=t._payload,t=t._init;try{return z(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=G(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return j({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Q(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){$(t,e);var n=W(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return j({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),i=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,Ct=null,St=null;function Tt(t){if(t=br(t)){if("function"!==typeof xt)throw Error(o(280));var e=t.stateNode;e&&(e=wr(e),xt(t.stateNode,t.type,e))}}function Et(t){Ct?St?St.push(t):St=[t]:Ct=t}function kt(){if(Ct){var t=Ct,e=St;if(St=Ct=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Ot(t,e){return t(e)}function At(){}var It=!1;function Dt(t,e,n){if(It)return t(e,n);It=!0;try{return Ot(t,e,n)}finally{It=!1,(null!==Ct||null!==St)&&(At(),kt())}}function Pt(t,e){var n=t.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(u)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(ut){Lt=!1}function Rt(t,e,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ft=!1,jt=null,Nt=!1,Bt=null,Ut={onError:function(t){Ft=!0,jt=t}};function Vt(t,e,n,i,r,o,s,a,l){Ft=!1,jt=null,Rt.apply(Ut,arguments)}function zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(zt(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=zt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Wt(r),t;if(s===i)return Wt(r),e;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=r.unstable_scheduleCallback,Yt=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Qt=r.unstable_requestPaint,$t=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=he(a):0!==(o&=s)&&(i=he(o))}else 0!==(s=n&~r)?i=he(s):0!==o&&(i=he(o));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(o=e&-e)||16===r&&0!==(4194240&o)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-se(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-se(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,xe,Ce,Se,Te,Ee=!1,ke=[],Oe=null,Ae=null,Ie=null,De=new Map,Pe=new Map,Le=[],Me="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":De.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function Fe(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function je(t){var e=yr(t.target);if(null!==e){var n=zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Te(t.priority,(function(){Ce(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ne(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);_t=i,n.target.dispatchEvent(i),_t=null,e.shift()}return!0}function Be(t,e,n){Ne(t)&&n.delete(e)}function Ue(){Ee=!1,null!==Oe&&Ne(Oe)&&(Oe=null),null!==Ae&&Ne(Ae)&&(Ae=null),null!==Ie&&Ne(Ie)&&(Ie=null),De.forEach(Be),Pe.forEach(Be)}function Ve(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ue)))}function ze(t){function e(e){return Ve(e,t)}if(0<ke.length){Ve(ke[0],t);for(var n=1;n<ke.length;n++){var i=ke[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Oe&&Ve(Oe,t),null!==Ae&&Ve(Ae,t),null!==Ie&&Ve(Ie,t),De.forEach(e),Pe.forEach(e),n=0;n<Le.length;n++)(i=Le[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)je(n),null===n.blockedOn&&Le.shift()}var He=_.ReactCurrentBatchConfig,We=!0;function Ge(t,e,n,i){var r=be,o=He.transition;He.transition=null;try{be=1,Xe(t,e,n,i)}finally{be=r,He.transition=o}}function qe(t,e,n,i){var r=be,o=He.transition;He.transition=null;try{be=4,Xe(t,e,n,i)}finally{be=r,He.transition=o}}function Xe(t,e,n,i){if(We){var r=Ke(t,e,n,i);if(null===r)Wi(t,e,i,Ye,n),Re(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Oe=Fe(Oe,t,e,n,i,r),!0;case"dragenter":return Ae=Fe(Ae,t,e,n,i,r),!0;case"mouseover":return Ie=Fe(Ie,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return De.set(o,Fe(De.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Pe.set(o,Fe(Pe.get(o)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Re(t,i),4&e&&-1<Me.indexOf(t)){for(;null!==r;){var o=br(r);if(null!==o&&we(o),null===(o=Ke(t,e,n,i))&&Wi(t,e,i,Ye,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Wi(t,e,i,null,n)}}var Ye=null;function Ke(t,e,n,i){if(Ye=null,null!==(t=yr(t=wt(i))))if(null===(e=zt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,i=n.length,r="value"in $e?$e.value:$e.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,i,r,o){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=j({},cn,{view:0,detail:0}),dn=on(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),gn=on(j({},fn,{dataTransfer:0})),mn=on(j({},hn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(yn),_n=on(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Cn[t])&&!!e[t]}function Tn(){return Sn}var En=j({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),kn=on(En),On=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),In=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Dn),Ln=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Rn,jn=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Nn=String.fromCharCode(32),Bn=!1;function Un(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Gn(t,e,n,i){Et(i),0<(e=qi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Yn(t){Ni(t,0)}function Kn(t){if(X(_r(t)))return t}function Qn(t,e){if("change"===t)return e}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(t){if("value"===t.propertyName&&Kn(Xn)){var e=[];Gn(e,Xn,t,wt(t)),Dt(Yn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Xn=n,(qn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Xn)}function oi(t,e){if("click"===t)return Kn(e)}function si(t,e){if("input"===t||"change"===t)return Kn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Ci={},Si={};function Ti(t){if(Ci[t])return Ci[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Si)return Ci[t]=n[e];return t}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ei=Ti("animationend"),ki=Ti("animationiteration"),Oi=Ti("animationstart"),Ai=Ti("transitionend"),Ii=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(t,e){Ii.set(t,e),l(e,[t])}for(var Li=0;Li<Di.length;Li++){var Mi=Di[Li];Pi(Mi.toLowerCase(),"on"+(Mi[0].toUpperCase()+Mi.slice(1)))}Pi(Ei,"onAnimationEnd"),Pi(ki,"onAnimationIteration"),Pi(Oi,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function ji(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,s,a,l,c){if(Vt.apply(this,arguments),Ft){if(!Ft)throw Error(o(198));var u=jt;Ft=!1,jt=null,Nt||(Nt=!0,Bt=u)}}(i,e,void 0,t),t.currentTarget=null}function Ni(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break t;ji(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break t;ji(r,a,c),o=l}}}if(Nt)throw t=Bt,Nt=!1,Bt=null,t}function Bi(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Hi(e,t,2,!1),n.add(i))}function Ui(t,e,n){var i=0;e&&(i|=4),Hi(n,t,i,e)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[Vi]){t[Vi]=!0,s.forEach((function(e){"selectionchange"!==e&&(Fi.has(e)||Ui(e,!1,t),Ui(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Vi]||(e[Vi]=!0,Ui("selectionchange",!1,e))}}function Hi(t,e,n,i){switch(Qe(e)){case 1:var r=Ge;break;case 4:r=qe;break;default:r=Xe}n=r.bind(null,e,n,t),r=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Wi(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=yr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue t}a=a.parentNode}}i=i.return}Dt((function(){var i=o,r=wt(n),s=[];t:{var a=Ii.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ei:case ki:case Oi:l=vn;break;case Ai:l=In;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pt(p,d))&&u.push(Gi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=On,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_r(l),f=null==c?a:_r(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Xi(f))p++;for(f=0,g=d;g;g=Xi(g))f++;for(;0<p-f;)u=Xi(u),p--;for(;0<f-p;)d=Xi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Xi(u),d=Xi(d)}u=null}else u=null;null!==l&&Yi(s,a,l,u,!1),null!==c&&null!==h&&Yi(s,h,c,u,!0)}if("select"===(l=(a=i?_r(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Wn(a))if($n)m=si;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=oi);switch(m&&(m=m(t,i))?Gn(s,m,n,r):(v&&v(t,a,i),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&tt(a,"number",a.value)),v=i?_r(i):window,t){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(s,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(s,n,r)}var y;if(Mn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else zn?Un(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=tn()):(Je="value"in($e=r)?$e.value:$e.textContent,zn=!0)),0<(v=qi(i,b)).length&&(b=new _n(b,t,null,n,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Fn?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(Bn=!0,Nn);case"textInput":return(t=e.data)===Nn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(zn)return"compositionend"===t||!Mn&&Un(t,e)?(t=tn(),Ze=Je=$e=null,zn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Ni(s,e)}))}function Gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Pt(t,n))&&i.unshift(Gi(t,o,r)),null!=(o=Pt(t,e))&&i.push(Gi(t,o,r))),t=t.return}return i}function Xi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yi(t,e,n,i,r){for(var o=e._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Pt(n,o))&&s.unshift(Gi(n,l,a)):r||null!=(l=Pt(n,o))&&s.push(Gi(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var Ki=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Ki,"\n").replace(Qi,"")}function Ji(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(o(425))}function Zi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(t){return or.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void ze(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);ze(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[dr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wr(t){return t[fr]||null}var xr=[],Cr=-1;function Sr(t){return{current:t}}function Tr(t){0>Cr||(t.current=xr[Cr],xr[Cr]=null,Cr--)}function Er(t,e){Cr++,xr[Cr]=t.current,t.current=e}var kr={},Or=Sr(kr),Ar=Sr(!1),Ir=kr;function Dr(t,e){var n=t.type.contextTypes;if(!n)return kr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Pr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Lr(){Tr(Ar),Tr(Or)}function Mr(t,e,n){if(Or.current!==kr)throw Error(o(168));Er(Or,e),Er(Ar,n)}function Rr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(o(108,H(t)||"Unknown",r));return j({},n,i)}function Fr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,Ir=Or.current,Er(Or,t),Er(Ar,Ar.current),!0}function jr(t,e,n){var i=t.stateNode;if(!i)throw Error(o(169));n?(t=Rr(t,e,Ir),i.__reactInternalMemoizedMergedChildContext=t,Tr(Ar),Tr(Or),Er(Or,t)):Tr(Ar),Er(Ar,n)}var Nr=null,Br=!1,Ur=!1;function Vr(t){null===Nr?Nr=[t]:Nr.push(t)}function zr(){if(!Ur&&null!==Nr){Ur=!0;var t=0,e=be;try{var n=Nr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Nr=null,Br=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(t+1)),Xt(Zt,zr),r}finally{be=e,Ur=!1}}return null}var Hr=[],Wr=0,Gr=null,qr=0,Xr=[],Yr=0,Kr=null,Qr=1,$r="";function Jr(t,e){Hr[Wr++]=qr,Hr[Wr++]=Gr,Gr=t,qr=e}function Zr(t,e,n){Xr[Yr++]=Qr,Xr[Yr++]=$r,Xr[Yr++]=Kr,Kr=t;var i=Qr;t=$r;var r=32-se(i)-1;i&=~(1<<r),n+=1;var o=32-se(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Qr=1<<32-se(e)+r|n<<r|i,$r=o+t}else Qr=1<<o|n<<r|i,$r=t}function to(t){null!==t.return&&(Jr(t,1),Zr(t,1,0))}function eo(t){for(;t===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,qr=Hr[--Wr],Hr[Wr]=null;for(;t===Kr;)Kr=Xr[--Yr],Xr[Yr]=null,$r=Xr[--Yr],Xr[Yr]=null,Qr=Xr[--Yr],Xr[Yr]=null}var no=null,io=null,ro=!1,oo=null;function so(t,e){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,io=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,io=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Kr?{id:Qr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,io=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(ro){var e=io;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=cr(n.nextSibling);var i=no;e&&ao(t,e)?so(i,n):(t.flags=-4097&t.flags|2,ro=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,ro=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!ro)return uo(t),ro=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=io)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=cr(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){io=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}io=null}}else io=no?cr(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=io;t;)t=cr(t.nextSibling)}function po(){io=no=null,ro=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=_.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){for(var n in e=j({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var yo=Sr(null),bo=null,_o=null,wo=null;function xo(){wo=_o=bo=null}function Co(t){var e=yo.current;Tr(yo),t._currentValue=e}function So(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function To(t,e){bo=t,wo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_a=!0),t.firstContext=null)}function Eo(t){var e=t._currentValue;if(wo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===bo)throw Error(o(308));_o=t,bo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var ko=null;function Oo(t){null===ko?ko=[t]:ko.push(t)}function Ao(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Oo(e)):(n.next=r.next,r.next=n),e.interleaved=n,Io(t,i)}function Io(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Po(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Io(t,n)}return null===(r=i.interleaved)?(e.next=e,Oo(i)):(e.next=r.next,r.next=e),i.interleaved=e,Io(t,n)}function Fo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function jo(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function No(t,e,n,i){var r=t.updateQueue;Do=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=j({},h,d);break t;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{s|=r.lane,r=r.next}while(r!==e)}else null===o&&(r.shared.lanes=0);jl|=s,t.lanes=s,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Uo=(new i.Component).refs;function Vo(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:j({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var zo={isMounted:function(t){return!!(t=t._reactInternals)&&zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Mo(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Ro(t,o,r))&&(ic(e,t,r,i),Fo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Mo(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Ro(t,o,r))&&(ic(e,t,r,i),Fo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),i=nc(t),r=Mo(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Ro(t,r,i))&&(ic(e,t,i,n),Fo(e,t,i))}};function Ho(t,e,n,i,r,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function Wo(t,e,n){var i=!1,r=kr,o=e.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(r=Pr(e)?Ir:Or.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?Dr(t,r):kr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=zo,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Go(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&zo.enqueueReplaceState(e,e.state,null)}function qo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Uo,Po(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=Eo(o):(o=Pr(e)?Ir:Or.current,r.context=Dr(t,o)),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Vo(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&zo.enqueueReplaceState(r,r.state,null),No(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,t));var r=i,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=r.refs;e===Uo&&(e=r.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function Qo(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Mc(t,e)).index=0,t.sibling=null,t}function s(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Nc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var o=n.type;return o===C?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Ko(o)===e.type)?((i=r(e,n.props)).ref=Xo(t,e,n),i.return=t,i):((i=Rc(n.type,n.key,n.props,null,t.mode,i)).ref=Xo(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=Fc(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Nc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Rc(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case x:return(e=Bc(e,t.mode,n)).return=t,e;case P:return d(t,(0,e._init)(e._payload),n)}if(et(e)||R(e))return(e=Fc(e,t.mode,n,null)).return=t,e;Yo(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(t,e,n,i):null;case x:return n.key===r?u(t,e,n,i):null;case P:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||R(n))return null!==r?null:h(t,e,n,i,null);Yo(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case P:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||R(i))return h(e,t=t.get(n)||null,i,r,null);Yo(e,i)}return null}function g(r,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(r,h,a[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(r,h),ro&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return ro&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),ro&&Jr(r,g),c}function m(r,a,l,c){var u=R(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),a=s(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),ro&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return ro&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(r,t)})),ro&&Jr(r,m),u}return function t(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===C){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ko(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=Xo(i,u,s),o.return=i,i=o;break t}n(i,u);break}e(i,u),u=u.sibling}s.type===C?((o=Fc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Rc(s.type,s.key,s.props,null,i.mode,l)).ref=Xo(i,o,s),l.return=i,i=l)}return a(i);case x:t:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break t}n(i,o);break}e(i,o),o=o.sibling}(o=Bc(s,i.mode,l)).return=i,i=o}return a(i);case P:return t(i,o,(u=s._init)(s._payload),l)}if(et(s))return g(i,o,s,l);if(R(s))return m(i,o,s,l);Yo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Nc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var $o=Qo(!0),Jo=Qo(!1),Zo={},ts=Sr(Zo),es=Sr(Zo),ns=Sr(Zo);function is(t){if(t===Zo)throw Error(o(174));return t}function rs(t,e){switch(Er(ns,e),Er(es,t),Er(ts,Zo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Tr(ts),Er(ts,e)}function os(){Tr(ts),Tr(es),Tr(ns)}function ss(t){is(ns.current);var e=is(ts.current),n=lt(e,t.type);e!==n&&(Er(es,t),Er(ts,n))}function as(t){es.current===t&&(Tr(ts),Tr(es))}var ls=Sr(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function hs(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var ds=_.ReactCurrentDispatcher,fs=_.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,ys=!1,bs=!1,_s=0,ws=0;function xs(){throw Error(o(321))}function Cs(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function Ss(t,e,n,i,r,s){if(ps=s,gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ds.current=null===t||null===t.memoizedState?aa:la,t=n(i,r),bs){s=0;do{if(bs=!1,_s=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,e.updateQueue=null,ds.current=ca,t=n(i,r)}while(bs)}if(ds.current=sa,e=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,ys=!1,e)throw Error(o(300));return t}function Ts(){var t=0!==_s;return _s=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=t:vs=vs.next=t,vs}function ks(){if(null===ms){var t=gs.alternate;t=null!==t?t.memoizedState:null}else t=ms.next;var e=null===vs?gs.memoizedState:vs.next;if(null!==e)vs=e,ms=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ms=t).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=t:vs=vs.next=t}return vs}function Os(t,e){return"function"===typeof e?e(t):e}function As(t){var e=ks(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=ms,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,gs.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,ai(i,e.memoizedState)||(_a=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{s=r.lane,gs.lanes|=s,jl|=s,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Is(t){var e=ks(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=t(s,a.action),a=a.next}while(a!==r);ai(s,e.memoizedState)||(_a=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ds(){}function Ps(t,e){var n=gs,i=ks(),r=e(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,_a=!0),i=i.queue,Ws(Rs.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Bs(9,Ms.bind(null,n,i,r,e),void 0,null),null===Il)throw Error(o(349));0!==(30&ps)||Ls(n,e,r)}return r}function Ls(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ms(t,e,n,i){e.value=n,e.getSnapshot=i,Fs(e)&&js(t)}function Rs(t,e,n){return n((function(){Fs(e)&&js(t)}))}function Fs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function js(t){var e=Io(t,1);null!==e&&ic(e,t,1,-1)}function Ns(t){var e=Es();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,gs,t),[e.memoizedState,t]}function Bs(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Us(){return ks().memoizedState}function Vs(t,e,n,i){var r=Es();gs.flags|=t,r.memoizedState=Bs(1|e,n,void 0,void 0===i?null:i)}function zs(t,e,n,i){var r=ks();i=void 0===i?null:i;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==i&&Cs(i,s.deps))return void(r.memoizedState=Bs(e,n,o,i))}gs.flags|=t,r.memoizedState=Bs(1|e,n,o,i)}function Hs(t,e){return Vs(8390656,8,t,e)}function Ws(t,e){return zs(2048,8,t,e)}function Gs(t,e){return zs(4,2,t,e)}function qs(t,e){return zs(4,4,t,e)}function Xs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ys(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,zs(4,4,Xs.bind(null,e,t),n)}function Ks(){}function Qs(t,e){var n=ks();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Cs(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $s(t,e){var n=ks();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Cs(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Js(t,e,n){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,_a=!0),t.memoizedState=n):(ai(n,e)||(n=ge(),gs.lanes|=n,jl|=n,t.baseState=!0),e)}function Zs(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=fs.transition;fs.transition={};try{t(!1),e()}finally{be=n,fs.transition=i}}function ta(){return ks().memoizedState}function ea(t,e,n){var i=nc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(t))ra(e,n);else if(null!==(n=Ao(t,e,n,i))){ic(n,t,i,ec()),oa(n,e,i)}}function na(t,e,n){var i=nc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(t))ra(e,r);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=e.interleaved;return null===l?(r.next=r,Oo(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Ao(t,e,r,i))&&(ic(n,t,i,r=ec()),oa(n,e,i))}}function ia(t){var e=t.alternate;return t===gs||null!==e&&e===gs}function ra(t,e){bs=ys=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var sa={readContext:Eo,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},aa={readContext:Eo,useCallback:function(t,e){return Es().memoizedState=[t,void 0===e?null:e],t},useContext:Eo,useEffect:Hs,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4194308,4,Xs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vs(4,2,t,e)},useMemo:function(t,e){var n=Es();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Es();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ea.bind(null,gs,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Es().memoizedState=t},useState:Ns,useDebugValue:Ks,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=Ns(!1),e=t[0];return t=Zs.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=gs,r=Es();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Il)throw Error(o(349));0!==(30&ps)||Ls(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Hs(Rs.bind(null,i,s,t),[t]),i.flags|=2048,Bs(9,Ms.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Es(),e=Il.identifierPrefix;if(ro){var n=$r;e=":"+e+"R"+(n=(Qr&~(1<<32-se(Qr)-1)).toString(32)+n),0<(n=_s++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ws++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Eo,useCallback:Qs,useContext:Eo,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:As,useRef:Us,useState:function(){return As(Os)},useDebugValue:Ks,useDeferredValue:function(t){return Js(ks(),ms.memoizedState,t)},useTransition:function(){return[As(Os)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ps,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Eo,useCallback:Qs,useContext:Eo,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:Gs,useLayoutEffect:qs,useMemo:$s,useReducer:Is,useRef:Us,useState:function(){return Is(Os)},useDebugValue:Ks,useDeferredValue:function(t){var e=ks();return null===ms?e.memoizedState=t:Js(e,ms.memoizedState,t)},useTransition:function(){return[Is(Os)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ps,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",i=e;do{n+=V(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gl||(Gl=!0,ql=i),da(0,e)},n}function ga(t,e,n){(n=Mo(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){da(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,e),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fa;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Ec.bind(null,t,e,n),e.then(t,t))}function va(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Mo(-1,1)).tag=2,Ro(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var ba=_.ReactCurrentOwner,_a=!1;function wa(t,e,n,i){e.child=null===t?Jo(e,null,n,i):$o(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var o=e.ref;return To(e,r),i=Ss(t,e,n,i,o,r),n=Ts(),null===t||_a?(ro&&n&&to(e),e.flags|=1,wa(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ga(t,e,r))}function Ca(t,e,n,i,r){if(null===t){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Rc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Sa(t,e,o,i,r))}if(o=t.child,0===(t.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&t.ref===e.ref)return Ga(t,e,r)}return e.flags|=1,(t=Mc(o,i)).ref=e.ref,t.return=e,e.child=t}function Sa(t,e,n,i,r){if(null!==t){var o=t.memoizedProps;if(li(o,i)&&t.ref===e.ref){if(_a=!1,e.pendingProps=i=o,0===(t.lanes&r))return e.lanes=t.lanes,Ga(t,e,r);0!==(131072&t.flags)&&(_a=!0)}}return ka(t,e,n,i,r)}function Ta(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ml,Ll),Ll|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Er(Ml,Ll),Ll|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Er(Ml,Ll),Ll|=i}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,Er(Ml,Ll),Ll|=i;return wa(t,e,r,n),e.child}function Ea(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ka(t,e,n,i,r){var o=Pr(n)?Ir:Or.current;return o=Dr(e,o),To(e,r),n=Ss(t,e,n,i,o,r),i=Ts(),null===t||_a?(ro&&i&&to(e),e.flags|=1,wa(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ga(t,e,r))}function Oa(t,e,n,i,r){if(Pr(n)){var o=!0;Fr(e)}else o=!1;if(To(e,r),null===e.stateNode)Wa(t,e),Wo(e,n,i),qo(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=Dr(e,c=Pr(n)?Ir:Or.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&Go(e,s,i,c),Do=!1;var d=e.memoizedState;s.state=d,No(e,i,s,r),l=e.memoizedState,a!==i||d!==l||Ar.current||Do?("function"===typeof u&&(Vo(e,n,u,i),l=e.memoizedState),(a=Do||Ho(e,n,a,i,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Lo(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vo(e.type,a),s.props=c,h=e.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=Dr(e,l=Pr(n)?Ir:Or.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Go(e,s,i,l),Do=!1,d=e.memoizedState,s.state=d,No(e,i,s,r);var p=e.memoizedState;a!==h||d!==p||Ar.current||Do?("function"===typeof f&&(Vo(e,n,f,i),p=e.memoizedState),(c=Do||Ho(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Aa(t,e,n,i,o,r)}function Aa(t,e,n,i,r,o){Ea(t,e);var s=0!==(128&e.flags);if(!i&&!s)return r&&jr(e,n,!1),Ga(t,e,o);i=e.stateNode,ba.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&s?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,a,o)):wa(t,e,a,o),e.memoizedState=i.state,r&&jr(e,n,!0),e.child}function Ia(t){var e=t.stateNode;e.pendingContext?Mr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Mr(0,e.context,!1),rs(t,e.containerInfo)}function Da(t,e,n,i,r){return po(),go(r),e.flags|=256,wa(t,e,n,i),e.child}var Pa,La,Ma,Ra,Fa={dehydrated:null,treeContext:null,retryLane:0};function ja(t){return{baseLanes:t,cachePool:null,transitions:null}}function Na(t,e,n){var i,r=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&s)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Er(ls,1&s),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,r,0,null),t=Fc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ja(n),e.memoizedState=Fa,t):Ba(e,l));if(null!==(s=t.memoizedState)&&null!==(i=s.dehydrated))return function(t,e,n,i,r,s,a){if(n)return 256&e.flags?(e.flags&=-257,Ua(t,e,a,i=ha(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=jc({mode:"visible",children:i.children},r,0,null),(s=Fc(s,r,a,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!==(1&e.mode)&&$o(e,t.child,null,a),e.child.memoizedState=ja(a),e.memoizedState=Fa,s);if(0===(1&e.mode))return Ua(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(t,e,a,i=ha(s=Error(o(419)),i,void 0))}if(l=0!==(a&t.childLanes),_a||l){if(null!==(i=Il)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Io(t,r),ic(i,t,r,-1))}return mc(),Ua(t,e,a,i=ha(Error(o(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Oc.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,io=cr(r.nextSibling),no=e,ro=!0,oo=null,null!==t&&(Xr[Yr++]=Qr,Xr[Yr++]=$r,Xr[Yr++]=Kr,Qr=t.id,$r=t.overflow,Kr=e),e=Ba(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,s,n);if(a){a=r.fallback,l=e.mode,i=(s=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==s?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Mc(i,a):(a=Fc(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Fa,r}return t=(a=t.child).sibling,r=Mc(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ba(t,e){return(e=jc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ua(t,e,n,i){return null!==i&&go(i),$o(e,t.child,null,n),(t=Ba(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Va(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),So(t.return,e,n)}function za(t,e,n,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Ha(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(wa(t,e,i.children,n),0!==(2&(i=ls.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Va(t,n,e);else if(19===t.tag)Va(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Er(ls,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),za(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===cs(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}za(e,!0,n,null,o);break;case"together":za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ga(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),jl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Mc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Mc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!ro)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xa(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ya(t,e,n){var i=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(e),null;case 1:case 17:return Pr(e.type)&&Lr(),Xa(e),null;case 3:return i=e.stateNode,os(),Tr(Ar),Tr(Or),hs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),La(t,e),Xa(e),null;case 5:as(e);var r=is(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ma(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(o(166));return Xa(e),null}if(t=is(ts.current),ho(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[dr]=e,i[fr]=s,t=0!==(1&e.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)Bi(Ri[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Q(i,s),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Bi("invalid",i);break;case"textarea":rt(i,s),Bi("invalid",i)}for(var l in yt(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":q(i),Z(i,s,!0);break;case"textarea":q(i),st(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Zi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,Pa(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Bi("cancel",t),Bi("close",t),r=i;break;case"iframe":case"object":case"embed":Bi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)Bi(Ri[r],t);r=i;break;case"source":Bi("error",t),r=i;break;case"img":case"image":case"link":Bi("error",t),Bi("load",t),r=i;break;case"details":Bi("toggle",t),r=i;break;case"input":Q(t,i),r=K(t,i),Bi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),Bi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Bi("invalid",t)}for(s in yt(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?mt(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Bi("scroll",t):null!=u&&b(t,s,u,l))}switch(n){case"input":q(t),Z(t,i,!1);break;case"textarea":q(t),st(t);break;case"option":null!=i.value&&t.setAttribute("value",""+W(i.value));break;case"select":t.multiple=!!i.multiple,null!=(s=i.value)?nt(t,!!i.multiple,s,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xa(e),null;case 6:if(t&&null!=e.stateNode)Ra(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(o(166));if(n=is(ns.current),is(ts.current),ho(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(s=i.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Xa(e),null;case 13:if(Tr(ls),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==i&&null!==i.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[dr]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xa(e),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Rl&&(Rl=3):mc())),null!==e.updateQueue&&(e.flags|=4),Xa(e),null);case 4:return os(),La(t,e),null===t&&zi(e.stateNode.containerInfo),Xa(e),null;case 10:return Co(e.type._context),Xa(e),null;case 19:if(Tr(ls),null===(s=e.memoizedState))return Xa(e),null;if(i=0!==(128&e.flags),null===(l=s.rendering))if(i)qa(s,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,qa(s,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Er(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&$t()>Hl&&(e.flags|=128,i=!0,qa(s,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=cs(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Xa(e),null}else 2*$t()-s.renderingStartTime>Hl&&1073741824!==n&&(e.flags|=128,i=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=ls.current,Er(ls,i?1&n|2:1&n),e):(Xa(e),null);case 22:case 23:return dc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ll)&&(Xa(e),6&e.subtreeFlags&&(e.flags|=8192)):Xa(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ka(t,e){switch(eo(e),e.tag){case 1:return Pr(e.type)&&Lr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Tr(Ar),Tr(Or),hs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Tr(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Tr(ls),null;case 4:return os(),null;case 10:return Co(e.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ma=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,is(ts.current);var o,s=null;switch(n){case"input":r=K(t,r),i=K(t,i),s=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),s=[];break;case"textarea":r=it(t,r),i=it(t,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},Ra=function(t,e,n,i){n!==i&&(e.flags|=4)};var Qa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tc(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){Tc(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(e,n,o)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[gr],delete e[mr],delete e[vr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,dl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,e);case 6:var i=hl,r=dl;hl=null,fl(t,e,n),dl=r,null!==(hl=i)&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),ze(t)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(t,e,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,e,s),r=r.next}while(r!==i)}fl(t,e,n);break;case 1:if(!$a&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Tc(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,fl(t,e,n),$a=i):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var i=Ac.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Tc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)vl(e,t),e=e.sibling}function vl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(m){Tc(t,t.return,m)}try{il(5,t,t.return)}catch(m){Tc(t,t.return,m)}}break;case 1:ml(e,t),yl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),yl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Tc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(r,s),bt(l,a);var u=bt(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":J(r,s);break;case"textarea":ot(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(r,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(r,!!s.multiple,s.defaultValue,!0):nt(r,!!s.multiple,s.multiple?[]:"",!1))}r[fr]=s}catch(m){Tc(t,t.return,m)}}break;case 6:if(ml(e,t),yl(t),4&i){if(null===t.stateNode)throw Error(o(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Tc(t,t.return,m)}}break;case 3:if(ml(e,t),yl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(m){Tc(t,t.return,m)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(r=t.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(zl=$t())),4&i&&gl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?($a=(u=$a)||h,ml(e,t),$a=u):ml(e,t),yl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Za=t,h=t.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Tc(i,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Za=p):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Tc(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Tc(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&i&&gl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),ul(t,ll(t),r);break;case 3:case 4:var s=i.stateNode.containerInfo;cl(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Tc(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){Za=t,_l(t,e,n)}function _l(t,e,n){for(var i=0!==(1&t.mode);null!==Za;){var r=Za,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Qa;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Qa;var c=$a;if(Qa=s,($a=l)&&!c)for(Za=r;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?Cl(r):null!==l?(l.return=s,Za=l):Cl(r);for(;null!==o;)Za=o,_l(o,e,n),o=o.sibling;Za=r,Qa=a,$a=c}wl(t)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Za=o):wl(t)}}function wl(t){for(;null!==Za;){var e=Za;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:$a||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!$a)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Bo(e,s,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&ze(d)}}}break;default:throw Error(o(163))}$a||512&e.flags&&ol(e)}catch(f){Tc(e,e.return,f)}}if(e===t){Za=null;break}if(null!==(n=e.sibling)){n.return=e.return,Za=n;break}Za=e.return}}function xl(t){for(;null!==Za;){var e=Za;if(e===t){Za=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Za=n;break}Za=e.return}}function Cl(t){for(;null!==Za;){var e=Za;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Tc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Tc(e,r,l)}}var o=e.return;try{ol(e)}catch(l){Tc(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Tc(e,s,l)}}}catch(l){Tc(e,e.return,l)}if(e===t){Za=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Za=a;break}Za=e.return}}var Sl,Tl=Math.ceil,El=_.ReactCurrentDispatcher,kl=_.ReactCurrentOwner,Ol=_.ReactCurrentBatchConfig,Al=0,Il=null,Dl=null,Pl=0,Ll=0,Ml=Sr(0),Rl=0,Fl=null,jl=0,Nl=0,Bl=0,Ul=null,Vl=null,zl=0,Hl=1/0,Wl=null,Gl=!1,ql=null,Xl=null,Yl=!1,Kl=null,Ql=0,$l=0,Jl=null,Zl=-1,tc=0;function ec(){return 0!==(6&Al)?$t():-1!==Zl?Zl:Zl=$t()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Qe(t.type)}function ic(t,e,n,i){if(50<$l)throw $l=0,Jl=null,Error(o(185));ve(t,n,i),0!==(2&Al)&&t===Il||(t===Il&&(0===(2&Al)&&(Nl|=n),4===Rl&&lc(t,Pl)),rc(t,i),1===n&&0===Al&&0===(1&e.mode)&&(Hl=$t()+500,Br&&zr()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var i=de(t,t===Il?Pl:0);if(0===i)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Br=!0,Vr(t)}(cc.bind(null,t)):Vr(cc.bind(null,t)),sr((function(){0===(6&Al)&&zr()})),n=null;else{switch(_e(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ic(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if(Zl=-1,tc=0,0!==(6&Al))throw Error(o(327));var n=t.callbackNode;if(Cc()&&t.callbackNode!==n)return null;var i=de(t,t===Il?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=vc(t,i);else{e=i;var r=Al;Al|=2;var s=gc();for(Il===t&&Pl===e||(Wl=null,Hl=$t()+500,fc(t,e));;)try{bc();break}catch(l){pc(t,l)}xo(),El.current=s,Al=r,null!==Dl?e=0:(Il=null,Pl=0,e=Rl)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Fl,fc(t,0),lc(t,i),rc(t,$t()),n;if(6===e)lc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=vc(t,i))&&(0!==(s=pe(t))&&(i=s,e=sc(t,s))),1===e))throw n=Fl,fc(t,0),lc(t,i),rc(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(o(345));case 2:case 5:xc(t,Vl,Wl);break;case 3:if(lc(t,i),(130023424&i)===i&&10<(e=zl+500-$t())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){ec(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xc.bind(null,t,Vl,Wl),e);break}xc(t,Vl,Wl);break;case 4:if(lc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-se(i);s=1<<a,(a=e[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Tl(i/1960))-i)){t.timeoutHandle=ir(xc.bind(null,t,Vl,Wl),i);break}xc(t,Vl,Wl);break;default:throw Error(o(329))}}}return rc(t,$t()),t.callbackNode===n?oc.bind(null,t):null}function sc(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=vc(t,e))&&(e=Vl,Vl=n,null!==e&&ac(e)),t}function ac(t){null===Vl?Vl=t:Vl.push.apply(Vl,t)}function lc(t,e){for(e&=~Bl,e&=~Nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),i=1<<n;t[n]=-1,e&=~i}}function cc(t){if(0!==(6&Al))throw Error(o(327));Cc();var e=de(t,0);if(0===(1&e))return rc(t,$t()),null;var n=vc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Fl,fc(t,0),lc(t,e),rc(t,$t()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Vl,Wl),rc(t,$t()),null}function uc(t,e){var n=Al;Al|=1;try{return t(e)}finally{0===(Al=n)&&(Hl=$t()+500,Br&&zr())}}function hc(t){null!==Kl&&0===Kl.tag&&0===(6&Al)&&Cc();var e=Al;Al|=1;var n=Ol.transition,i=be;try{if(Ol.transition=null,be=1,t)return t()}finally{be=i,Ol.transition=n,0===(6&(Al=e))&&zr()}}function dc(){Ll=Ml.current,Tr(Ml)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Dl)for(n=Dl.return;null!==n;){var i=n;switch(eo(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:os(),Tr(Ar),Tr(Or),hs();break;case 5:as(i);break;case 4:os();break;case 13:case 19:Tr(ls);break;case 10:Co(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=t,Dl=t=Mc(t.current,null),Pl=Ll=e,Rl=0,Fl=null,Bl=Nl=jl=0,Vl=Ul=null,null!==ko){for(e=0;e<ko.length;e++)if(null!==(i=(n=ko[e]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}ko=null}return t}function pc(t,e){for(;;){var n=Dl;try{if(xo(),ds.current=sa,ys){for(var i=gs.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ys=!1}if(ps=0,vs=ms=gs=null,bs=!1,_s=0,kl.current=null,null===n||null===n.return){Rl=1,Fl=e,Dl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,e),1&p.mode&&ma(s,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(s,u,e),mc();break t}c=Error(o(426))}else if(ro&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,e),go(ua(c,l));break t}}s=c=ua(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,jo(s,pa(0,c,e));break t;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,jo(s,ga(s,l,e));break t}}s=s.return}while(null!==s)}wc(n)}catch(_){e=_,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gc(){var t=El.current;return El.current=sa,null===t?sa:t}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&jl)&&0===(268435455&Nl)||lc(Il,Pl)}function vc(t,e){var n=Al;Al|=2;var i=gc();for(Il===t&&Pl===e||(Wl=null,fc(t,e));;)try{yc();break}catch(r){pc(t,r)}if(xo(),Al=n,El.current=i,null!==Dl)throw Error(o(261));return Il=null,Pl=0,Rl}function yc(){for(;null!==Dl;)_c(Dl)}function bc(){for(;null!==Dl&&!Kt();)_c(Dl)}function _c(t){var e=Sl(t.alternate,t,Ll);t.memoizedProps=t.pendingProps,null===e?wc(t):Dl=e,kl.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ya(n,e,Ll)))return void(Dl=n)}else{if(null!==(n=Ka(n,e)))return n.flags&=32767,void(Dl=n);if(null===t)return Rl=6,void(Dl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Dl=e);Dl=e=t}while(null!==e);0===Rl&&(Rl=5)}function xc(t,e,n){var i=be,r=Ol.transition;try{Ol.transition=null,be=1,function(t,e,n,i){do{Cc()}while(null!==Kl);if(0!==(6&Al))throw Error(o(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-se(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}(t,s),t===Il&&(Dl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ic(ee,(function(){return Cc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=be;be=1;var l=Al;Al|=4,kl.current=null,function(t,e){if(tr=We,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==s||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=a),f===s&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},We=!1,Za=e;null!==Za;)if(t=(e=Za).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Za=t;else for(;null!==Za;){e=Za;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){Tc(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Za=t;break}Za=e.return}g=nl,nl=!1}(t,n),vl(n,t),pi(er),We=!!tr,er=tr=null,t.current=n,bl(n,t,r),Qt(),Al=l,be=a,Ol.transition=s}else t.current=n;if(Yl&&(Yl=!1,Kl=t,Ql=r),s=t.pendingLanes,0===s&&(Xl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gl)throw Gl=!1,t=ql,ql=null,t;0!==(1&Ql)&&0!==t.tag&&Cc(),s=t.pendingLanes,0!==(1&s)?t===Jl?$l++:($l=0,Jl=t):$l=0,zr()}(t,e,n,i)}finally{Ol.transition=r,be=i}return null}function Cc(){if(null!==Kl){var t=_e(Ql),e=Ol.transition,n=be;try{if(Ol.transition=null,be=16>t?16:t,null===Kl)var i=!1;else{if(t=Kl,Kl=null,Ql=0,0!==(6&Al))throw Error(o(331));var r=Al;for(Al|=4,Za=t.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:il(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(sl(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else t:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break t}Za=s.return}}var b=t.current;for(Za=b;null!==Za;){var _=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Za=_;else t:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Tc(l,l.return,x)}if(l===a){Za=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break t}Za=l.return}}if(Al=r,zr(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{be=n,Ol.transition=e}}return!1}function Sc(t,e,n){t=Ro(t,e=pa(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ve(t,1,e),rc(t,e))}function Tc(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){e=Ro(e,t=ga(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ve(e,1,t),rc(e,t));break}}e=e.return}}function Ec(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Il===t&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>$t()-zl?fc(t,0):Bl|=n),rc(t,e)}function kc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Io(t,e))&&(ve(t,e,n),rc(t,n))}function Oc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),kc(t,n)}function Ac(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(e),kc(t,n)}function Ic(t,e){return Xt(t,e)}function Dc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(t,e,n,i){return new Dc(t,e,n,i)}function Lc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Mc(t,e){var n=t.alternate;return null===n?((n=Pc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,i,r,s){var a=2;if(i=t,"function"===typeof t)Lc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case C:return Fc(n.children,r,s,e);case S:a=8,r|=8;break;case T:return(t=Pc(12,n,e,2|r)).elementType=T,t.lanes=s,t;case A:return(t=Pc(13,n,e,r)).elementType=A,t.lanes=s,t;case I:return(t=Pc(19,n,e,r)).elementType=I,t.lanes=s,t;case L:return jc(n,r,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case k:a=9;break t;case O:a=11;break t;case D:a=14;break t;case P:a=16,i=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Pc(a,n,e,r)).elementType=t,e.type=i,e.lanes=s,e}function Fc(t,e,n,i){return(t=Pc(7,t,i,e)).lanes=n,t}function jc(t,e,n,i){return(t=Pc(22,t,i,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function Nc(t,e,n){return(t=Pc(6,t,null,e)).lanes=n,t}function Bc(t,e,n){return(e=Pc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(t,e,n,i,r,o,s,a,l){return t=new Uc(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Pc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),t}function zc(t){if(!t)return kr;t:{if(zt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Pr(n))return Rr(t,n,e)}return e}function Hc(t,e,n,i,r,o,s,a,l){return(t=Vc(n,i,!0,t,0,o,0,a,l)).context=zc(null),n=t.current,(o=Mo(i=ec(),r=nc(n))).callback=void 0!==e&&null!==e?e:null,Ro(n,o,r),t.current.lanes=r,ve(t,r,i),rc(t,i),t}function Wc(t,e,n,i){var r=e.current,o=ec(),s=nc(r);return n=zc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Mo(o,s)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Ro(r,e,s))&&(ic(t,r,s,o),Fo(t,r,s)),s}function Gc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)_a=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _a=!1,function(t,e,n){switch(e.tag){case 3:Ia(e),po();break;case 5:ss(e);break;case 1:Pr(e.type)&&Fr(e);break;case 4:rs(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Er(yo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Er(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Na(t,e,n):(Er(ls,1&ls.current),null!==(t=Ga(t,e,n))?t.sibling:null);Er(ls,1&ls.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ha(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(ls,ls.current),i)break;return null;case 22:case 23:return e.lanes=0,Ta(t,e,n)}return Ga(t,e,n)}(t,e,n);_a=0!==(131072&t.flags)}else _a=!1,ro&&0!==(1048576&e.flags)&&Zr(e,qr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wa(t,e),t=e.pendingProps;var r=Dr(e,Or.current);To(e,n),r=Ss(null,e,i,t,r,n);var s=Ts();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(i)?(s=!0,Fr(e)):s=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Po(e),r.updater=zo,e.stateNode=r,r._reactInternals=e,qo(e,i,t,n),e=Aa(null,e,i,!0,s,n)):(e.tag=0,ro&&s&&to(e),wa(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Lc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===O)return 11;if(t===D)return 14}return 2}(i),t=vo(i,t),r){case 0:e=ka(null,e,i,t,n);break t;case 1:e=Oa(null,e,i,t,n);break t;case 11:e=xa(null,e,i,t,n);break t;case 14:e=Ca(null,e,i,vo(i.type,t),n);break t}throw Error(o(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,ka(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 1:return i=e.type,r=e.pendingProps,Oa(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 3:t:{if(Ia(e),null===t)throw Error(o(387));i=e.pendingProps,r=(s=e.memoizedState).element,Lo(t,e),No(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Da(t,e,i,n,r=ua(Error(o(423)),e));break t}if(i!==r){e=Da(t,e,i,n,r=ua(Error(o(424)),e));break t}for(io=cr(e.stateNode.containerInfo.firstChild),no=e,ro=!0,oo=null,n=Jo(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),i===r){e=Ga(t,e,n);break t}wa(t,e,i,n)}e=e.child}return e;case 5:return ss(e),null===t&&co(e),i=e.type,r=e.pendingProps,s=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(e.flags|=32),Ea(t,e),wa(t,e,a,n),e.child;case 6:return null===t&&co(e),null;case 13:return Na(t,e,n);case 4:return rs(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=$o(e,null,i,n):wa(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xa(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 7:return wa(t,e,e.pendingProps,n),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Er(yo,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Ar.current){e=Ga(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Mo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,To(e,n),i=i(r=Eo(r)),e.flags|=1,wa(t,e,i,n),e.child;case 14:return r=vo(i=e.type,e.pendingProps),Ca(t,e,i,r=vo(i.type,r),n);case 15:return Sa(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vo(i,r),Wa(t,e),e.tag=1,Pr(i)?(t=!0,Fr(e)):t=!1,To(e,n),Wo(e,i,r),qo(e,i,r,n),Aa(null,e,i,!0,t,n);case 19:return Ha(t,e,n);case 22:return Ta(t,e,n)}throw Error(o(156,e.tag))};var Yc="function"===typeof reportError?reportError:function(t){console.error(t)};function Kc(t){this._internalRoot=t}function Qc(t){this._internalRoot=t}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zc(){}function tu(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var t=Gc(s);a.call(t)}}Wc(e,s,t,r)}else s=function(t,e,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var t=Gc(s);o.call(t)}}var s=Hc(e,i,t,0,null,!1,0,"",Zc);return t._reactRootContainer=s,t[pr]=s.current,zi(8===t.nodeType?t.parentNode:t),hc(),s}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Gc(l);a.call(t)}}var l=Vc(t,0,!1,null,0,!1,0,"",Zc);return t._reactRootContainer=l,t[pr]=l.current,zi(8===t.nodeType?t.parentNode:t),hc((function(){Wc(e,l,n,i)})),l}(n,e,t,r,i);return Gc(s)}Qc.prototype.render=Kc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wc(t,e,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Wc(null,t,null,null)})),e[pr]=null}},Qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&je(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),rc(e,$t()),0===(6&Al)&&(Hl=$t()+500,zr()))}break;case 13:hc((function(){var e=Io(t,1);if(null!==e){var n=ec();ic(e,t,1,n)}})),Xc(t,1)}},xe=function(t){if(13===t.tag){var e=Io(t,134217728);if(null!==e)ic(e,t,134217728,ec());Xc(t,134217728)}},Ce=function(t){if(13===t.tag){var e=nc(t),n=Io(t,e);if(null!==n)ic(n,t,e,ec());Xc(t,e)}},Se=function(){return be},Te=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wr(i);if(!r)throw Error(o(90));X(i),J(i,r)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ot=uc,At=hc;var eu={usingClientEntryPoint:!1,Events:[br,_r,wr,Et,kt,uc]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{re=ru.inject(iu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(e))throw Error(o(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!$c(t))throw Error(o(299));var n=!1,i="",r=Yc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Vc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,zi(8===t.nodeType?t.parentNode:t),new Kc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!$c(t))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Hc(e,null,t,1,null!=n?n:null,r,0,s,a),t[pr]=e.current,zi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Qc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(o(40));return!!t._reactRootContainer&&(hc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pr]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},180:(t,e,n)=>{"use strict";var i=n(292);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},292:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(144)},36:(t,e,n)=>{"use strict";var i=n(60),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,i)&&!l.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},564:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,g(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,i){var r,o={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,r)&&!S.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:C.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var k=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,r,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=t),t=""===o?"."+O(l,0):o,w(s)?(r="",null!=t&&(r=t.replace(k,"$&/")+"/"),A(s,e,r,"",(function(t){return t}))):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",w(t))for(var c=0;c<t.length;c++){var u=o+O(a=t[c],c);l+=A(a,e,r,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=A(a=a.value,e,r,u=o+O(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function D(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var P={current:null},L={transition:null},M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=s,e.PureComponent=b,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=C.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return P.current.useCallback(t,e)},e.useContext=function(t){return P.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return P.current.useDeferredValue(t)},e.useEffect=function(t,e){return P.current.useEffect(t,e)},e.useId=function(){return P.current.useId()},e.useImperativeHandle=function(t,e,n){return P.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return P.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return P.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return P.current.useMemo(t,e)},e.useReducer=function(t,e,n){return P.current.useReducer(t,e,n)},e.useRef=function(t){return P.current.useRef(t)},e.useState=function(t){return P.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return P.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return P.current.useTransition()},e.version="18.2.0"},60:(t,e,n)=>{"use strict";t.exports=n(564)},496:(t,e,n)=>{"use strict";t.exports=n(36)},692:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=t[a],c=a+1,u=t[c];if(0>o(l,n))c<r&&0>o(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function w(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,L(x);else{var e=i(u);null!==e&&M(w,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,y(E),E=-1),p=!0;var o=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&M(w,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,T=null,E=-1,k=5,O=-1;function A(){return!(e.unstable_now()-O<k)}function I(){if(null!==T){var t=e.unstable_now();O=t;var n=!0;try{n=T(!0,t)}finally{n?C():(S=!1,T=null)}}else S=!1}if("function"===typeof b)C=function(){b(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=I,C=function(){P.postMessage(null)}}else C=function(){v(I,0)};function L(t){T=t,S||(S=!0,C())}function M(t,n){E=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(u,t),null===i(c)&&t===i(u)&&(m?(y(E),E=-1):m=!0,M(w,o-s))):(t.sortIndex=a,n(c,t),g||p||(g=!0,L(x))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},724:(t,e,n)=>{"use strict";t.exports=n(692)},88:()=>{},300:()=>{},500:()=>{}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.m=t,(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>i[t]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>"static/js/"+t+".a7a434b6.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="widi_react:";n.l=(i,r,o,s)=>{if(t[i])t[i].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+o),a.src=i),t[i]=[r];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",(()=>{var t={590:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise(((n,i)=>r=t[e]=[n,i]));i.push(r[2]=o);var s=n.p+n.u(e),a=new Error;n.l(s,(i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var r,o,s=i[0],a=i[1],l=i[2],c=0;if(s.some((e=>0!==t[e]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(e&&e(i);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},i=self.webpackChunkwidi_react=self.webpackChunkwidi_react||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t={};n.r(t),n.d(t,{afterMain:()=>Fe,afterRead:()=>Le,afterWrite:()=>Be,applyStyles:()=>qe,arrow:()=>fn,auto:()=>we,basePlacements:()=>xe,beforeMain:()=>Me,beforeRead:()=>De,beforeWrite:()=>je,bottom:()=>ye,clippingParents:()=>Te,computeStyles:()=>vn,createPopper:()=>Yn,createPopperBase:()=>Xn,createPopperLite:()=>Kn,detectOverflow:()=>Ln,end:()=>Se,eventListeners:()=>bn,flip:()=>Mn,hide:()=>jn,left:()=>_e,main:()=>Re,modifierPhases:()=>Ue,offset:()=>Nn,placements:()=>Ie,popper:()=>ke,popperGenerator:()=>qn,popperOffsets:()=>Bn,preventOverflow:()=>Un,read:()=>Pe,reference:()=>Oe,right:()=>be,start:()=>Ce,top:()=>ve,variationPlacements:()=>Ae,viewport:()=>Ee,write:()=>Ne});var e,i=n(60),r=n.t(i,2),o=n(180),s=n(292),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(e||(e={}));const c="popstate";function u(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function h(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function d(t,e){return{usr:t.state,key:t.key,idx:e}}function f(t,e,n,i){return void 0===n&&(n=null),l({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?g(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function p(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function g(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function m(t,n,i,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,a=o.history,h=e.Pop,g=null,m=v();function v(){return(a.state||{idx:null}).idx}function y(){h=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:h,location:_.location,delta:n})}function b(t){let e="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof t?t:p(t);return u(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let _={get action(){return h},get location(){return t(o,a)},listen(t){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(c,y),g=t,()=>{o.removeEventListener(c,y),g=null}},createHref:t=>n(o,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,n){h=e.Push;let r=f(_.location,t,n);i&&i(r,t),m=v()+1;let l=d(r,m),c=_.createHref(r);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(c)}s&&g&&g({action:h,location:_.location,delta:1})},replace:function(t,n){h=e.Replace;let r=f(_.location,t,n);i&&i(r,t),m=v();let o=d(r,m),l=_.createHref(r);a.replaceState(o,"",l),s&&g&&g({action:h,location:_.location,delta:0})},go:t=>a.go(t)};return _}var v;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(v||(v={}));const y=new Set(["lazy","caseSensitive","path","id","index","children"]);function b(t,e,n,i){return void 0===n&&(n=[]),void 0===i&&(i={}),t.map(((t,r)=>{let o=[...n,r],s="string"===typeof t.id?t.id:o.join("-");if(u(!0!==t.index||!t.children,"Cannot specify children on an index route"),u(!i[s],'Found a route id collision on id "'+s+"\".  Route id's must be globally unique within Data Router usages"),function(t){return!0===t.index}(t)){let n=l({},t,e(t),{id:s});return i[s]=n,n}{let n=l({},t,e(t),{id:s,children:void 0});return i[s]=n,t.children&&(n.children=b(t.children,e,o,i)),n}}))}function _(t,e,n){void 0===n&&(n="/");let i=M(("string"===typeof e?g(e):e).pathname||"/",n);if(null==i)return null;let r=w(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let o=null;for(let s=0;null==o&&s<r.length;++s)o=D(r[s],L(i));return o}function w(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,o)=>{let s={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(i),'Absolute route path "'+s.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(i.length));let a=N([i,s.relativePath]),l=n.concat(s);t.children&&t.children.length>0&&(u(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:I(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of x(t.path))r(t,e,i);else r(t,e)})),e}function x(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let s=x(i.join("/")),a=[];return a.push(...s.map((t=>""===t?o:[o,t].join("/")))),r&&a.push(...s),a.map((e=>t.startsWith("/")&&""===e?"/":e))}const C=/^:[\w-]+$/,S=3,T=2,E=1,k=10,O=-2,A=t=>"*"===t;function I(t,e){let n=t.split("/"),i=n.length;return n.some(A)&&(i+=O),e&&(i+=T),n.filter((t=>!A(t))).reduce(((t,e)=>t+(C.test(e)?S:""===e?E:k)),i)}function D(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let s=0;s<n.length;++s){let t=n[s],a=s===n.length-1,l="/"===r?e:e.slice(r.length)||"/",c=P({path:t.relativePath,caseSensitive:t.caseSensitive,end:a},l);if(!c)return null;Object.assign(i,c.params);let u=t.route;o.push({params:i,pathname:N([r,c.pathname]),pathnameBase:B(N([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=N([r,c.pathnameBase]))}return o}function P(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);h("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,e?void 0:"i");return[o,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=a[n]||"";s=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[i]=r&&!l?void 0:function(t,e){try{return decodeURIComponent(t)}catch(n){return h(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(l||"",i),t}),{}),pathname:o,pathnameBase:s,pattern:t}}function L(t){try{return decodeURI(t)}catch(e){return h(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function M(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function R(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function j(t,e,n,i){let r;void 0===i&&(i=!1),"string"===typeof t?r=g(t):(r=l({},t),u(!r.pathname||!r.pathname.includes("?"),R("?","pathname","search",r)),u(!r.pathname||!r.pathname.includes("#"),R("#","pathname","hash",r)),u(!r.search||!r.search.includes("#"),R("#","search","hash",r)));let o,s=""===t||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let t=e.length-1;if(!i&&a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}o=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?g(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:U(i),hash:V(r)}}(r,o),h=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const N=t=>t.join("/").replace(/\/\/+/g,"/"),B=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",V=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;class z{constructor(t,e,n,i){void 0===i&&(i=!1),this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function H(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const W=["post","put","patch","delete"],G=new Set(W),q=["get",...W],X=new Set(q),Y=new Set([301,302,303,307,308]),K=new Set([307,308]),Q={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},J={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Z=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=t=>({hasErrorBoundary:Boolean(t.hasErrorBoundary)}),et="remix-router-transitions";function nt(t){const n=t.window?t.window:"undefined"!==typeof window?window:void 0,i="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,r=!i;let o;if(u(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)o=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;o=t=>({hasErrorBoundary:e(t)})}else o=tt;let s,a,c={},d=b(t.routes,o,void 0,c),p=t.basename||"/",g=l({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),m=null,y=new Set,w=null,x=null,C=null,S=null!=t.hydrationData,T=_(d,t.history.location,p),E=null;if(null==T){let e=bt(404,{pathname:t.history.location.pathname}),{matches:n,route:i}=yt(d);T=n,E={[i.id]:e}}let k,O=T.some((t=>t.route.lazy)),A=T.some((t=>t.route.loader));if(O)a=!1;else if(A)if(g.v7_partialHydration){let e=t.hydrationData?t.hydrationData.loaderData:null,n=t.hydrationData?t.hydrationData.errors:null;a=T.every((t=>t.route.loader&&!0!==t.route.loader.hydrate&&(e&&void 0!==e[t.route.id]||n&&void 0!==n[t.route.id])))}else a=null!=t.hydrationData;else a=!0;let I,D={historyAction:t.history.action,location:t.history.location,matches:T,initialized:a,navigation:Q,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},P=e.Pop,L=!1,R=!1,F=new Map,j=null,N=!1,B=!1,U=[],V=[],z=new Map,H=0,W=-1,G=new Map,q=new Set,X=new Map,Y=new Map,nt=new Set,ot=new Map,at=new Map,lt=!1;function ct(t,e){void 0===e&&(e={}),D=l({},D,t);let n=[],i=[];g.v7_fetcherPersist&&D.fetchers.forEach(((t,e)=>{"idle"===t.state&&(nt.has(e)?i.push(e):n.push(e))})),[...y].forEach((t=>t(D,{deletedFetchers:i,unstable_viewTransitionOpts:e.viewTransitionOpts,unstable_flushSync:!0===e.flushSync}))),g.v7_fetcherPersist&&(n.forEach((t=>D.fetchers.delete(t))),i.forEach((t=>jt(t))))}function dt(n,i,r){var o,a;let c,{flushSync:u}=void 0===r?{}:r,h=null!=D.actionData&&null!=D.navigation.formMethod&&kt(D.navigation.formMethod)&&"loading"===D.navigation.state&&!0!==(null==(o=n.state)?void 0:o._isRedirect);c=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:h?D.actionData:null;let f=i.loaderData?mt(D.loaderData,i.loaderData,i.matches||[],i.errors):D.loaderData,p=D.blockers;p.size>0&&(p=new Map(p),p.forEach(((t,e)=>p.set(e,J))));let g,m=!0===L||null!=D.navigation.formMethod&&kt(D.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);if(s&&(d=s,s=void 0),N||P===e.Pop||(P===e.Push?t.history.push(n,n.state):P===e.Replace&&t.history.replace(n,n.state)),P===e.Pop){let t=F.get(D.location.pathname);t&&t.has(n.pathname)?g={currentLocation:D.location,nextLocation:n}:F.has(n.pathname)&&(g={currentLocation:n,nextLocation:D.location})}else if(R){let t=F.get(D.location.pathname);t?t.add(n.pathname):(t=new Set([n.pathname]),F.set(D.location.pathname,t)),g={currentLocation:D.location,nextLocation:n}}ct(l({},i,{actionData:c,loaderData:f,historyAction:P,location:n,initialized:!0,navigation:Q,revalidation:"idle",restoreScrollPosition:Xt(n,i.matches||D.matches),preventScrollReset:m,blockers:p}),{viewTransitionOpts:g,flushSync:!0===u}),P=e.Pop,L=!1,R=!1,N=!1,B=!1,U=[],V=[]}async function ft(n,i,r){I&&I.abort(),I=null,P=n,N=!0===(r&&r.startUninterruptedRevalidation),function(t,e){if(w&&C){let n=qt(t,e);w[n]=C()}}(D.location,D.matches),L=!0===(r&&r.preventScrollReset),R=!0===(r&&r.enableViewTransition);let a=s||d,u=r&&r.overrideNavigation,h=_(a,i,p),f=!0===(r&&r.flushSync);if(!h){let t=bt(404,{pathname:i.pathname}),{matches:e,route:n}=yt(a);return Gt(),void dt(i,{matches:e,loaderData:{},errors:{[n.id]:t}},{flushSync:f})}if(D.initialized&&!B&&function(t,e){if(t.pathname!==e.pathname||t.search!==e.search)return!1;if(""===t.hash)return""!==e.hash;if(t.hash===e.hash)return!0;if(""!==e.hash)return!0;return!1}(D.location,i)&&!(r&&r.submission&&kt(r.submission.formMethod)))return void dt(i,{matches:h},{flushSync:f});I=new AbortController;let m,y,b=ht(t.history,i,I.signal,r&&r.submission);if(r&&r.pendingError)y={[vt(h).route.id]:r.pendingError};else if(r&&r.submission&&kt(r.submission.formMethod)){let t=await async function(t,n,i,r,s){void 0===s&&(s={});Tt();let a,l=function(t,e){let n={state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text};return n}(n,i);ct({navigation:l},{flushSync:!0===s.flushSync});let u=Dt(r,n);if(u.route.action||u.route.lazy){if(a=await ut("action",t,u,r,c,o,p,g.v7_relativeSplatPath),t.signal.aborted)return{shortCircuited:!0}}else a={type:v.error,error:bt(405,{method:t.method,pathname:n.pathname,routeId:u.route.id})};if(St(a)){let t;return t=s&&null!=s.replace?s.replace:a.location===D.location.pathname+D.location.search,await pt(D,a,{submission:i,replace:t}),{shortCircuited:!0}}if(Ct(a)){let t=vt(r,u.route.id);return!0!==(s&&s.replace)&&(P=e.Push),{pendingActionData:{},pendingActionError:{[t.route.id]:a.error}}}if(xt(a))throw bt(400,{type:"defer-action"});return{pendingActionData:{[u.route.id]:a.data}}}(b,i,r.submission,h,{replace:r.replace,flushSync:f});if(t.shortCircuited)return;m=t.pendingActionData,y=t.pendingActionError,u=Lt(i,r.submission),f=!1,b=new Request(b.url,{signal:b.signal})}let{shortCircuited:x,loaderData:S,errors:T}=await async function(e,n,i,r,o,a,c,u,h,f,m){let v=r||Lt(n,o),y=o||a||Pt(v),b=s||d,[_,w]=st(t.history,D,i,y,n,g.v7_partialHydration&&!0===u,B,U,V,nt,X,q,b,p,f,m);if(Gt((t=>!(i&&i.some((e=>e.route.id===t)))||_&&_.some((e=>e.route.id===t)))),W=++H,0===_.length&&0===w.length){let t=Ut();return dt(n,l({matches:i,loaderData:{},errors:m||null},f?{actionData:f}:{},t?{fetchers:new Map(D.fetchers)}:{}),{flushSync:h}),{shortCircuited:!0}}if(!N&&(!g.v7_partialHydration||!u)){w.forEach((t=>{let e=D.fetchers.get(t.key),n=Mt(void 0,e?e.data:void 0);D.fetchers.set(t.key,n)}));let t=f||D.actionData;ct(l({navigation:v},t?0===Object.keys(t).length?{actionData:null}:{actionData:t}:{},w.length>0?{fetchers:new Map(D.fetchers)}:{}),{flushSync:h})}w.forEach((t=>{z.has(t.key)&&Nt(t.key),t.controller&&z.set(t.key,t.controller)}));let x=()=>w.forEach((t=>Nt(t.key)));I&&I.signal.addEventListener("abort",x);let{results:C,loaderResults:S,fetcherResults:T}=await wt(D.matches,i,_,w,e);if(e.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",x);w.forEach((t=>z.delete(t.key)));let E=_t(C);if(E){if(E.idx>=_.length){let t=w[E.idx-_.length].key;q.add(t)}return await pt(D,E.result,{replace:c}),{shortCircuited:!0}}let{loaderData:k,errors:O}=gt(D,i,_,S,m,w,T,ot);ot.forEach(((t,e)=>{t.subscribe((n=>{(n||t.done)&&ot.delete(e)}))}));let A=Ut(),P=Vt(W),L=A||P||w.length>0;return l({loaderData:k,errors:O},L?{fetchers:new Map(D.fetchers)}:{})}(b,i,h,u,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,f,m,y);x||(I=null,dt(i,l({matches:h},m?{actionData:m}:{},{loaderData:S,errors:T})))}async function pt(r,o,s){let{submission:a,fetcherSubmission:c,replace:h}=void 0===s?{}:s;o.revalidate&&(B=!0);let d=f(r.location,o.location,{_isRedirect:!0});if(u(d,"Expected a location on the redirect navigation"),i){let e=!1;if(o.reloadDocument)e=!0;else if(Z.test(o.location)){const i=t.history.createURL(o.location);e=i.origin!==n.location.origin||null==M(i.pathname,p)}if(e)return void(h?n.location.replace(o.location):n.location.assign(o.location))}I=null;let g=!0===h?e.Replace:e.Push,{formMethod:m,formAction:v,formEncType:y}=r.navigation;!a&&!c&&m&&v&&y&&(a=Pt(r.navigation));let b=a||c;if(K.has(o.status)&&b&&kt(b.formMethod))await ft(g,d,{submission:l({},b,{formAction:o.location}),preventScrollReset:L});else{let t=Lt(d,a);await ft(g,d,{overrideNavigation:t,fetcherSubmission:c,preventScrollReset:L})}}async function wt(e,n,i,r,s){let a=await Promise.all([...i.map((t=>ut("loader",s,t,n,c,o,p,g.v7_relativeSplatPath))),...r.map((e=>{if(e.matches&&e.match&&e.controller)return ut("loader",ht(t.history,e.path,e.controller.signal),e.match,e.matches,c,o,p,g.v7_relativeSplatPath);return{type:v.error,error:bt(404,{pathname:e.path})}}))]),l=a.slice(0,i.length),u=a.slice(i.length);return await Promise.all([Ot(e,i,l,l.map((()=>s.signal)),!1,D.loaderData),Ot(e,r.map((t=>t.match)),u,r.map((t=>t.controller?t.controller.signal:null)),!0)]),{results:a,loaderResults:l,fetcherResults:u}}function Tt(){B=!0,U.push(...Gt()),X.forEach(((t,e)=>{z.has(e)&&(V.push(e),Nt(e))}))}function Et(t,e,n){void 0===n&&(n={}),D.fetchers.set(t,e),ct({fetchers:new Map(D.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function It(t,e,n,i){void 0===i&&(i={});let r=vt(D.matches,e);jt(t),ct({errors:{[r.route.id]:n},fetchers:new Map(D.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Ft(t){return g.v7_fetcherPersist&&(Y.set(t,(Y.get(t)||0)+1),nt.has(t)&&nt.delete(t)),D.fetchers.get(t)||$}function jt(t){let e=D.fetchers.get(t);!z.has(t)||e&&"loading"===e.state&&G.has(t)||Nt(t),X.delete(t),G.delete(t),q.delete(t),nt.delete(t),D.fetchers.delete(t)}function Nt(t){let e=z.get(t);u(e,"Expected fetch controller: "+t),e.abort(),z.delete(t)}function Bt(t){for(let e of t){let t=Rt(Ft(e).data);D.fetchers.set(e,t)}}function Ut(){let t=[],e=!1;for(let n of q){let i=D.fetchers.get(n);u(i,"Expected fetcher: "+n),"loading"===i.state&&(q.delete(n),t.push(n),e=!0)}return Bt(t),e}function Vt(t){let e=[];for(let[n,i]of G)if(i<t){let t=D.fetchers.get(n);u(t,"Expected fetcher: "+n),"loading"===t.state&&(Nt(n),G.delete(n),e.push(n))}return Bt(e),e.length>0}function zt(t){D.blockers.delete(t),at.delete(t)}function Ht(t,e){let n=D.blockers.get(t)||J;u("unblocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"proceeding"===e.state||"blocked"===n.state&&"unblocked"===e.state||"proceeding"===n.state&&"unblocked"===e.state,"Invalid blocker state transition: "+n.state+" -> "+e.state);let i=new Map(D.blockers);i.set(t,e),ct({blockers:i})}function Wt(t){let{currentLocation:e,nextLocation:n,historyAction:i}=t;if(0===at.size)return;at.size>1&&h(!1,"A router only supports one blocker at a time");let r=Array.from(at.entries()),[o,s]=r[r.length-1],a=D.blockers.get(o);return a&&"proceeding"===a.state?void 0:s({currentLocation:e,nextLocation:n,historyAction:i})?o:void 0}function Gt(t){let e=[];return ot.forEach(((n,i)=>{t&&!t(i)||(n.cancel(),e.push(i),ot.delete(i))})),e}function qt(t,e){if(x){return x(t,e.map((t=>function(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}(t,D.loaderData))))||t.key}return t.key}function Xt(t,e){if(w){let n=qt(t,e),i=w[n];if("number"===typeof i)return i}return null}return k={get basename(){return p},get future(){return g},get state(){return D},get routes(){return d},get window(){return n},initialize:function(){if(m=t.history.listen((e=>{let{action:n,location:i,delta:r}=e;if(lt)return void(lt=!1);h(0===at.size||null!=r,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=Wt({currentLocation:D.location,nextLocation:i,historyAction:n});return o&&null!=r?(lt=!0,t.history.go(-1*r),void Ht(o,{state:"blocked",location:i,proceed(){Ht(o,{state:"proceeding",proceed:void 0,reset:void 0,location:i}),t.history.go(r)},reset(){let t=new Map(D.blockers);t.set(o,J),ct({blockers:t})}})):ft(n,i)})),i){!function(t,e){try{let n=t.sessionStorage.getItem(et);if(n){let t=JSON.parse(n);for(let[n,i]of Object.entries(t||{}))i&&Array.isArray(i)&&e.set(n,new Set(i||[]))}}catch(n){}}(n,F);let t=()=>function(t,e){if(e.size>0){let i={};for(let[t,n]of e)i[t]=[...n];try{t.sessionStorage.setItem(et,JSON.stringify(i))}catch(n){h(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(n,F);n.addEventListener("pagehide",t),j=()=>n.removeEventListener("pagehide",t)}return D.initialized||ft(e.Pop,D.location,{initialHydration:!0}),k},subscribe:function(t){return y.add(t),()=>y.delete(t)},enableScrollRestoration:function(t,e,n){if(w=t,C=e,x=n||null,!S&&D.navigation===Q){S=!0;let t=Xt(D.location,D.matches);null!=t&&ct({restoreScrollPosition:t})}return()=>{w=null,C=null,x=null}},navigate:async function n(i,r){if("number"===typeof i)return void t.history.go(i);let o=it(D.location,D.matches,p,g.v7_prependBasename,i,g.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:s,submission:a,error:c}=rt(g.v7_normalizeFormMethod,!1,o,r),u=D.location,h=f(D.location,s,r&&r.state);h=l({},h,t.history.encodeLocation(h));let d=r&&null!=r.replace?r.replace:void 0,m=e.Push;!0===d?m=e.Replace:!1===d||null!=a&&kt(a.formMethod)&&a.formAction===D.location.pathname+D.location.search&&(m=e.Replace);let v=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,y=!0===(r&&r.unstable_flushSync),b=Wt({currentLocation:u,nextLocation:h,historyAction:m});if(!b)return await ft(m,h,{submission:a,pendingError:c,preventScrollReset:v,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:y});Ht(b,{state:"blocked",location:h,proceed(){Ht(b,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),n(i,r)},reset(){let t=new Map(D.blockers);t.set(b,J),ct({blockers:t})}})},fetch:function(e,n,i,a){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");z.has(e)&&Nt(e);let l=!0===(a&&a.unstable_flushSync),h=s||d,f=it(D.location,D.matches,p,g.v7_prependBasename,i,g.v7_relativeSplatPath,n,null==a?void 0:a.relative),m=_(h,f,p);if(!m)return void It(e,n,bt(404,{pathname:f}),{flushSync:l});let{path:v,submission:y,error:b}=rt(g.v7_normalizeFormMethod,!0,f,a);if(b)return void It(e,n,b,{flushSync:l});let w=Dt(m,v);L=!0===(a&&a.preventScrollReset),y&&kt(y.formMethod)?async function(e,n,i,r,a,l,h){if(Tt(),X.delete(e),!r.route.action&&!r.route.lazy){let t=bt(405,{method:h.formMethod,pathname:i,routeId:n});return void It(e,n,t,{flushSync:l})}let f=D.fetchers.get(e);Et(e,function(t,e){let n={state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0};return n}(h,f),{flushSync:l});let m=new AbortController,v=ht(t.history,i,m.signal,h);z.set(e,m);let y=H,b=await ut("action",v,r,a,c,o,p,g.v7_relativeSplatPath);if(v.signal.aborted)return void(z.get(e)===m&&z.delete(e));if(g.v7_fetcherPersist&&nt.has(e)){if(St(b)||Ct(b))return void Et(e,Rt(void 0))}else{if(St(b))return z.delete(e),W>y?void Et(e,Rt(void 0)):(q.add(e),Et(e,Mt(h)),pt(D,b,{fetcherSubmission:h}));if(Ct(b))return void It(e,n,b.error)}if(xt(b))throw bt(400,{type:"defer-action"});let w=D.navigation.location||D.location,x=ht(t.history,w,m.signal),C=s||d,S="idle"!==D.navigation.state?_(C,D.navigation.location,p):D.matches;u(S,"Didn't find any matches after fetcher action");let T=++H;G.set(e,T);let E=Mt(h,b.data);D.fetchers.set(e,E);let[k,O]=st(t.history,D,S,h,w,!1,B,U,V,nt,X,q,C,p,{[r.route.id]:b.data},void 0);O.filter((t=>t.key!==e)).forEach((t=>{let e=t.key,n=D.fetchers.get(e),i=Mt(void 0,n?n.data:void 0);D.fetchers.set(e,i),z.has(e)&&Nt(e),t.controller&&z.set(e,t.controller)})),ct({fetchers:new Map(D.fetchers)});let A=()=>O.forEach((t=>Nt(t.key)));m.signal.addEventListener("abort",A);let{results:L,loaderResults:M,fetcherResults:R}=await wt(D.matches,S,k,O,x);if(m.signal.aborted)return;m.signal.removeEventListener("abort",A),G.delete(e),z.delete(e),O.forEach((t=>z.delete(t.key)));let F=_t(L);if(F){if(F.idx>=k.length){let t=O[F.idx-k.length].key;q.add(t)}return pt(D,F.result)}let{loaderData:j,errors:N}=gt(D,D.matches,k,M,void 0,O,R,ot);if(D.fetchers.has(e)){let t=Rt(b.data);D.fetchers.set(e,t)}Vt(T),"loading"===D.navigation.state&&T>W?(u(P,"Expected pending action"),I&&I.abort(),dt(D.navigation.location,{matches:S,loaderData:j,errors:N,fetchers:new Map(D.fetchers)})):(ct({errors:N,loaderData:mt(D.loaderData,j,S,N),fetchers:new Map(D.fetchers)}),B=!1)}(e,n,v,w,m,l,y):(X.set(e,{routeId:n,path:v}),async function(e,n,i,r,s,a,l){let h=D.fetchers.get(e);Et(e,Mt(l,h?h.data:void 0),{flushSync:a});let d=new AbortController,f=ht(t.history,i,d.signal);z.set(e,d);let m=H,v=await ut("loader",f,r,s,c,o,p,g.v7_relativeSplatPath);xt(v)&&(v=await At(v,f.signal,!0)||v);z.get(e)===d&&z.delete(e);if(f.signal.aborted)return;if(nt.has(e))return void Et(e,Rt(void 0));if(St(v))return W>m?void Et(e,Rt(void 0)):(q.add(e),void await pt(D,v));if(Ct(v))return void It(e,n,v.error);u(!xt(v),"Unhandled fetcher deferred data"),Et(e,Rt(v.data))}(e,n,v,w,m,l,y))},revalidate:function(){Tt(),ct({revalidation:"loading"}),"submitting"!==D.navigation.state&&("idle"!==D.navigation.state?ft(P||D.historyAction,D.navigation.location,{overrideNavigation:D.navigation}):ft(D.historyAction,D.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:Ft,deleteFetcher:function(t){if(g.v7_fetcherPersist){let e=(Y.get(t)||0)-1;e<=0?(Y.delete(t),nt.add(t)):Y.set(t,e)}else jt(t);ct({fetchers:new Map(D.fetchers)})},dispose:function(){m&&m(),j&&j(),y.clear(),I&&I.abort(),D.fetchers.forEach(((t,e)=>jt(e))),D.blockers.forEach(((t,e)=>zt(e)))},getBlocker:function(t,e){let n=D.blockers.get(t)||J;return at.get(t)!==e&&at.set(t,e),n},deleteBlocker:zt,_internalFetchControllers:z,_internalActiveDeferreds:ot,_internalSetRoutes:function(t){c={},s=b(t,o,void 0,c)}},k}Symbol("deferred");function it(t,e,n,i,r,o,s,a){let l,c;if(s){l=[];for(let t of e)if(l.push(t),t.route.id===s){c=t;break}}else l=e,c=e[e.length-1];let u=j(r||".",function(t,e){let n=F(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}(l,o),M(t.pathname,n)||t.pathname,"path"===a);return null==r&&(u.search=t.search,u.hash=t.hash),null!=r&&""!==r&&"."!==r||!c||!c.route.index||It(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i&&"/"!==n&&(u.pathname="/"===u.pathname?n:N([n,u.pathname])),p(u)}function rt(t,e,n,i){if(!i||!function(t){return null!=t&&("formData"in t&&null!=t.formData||"body"in t&&void 0!==t.body)}(i))return{path:n};if(i.formMethod&&!Et(i.formMethod))return{path:n,error:bt(405,{method:i.formMethod})};let r,o,s=()=>({path:n,error:bt(400,{type:"invalid-body"})}),a=i.formMethod||"get",l=t?a.toUpperCase():a.toLowerCase(),c=wt(n);if(void 0!==i.body){if("text/plain"===i.formEncType){if(!kt(l))return s();let t="string"===typeof i.body?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce(((t,e)=>{let[n,i]=e;return""+t+n+"="+i+"\n"}),""):String(i.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:i.formEncType,formData:void 0,json:void 0,text:t}}}if("application/json"===i.formEncType){if(!kt(l))return s();try{let t="string"===typeof i.body?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:i.formEncType,formData:void 0,json:t,text:void 0}}}catch(f){return s()}}}if(u("function"===typeof FormData,"FormData is not available in this environment"),i.formData)r=dt(i.formData),o=i.formData;else if(i.body instanceof FormData)r=dt(i.body),o=i.body;else if(i.body instanceof URLSearchParams)r=i.body,o=ft(r);else if(null==i.body)r=new URLSearchParams,o=new FormData;else try{r=new URLSearchParams(i.body),o=ft(r)}catch(f){return s()}let h={formMethod:l,formAction:c,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(kt(h.formMethod))return{path:n,submission:h};let d=g(n);return e&&d.search&&It(d.search)&&r.append("index",""),d.search="?"+r,{path:p(d),submission:h}}function ot(t,e){let n=t;if(e){let i=t.findIndex((t=>t.route.id===e));i>=0&&(n=t.slice(0,i))}return n}function st(t,e,n,i,r,o,s,a,c,u,h,d,f,p,g,m){let v=m?Object.values(m)[0]:g?Object.values(g)[0]:void 0,y=t.createURL(e.location),b=t.createURL(r),w=m?Object.keys(m)[0]:void 0,x=ot(n,w).filter(((t,n)=>{let{route:r}=t;if(r.lazy)return!0;if(null==r.loader)return!1;if(o)return!!r.loader.hydrate||void 0===e.loaderData[r.id]&&(!e.errors||void 0===e.errors[r.id]);if(function(t,e,n){let i=!e||n.route.id!==e.route.id,r=void 0===t[n.route.id];return i||r}(e.loaderData,e.matches[n],t)||a.some((e=>e===t.route.id)))return!0;let c=e.matches[n],u=t;return lt(t,l({currentUrl:y,currentParams:c.params,nextUrl:b,nextParams:u.params},i,{actionResult:v,defaultShouldRevalidate:s||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||at(c,u)}))})),C=[];return h.forEach(((t,r)=>{if(o||!n.some((e=>e.route.id===t.routeId))||u.has(r))return;let a=_(f,t.path,p);if(!a)return void C.push({key:r,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let h=e.fetchers.get(r),g=Dt(a,t.path),m=!1;m=!d.has(r)&&(!!c.includes(r)||(h&&"idle"!==h.state&&void 0===h.data?s:lt(g,l({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},i,{actionResult:v,defaultShouldRevalidate:s})))),m&&C.push({key:r,routeId:t.routeId,path:t.path,matches:a,match:g,controller:new AbortController})})),[x,C]}function at(t,e){let n=t.route.path;return t.pathname!==e.pathname||null!=n&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function lt(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if("boolean"===typeof n)return n}return e.defaultShouldRevalidate}async function ct(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let r=n[t.id];u(r,"No route found in manifest");let o={};for(let s in i){let t=void 0!==r[s]&&"hasErrorBoundary"!==s;h(!t,'Route "'+r.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),t||y.has(s)||(o[s]=i[s])}Object.assign(r,o),Object.assign(r,l({},e(r),{lazy:void 0}))}async function ut(t,e,n,i,r,o,s,a,l){let c,h,d;void 0===l&&(l={});let f=t=>{let i,r=new Promise(((t,e)=>i=e));return d=()=>i(),e.signal.addEventListener("abort",d),Promise.race([t({request:e,params:n.params,context:l.requestContext}),r])};try{let i=n.route[t];if(n.route.lazy)if(i){let t,e=await Promise.all([f(i).catch((e=>{t=e})),ct(n.route,o,r)]);if(t)throw t;h=e[0]}else{if(await ct(n.route,o,r),i=n.route[t],!i){if("action"===t){let t=new URL(e.url),i=t.pathname+t.search;throw bt(405,{method:e.method,pathname:i,routeId:n.route.id})}return{type:v.data,data:void 0}}h=await f(i)}else{if(!i){let t=new URL(e.url);throw bt(404,{pathname:t.pathname+t.search})}h=await f(i)}u(void 0!==h,"You defined "+("action"===t?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`.")}catch(m){c=v.error,h=m}finally{d&&e.signal.removeEventListener("abort",d)}if(Tt(h)){let t,r=h.status;if(Y.has(r)){let t=h.headers.get("Location");if(u(t,"Redirects returned/thrown from loaders/actions must have a Location header"),Z.test(t)){if(!l.isStaticRequest){let n=new URL(e.url),i=t.startsWith("//")?new URL(n.protocol+t):new URL(t),r=null!=M(i.pathname,s);i.origin===n.origin&&r&&(t=i.pathname+i.search+i.hash)}}else t=it(new URL(e.url),i.slice(0,i.indexOf(n)+1),s,!0,t,a);if(l.isStaticRequest)throw h.headers.set("Location",t),h;return{type:v.redirect,status:r,location:t,revalidate:null!==h.headers.get("X-Remix-Revalidate"),reloadDocument:null!==h.headers.get("X-Remix-Reload-Document")}}if(l.isRouteRequest){throw{type:c===v.error?v.error:v.data,response:h}}try{let e=h.headers.get("Content-Type");t=e&&/\bapplication\/json\b/.test(e)?null==h.body?null:await h.json():await h.text()}catch(m){return{type:v.error,error:m}}return c===v.error?{type:c,error:new z(r,h.statusText,t),headers:h.headers}:{type:v.data,data:t,statusCode:h.status,headers:h.headers}}return c===v.error?{type:c,error:h}:function(t){let e=t;return e&&"object"===typeof e&&"object"===typeof e.data&&"function"===typeof e.subscribe&&"function"===typeof e.cancel&&"function"===typeof e.resolveData}(h)?{type:v.deferred,deferredData:h,statusCode:null==(p=h.init)?void 0:p.status,headers:(null==(g=h.init)?void 0:g.headers)&&new Headers(h.init.headers)}:{type:v.data,data:h};var p,g}function ht(t,e,n,i){let r=t.createURL(wt(e)).toString(),o={signal:n};if(i&&kt(i.formMethod)){let{formMethod:t,formEncType:e}=i;o.method=t.toUpperCase(),"application/json"===e?(o.headers=new Headers({"Content-Type":e}),o.body=JSON.stringify(i.json)):"text/plain"===e?o.body=i.text:"application/x-www-form-urlencoded"===e&&i.formData?o.body=dt(i.formData):o.body=i.formData}return new Request(r,o)}function dt(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,"string"===typeof i?i:i.name);return e}function ft(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function pt(t,e,n,i,r){let o,s={},a=null,l=!1,c={};return n.forEach(((n,h)=>{let d=e[h].route.id;if(u(!St(n),"Cannot handle redirect results in processLoaderData"),Ct(n)){let e=vt(t,d),r=n.error;i&&(r=Object.values(i)[0],i=void 0),a=a||{},null==a[e.route.id]&&(a[e.route.id]=r),s[d]=void 0,l||(l=!0,o=H(n.error)?n.error.status:500),n.headers&&(c[d]=n.headers)}else xt(n)?(r.set(d,n.deferredData),s[d]=n.deferredData.data):s[d]=n.data,null==n.statusCode||200===n.statusCode||l||(o=n.statusCode),n.headers&&(c[d]=n.headers)})),i&&(a=i,s[Object.keys(i)[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:c}}function gt(t,e,n,i,r,o,s,a){let{loaderData:c,errors:h}=pt(e,n,i,r,a);for(let d=0;d<o.length;d++){let{key:e,match:n,controller:i}=o[d];u(void 0!==s&&void 0!==s[d],"Did not find corresponding fetcher result");let r=s[d];if(!i||!i.signal.aborted)if(Ct(r)){let i=vt(t.matches,null==n?void 0:n.route.id);h&&h[i.route.id]||(h=l({},h,{[i.route.id]:r.error})),t.fetchers.delete(e)}else if(St(r))u(!1,"Unhandled fetcher revalidation redirect");else if(xt(r))u(!1,"Unhandled fetcher deferred data");else{let n=Rt(r.data);t.fetchers.set(e,n)}}return{loaderData:c,errors:h}}function mt(t,e,n,i){let r=l({},e);for(let o of n){let n=o.route.id;if(e.hasOwnProperty(n)?void 0!==e[n]&&(r[n]=e[n]):void 0!==t[n]&&o.route.loader&&(r[n]=t[n]),i&&i.hasOwnProperty(n))break}return r}function vt(t,e){return(e?t.slice(0,t.findIndex((t=>t.route.id===e))+1):[...t]).reverse().find((t=>!0===t.route.hasErrorBoundary))||t[0]}function yt(t){let e=1===t.length?t[0]:t.find((t=>t.index||!t.path||"/"===t.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function bt(t,e){let{pathname:n,routeId:i,method:r,type:o}=void 0===e?{}:e,s="Unknown Server Error",a="Unknown @remix-run/router error";return 400===t?(s="Bad Request",r&&n&&i?a="You made a "+r+' request to "'+n+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o?a="defer() is not supported in actions":"invalid-body"===o&&(a="Unable to encode submission body")):403===t?(s="Forbidden",a='Route "'+i+'" does not match URL "'+n+'"'):404===t?(s="Not Found",a='No route matches URL "'+n+'"'):405===t&&(s="Method Not Allowed",r&&n&&i?a="You made a "+r.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':r&&(a='Invalid request method "'+r.toUpperCase()+'"')),new z(t||500,s,new Error(a),!0)}function _t(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(St(n))return{result:n,idx:e}}}function wt(t){return p(l({},"string"===typeof t?g(t):t,{hash:""}))}function xt(t){return t.type===v.deferred}function Ct(t){return t.type===v.error}function St(t){return(t&&t.type)===v.redirect}function Tt(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"object"===typeof t.headers&&"undefined"!==typeof t.body}function Et(t){return X.has(t.toLowerCase())}function kt(t){return G.has(t.toLowerCase())}async function Ot(t,e,n,i,r,o){for(let s=0;s<n.length;s++){let a=n[s],l=e[s];if(!l)continue;let c=t.find((t=>t.route.id===l.route.id)),h=null!=c&&!at(c,l)&&void 0!==(o&&o[l.route.id]);if(xt(a)&&(r||h)){let t=i[s];u(t,"Expected an AbortSignal for revalidating fetcher deferred result"),await At(a,t,r).then((t=>{t&&(n[s]=t||n[s])}))}}}async function At(t,e,n){if(void 0===n&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:v.data,data:t.deferredData.unwrappedData}}catch(i){return{type:v.error,error:i}}return{type:v.data,data:t.deferredData.data}}}function It(t){return new URLSearchParams(t).getAll("index").some((t=>""===t))}function Dt(t,e){let n="string"===typeof e?g(e).search:e.search;if(t[t.length-1].route.index&&It(n||""))return t[t.length-1];let i=F(t);return i[i.length-1]}function Pt(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:o,json:s}=t;if(e&&n&&i)return null!=r?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r}:null!=o?{formMethod:e,formAction:n,formEncType:i,formData:o,json:void 0,text:void 0}:void 0!==s?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:s,text:void 0}:void 0}function Lt(t,e){if(e){return{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}return{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Mt(t,e){if(t){return{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Rt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ft(){return Ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ft.apply(this,arguments)}const jt=i.createContext(null);const Nt=i.createContext(null);const Bt=i.createContext(null);const Ut=i.createContext(null);const Vt=i.createContext({outlet:null,matches:[],isDataRoute:!1});const zt=i.createContext(null);function Ht(){return null!=i.useContext(Ut)}function Wt(){return Ht()||u(!1),i.useContext(Ut).location}function Gt(t,n,r,o){Ht()||u(!1);let{navigator:s}=i.useContext(Bt),{matches:a}=i.useContext(Vt),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=Wt();if(n){var p;let t="string"===typeof n?g(n):n;"/"===h||(null==(p=t.pathname)?void 0:p.startsWith(h))||u(!1),d=t}else d=f;let m=d.pathname||"/",v=_(t,{pathname:"/"===h?m:m.slice(h.length)||"/"});let y=Qt(v&&v.map((t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:N([h,s.encodeLocation?s.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:N([h,s.encodeLocation?s.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),a,r,o);return n&&y?i.createElement(Ut.Provider,{value:{location:Ft({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},y):y}function qt(){let t=function(){var t;let e=i.useContext(zt),n=Jt($t.UseRouteError),r=Zt($t.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=H(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},e),n?i.createElement("pre",{style:o},n):null,null)}const Xt=i.createElement(qt,null);class Yt extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?i.createElement(Vt.Provider,{value:this.props.routeContext},i.createElement(zt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kt(t){let{routeContext:e,match:n,children:r}=t,o=i.useContext(jt);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Vt.Provider,{value:e},r)}function Qt(t,e,n,r){var o;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==t){var s;if(null==(s=n)||!s.errors)return null;t=n.matches}let a=t,l=null==(o=n)?void 0:o.errors;if(null!=l){let t=a.findIndex((t=>t.route.id&&(null==l?void 0:l[t.route.id])));t>=0||u(!1),a=a.slice(0,Math.min(a.length,t+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let t=a[i];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=i),t.route.id){let{loaderData:e,errors:i}=n,r=t.route.loader&&void 0===e[t.route.id]&&(!i||void 0===i[t.route.id]);if(t.route.lazy||r){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((t,r,o)=>{let s,u=!1,d=null,f=null;var p;n&&(s=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||Xt,c&&(h<0&&0===o?(p="route-fallback",!1||te[p]||(te[p]=!0),u=!0,f=null):h===o&&(u=!0,f=r.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,o+1)),m=()=>{let e;return e=s?d:u?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:t,i.createElement(Kt,{match:r,routeContext:{outlet:t,matches:g,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(Yt,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var $t=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($t||{});function Jt(t){let e=i.useContext(Nt);return e||u(!1),e}function Zt(t){let e=function(t){let e=i.useContext(Vt);return e||u(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||u(!1),n.route.id}const te={};r.startTransition;function ee(t){let{basename:n="/",children:r=null,location:o,navigationType:s=e.Pop,navigator:a,static:l=!1,future:c}=t;Ht()&&u(!1);let h=n.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:h,navigator:a,static:l,future:Ft({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof o&&(o=g(o));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=o,b=i.useMemo((()=>{let t=M(f,h);return null==t?null:{location:{pathname:t,search:p,hash:m,state:v,key:y},navigationType:s}}),[h,f,p,m,v,y,s]);return null==b?null:i.createElement(Bt.Provider,{value:d},i.createElement(Ut.Provider,{children:r,value:b}))}new Promise((()=>{}));i.Component;function ne(t){let e={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(e,{element:i.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:i.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:i.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ie.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(TT){}function re(){var t;let e=null==(t=window)?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ie({},e,{errors:oe(e.errors)})),e}function oe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,r]of e)if(r&&"RouteErrorResponse"===r.__type)n[i]=new z(r.status,r.statusText,r.data,!0===r.internal);else if(r&&"Error"===r.__type){if(r.__subType){let t=window[r.__subType];if("function"===typeof t)try{let e=new t(r.message);e.stack="",n[i]=e}catch(TT){}}if(null==n[i]){let t=new Error(r.message);t.stack="",n[i]=t}}else n[i]=r;return n}const se=i.createContext({isTransitioning:!1});const ae=i.createContext(new Map);const le=r.startTransition,ce=a.flushSync;r.useId;function ue(t){ce?ce(t):t()}class he{constructor(){this.status="pending",this.promise=new Promise(((t,e)=>{this.resolve=e=>{"pending"===this.status&&(this.status="resolved",t(e))},this.reject=t=>{"pending"===this.status&&(this.status="rejected",e(t))}}))}}function de(t){let{fallbackElement:e,router:n,future:r}=t,[o,s]=i.useState(n.state),[a,l]=i.useState(),[c,u]=i.useState({isTransitioning:!1}),[h,d]=i.useState(),[f,p]=i.useState(),[g,m]=i.useState(),v=i.useRef(new Map),{v7_startTransition:y}=r||{},b=i.useCallback((t=>{y?function(t){le?le(t):t()}(t):t()}),[y]),_=i.useCallback(((t,e)=>{let{deletedFetchers:i,unstable_flushSync:r,unstable_viewTransitionOpts:o}=e;i.forEach((t=>v.current.delete(t))),t.fetchers.forEach(((t,e)=>{void 0!==t.data&&v.current.set(e,t.data)}));let a=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(o&&!a){if(r){ue((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let e=n.window.document.startViewTransition((()=>{ue((()=>s(t)))}));return e.finished.finally((()=>{ue((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void ue((()=>p(e)))}f?(h&&h.resolve(),f.skipTransition(),m({state:t,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(l(t),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else r?ue((()=>s(t))):b((()=>s(t)))}),[n.window,f,h,v,b]);i.useLayoutEffect((()=>n.subscribe(_)),[n,_]),i.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new he)}),[c]),i.useEffect((()=>{if(h&&a&&n.window){let t=a,e=h.promise,i=n.window.document.startViewTransition((async()=>{b((()=>s(t))),await e}));i.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(i)}}),[b,a,h,n.window]),i.useEffect((()=>{h&&a&&o.location.key===a.location.key&&h.resolve()}),[h,f,o.location,a]),i.useEffect((()=>{!c.isTransitioning&&g&&(l(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))}),[c.isTransitioning,g]),i.useEffect((()=>{}),[]);let w=i.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:t=>n.navigate(t),push:(t,e,i)=>n.navigate(t,{state:e,preventScrollReset:null==i?void 0:i.preventScrollReset}),replace:(t,e,i)=>n.navigate(t,{replace:!0,state:e,preventScrollReset:null==i?void 0:i.preventScrollReset})})),[n]),x=n.basename||"/",C=i.useMemo((()=>({router:n,navigator:w,static:!1,basename:x})),[n,w,x]);return i.createElement(i.Fragment,null,i.createElement(jt.Provider,{value:C},i.createElement(Nt.Provider,{value:o},i.createElement(ae.Provider,{value:v.current},i.createElement(se.Provider,{value:c},i.createElement(ee,{basename:x,location:o.location,navigationType:o.historyAction,navigator:w,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},o.initialized||n.future.v7_partialHydration?i.createElement(fe,{routes:n.routes,future:n.future,state:o}):e))))),null)}function fe(t){let{routes:e,future:n,state:i}=t;return Gt(e,void 0,i,n)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var pe,ge;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pe||(pe={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(ge||(ge={}));const me=t=>{t&&t instanceof Function&&n.e(592).then(n.bind(n,592)).then((e=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:s}=e;n(t),i(t),r(t),o(t),s(t)}))};var ve="top",ye="bottom",be="right",_e="left",we="auto",xe=[ve,ye,be,_e],Ce="start",Se="end",Te="clippingParents",Ee="viewport",ke="popper",Oe="reference",Ae=xe.reduce((function(t,e){return t.concat([e+"-"+Ce,e+"-"+Se])}),[]),Ie=[].concat(xe,[we]).reduce((function(t,e){return t.concat([e,e+"-"+Ce,e+"-"+Se])}),[]),De="beforeRead",Pe="read",Le="afterRead",Me="beforeMain",Re="main",Fe="afterMain",je="beforeWrite",Ne="write",Be="afterWrite",Ue=[De,Pe,Le,Me,Re,Fe,je,Ne,Be];function Ve(t){return t?(t.nodeName||"").toLowerCase():null}function ze(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function He(t){return t instanceof ze(t).Element||t instanceof Element}function We(t){return t instanceof ze(t).HTMLElement||t instanceof HTMLElement}function Ge(t){return"undefined"!==typeof ShadowRoot&&(t instanceof ze(t).ShadowRoot||t instanceof ShadowRoot)}const qe={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];We(r)&&Ve(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});We(i)&&Ve(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function Xe(t){return t.split("-")[0]}var Ye=Math.max,Ke=Math.min,Qe=Math.round;function $e(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Je(){return!/^((?!chrome|android).)*safari/i.test($e())}function Ze(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&We(t)&&(r=t.offsetWidth>0&&Qe(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Qe(i.height)/t.offsetHeight||1);var s=(He(t)?ze(t):window).visualViewport,a=!Je()&&n,l=(i.left+(a&&s?s.offsetLeft:0))/r,c=(i.top+(a&&s?s.offsetTop:0))/o,u=i.width/r,h=i.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function tn(t){var e=Ze(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function en(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ge(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function nn(t){return ze(t).getComputedStyle(t)}function rn(t){return["table","td","th"].indexOf(Ve(t))>=0}function on(t){return((He(t)?t.ownerDocument:t.document)||window.document).documentElement}function sn(t){return"html"===Ve(t)?t:t.assignedSlot||t.parentNode||(Ge(t)?t.host:null)||on(t)}function an(t){return We(t)&&"fixed"!==nn(t).position?t.offsetParent:null}function ln(t){for(var e=ze(t),n=an(t);n&&rn(n)&&"static"===nn(n).position;)n=an(n);return n&&("html"===Ve(n)||"body"===Ve(n)&&"static"===nn(n).position)?e:n||function(t){var e=/firefox/i.test($e());if(/Trident/i.test($e())&&We(t)&&"fixed"===nn(t).position)return null;var n=sn(t);for(Ge(n)&&(n=n.host);We(n)&&["html","body"].indexOf(Ve(n))<0;){var i=nn(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function cn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function un(t,e,n){return Ye(t,Ke(e,n))}function hn(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function dn(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const fn={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Xe(n.placement),l=cn(a),c=[_e,be].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(t,e){return hn("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:dn(t,xe))}(r.padding,n),h=tn(o),d="y"===l?ve:_e,f="y"===l?ye:be,p=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],g=s[l]-n.rects.reference[l],m=ln(o),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,y=p/2-g/2,b=u[d],_=v-h[c]-u[f],w=v/2-h[c]/2+y,x=un(b,w,_),C=l;n.modifiersData[i]=((e={})[C]=x,e.centerOffset=x-w,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i)))&&en(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pn(t){return t.split("-")[1]}var gn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mn(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=s.x,f=void 0===d?0:d,p=s.y,g=void 0===p?0:p,m="function"===typeof u?u({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=_e,_=ve,w=window;if(c){var x=ln(n),C="clientHeight",S="clientWidth";if(x===ze(n)&&"static"!==nn(x=on(n)).position&&"absolute"===a&&(C="scrollHeight",S="scrollWidth"),r===ve||(r===_e||r===be)&&o===Se)_=ye,g-=(h&&x===w&&w.visualViewport?w.visualViewport.height:x[C])-i.height,g*=l?1:-1;if(r===_e||(r===ve||r===ye)&&o===Se)b=be,f-=(h&&x===w&&w.visualViewport?w.visualViewport.width:x[S])-i.width,f*=l?1:-1}var T,E=Object.assign({position:a},c&&gn),k=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Qe(n*r)/r||0,y:Qe(i*r)/r||0}}({x:f,y:g},ze(n)):{x:f,y:g};return f=k.x,g=k.y,l?Object.assign({},E,((T={})[_]=y?"0":"",T[b]=v?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",T)):Object.assign({},E,((e={})[_]=y?g+"px":"",e[b]=v?f+"px":"",e.transform="",e))}const vn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:Xe(e.placement),variation:pn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,mn(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,mn(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var yn={passive:!0};const bn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=ze(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,yn)})),a&&l.addEventListener("resize",n.update,yn),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,yn)})),a&&l.removeEventListener("resize",n.update,yn)}},data:{}};var _n={left:"right",right:"left",bottom:"top",top:"bottom"};function wn(t){return t.replace(/left|right|bottom|top/g,(function(t){return _n[t]}))}var xn={start:"end",end:"start"};function Cn(t){return t.replace(/start|end/g,(function(t){return xn[t]}))}function Sn(t){var e=ze(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Tn(t){return Ze(on(t)).left+Sn(t).scrollLeft}function En(t){var e=nn(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function kn(t){return["html","body","#document"].indexOf(Ve(t))>=0?t.ownerDocument.body:We(t)&&En(t)?t:kn(sn(t))}function On(t,e){var n;void 0===e&&(e=[]);var i=kn(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),o=ze(i),s=r?[o].concat(o.visualViewport||[],En(i)?i:[]):i,a=e.concat(s);return r?a:a.concat(On(sn(s)))}function An(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function In(t,e,n){return e===Ee?An(function(t,e){var n=ze(t),i=on(t),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var c=Je();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+Tn(t),y:l}}(t,n)):He(e)?function(t,e){var n=Ze(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):An(function(t){var e,n=on(t),i=Sn(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=Ye(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Ye(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Tn(t),l=-i.scrollTop;return"rtl"===nn(r||n).direction&&(a+=Ye(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(on(t)))}function Dn(t,e,n,i){var r="clippingParents"===e?function(t){var e=On(sn(t)),n=["absolute","fixed"].indexOf(nn(t).position)>=0&&We(t)?ln(t):t;return He(n)?e.filter((function(t){return He(t)&&en(t,n)&&"body"!==Ve(t)})):[]}(t):[].concat(e),o=[].concat(r,[n]),s=o[0],a=o.reduce((function(e,n){var r=In(t,n,i);return e.top=Ye(r.top,e.top),e.right=Ke(r.right,e.right),e.bottom=Ke(r.bottom,e.bottom),e.left=Ye(r.left,e.left),e}),In(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Pn(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?Xe(r):null,s=r?pn(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case ve:e={x:a,y:n.y-i.height};break;case ye:e={x:a,y:n.y+n.height};break;case be:e={x:n.x+n.width,y:l};break;case _e:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?cn(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case Ce:e[c]=e[c]-(n[u]/2-i[u]/2);break;case Se:e[c]=e[c]+(n[u]/2-i[u]/2)}}return e}function Ln(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.strategy,s=void 0===o?t.strategy:o,a=n.boundary,l=void 0===a?Te:a,c=n.rootBoundary,u=void 0===c?Ee:c,h=n.elementContext,d=void 0===h?ke:h,f=n.altBoundary,p=void 0!==f&&f,g=n.padding,m=void 0===g?0:g,v=hn("number"!==typeof m?m:dn(m,xe)),y=d===ke?Oe:ke,b=t.rects.popper,_=t.elements[p?y:d],w=Dn(He(_)?_:_.contextElement||on(t.elements.popper),l,u,s),x=Ze(t.elements.reference),C=Pn({reference:x,element:b,strategy:"absolute",placement:r}),S=An(Object.assign({},b,C)),T=d===ke?S:x,E={top:w.top-T.top+v.top,bottom:T.bottom-w.bottom+v.bottom,left:w.left-T.left+v.left,right:T.right-w.right+v.right},k=t.modifiersData.offset;if(d===ke&&k){var O=k[r];Object.keys(E).forEach((function(t){var e=[be,ye].indexOf(t)>=0?1:-1,n=[ve,ye].indexOf(t)>=0?"y":"x";E[t]+=O[n]*e}))}return E}const Mn={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,v=Xe(m),y=l||(v===m||!p?[wn(m)]:function(t){if(Xe(t)===we)return[];var e=wn(t);return[Cn(t),e,Cn(e)]}(m)),b=[m].concat(y).reduce((function(t,n){return t.concat(Xe(n)===we?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Ie:l,u=pn(i),h=u?a?Ae:Ae.filter((function(t){return pn(t)===u})):xe,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=Ln(t,{placement:n,boundary:r,rootBoundary:o,padding:s})[Xe(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),_=e.rects.reference,w=e.rects.popper,x=new Map,C=!0,S=b[0],T=0;T<b.length;T++){var E=b[T],k=Xe(E),O=pn(E)===Ce,A=[ve,ye].indexOf(k)>=0,I=A?"width":"height",D=Ln(e,{placement:E,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),P=A?O?be:_e:O?ye:ve;_[I]>w[I]&&(P=wn(P));var L=wn(P),M=[];if(o&&M.push(D[k]<=0),a&&M.push(D[P]<=0,D[L]<=0),M.every((function(t){return t}))){S=E,C=!1;break}x.set(E,M)}if(C)for(var R=function(t){var e=b.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return S=e,"break"},F=p?3:1;F>0;F--){if("break"===R(F))break}e.placement!==S&&(e.modifiersData[i]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Rn(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fn(t){return[ve,be,ye,_e].some((function(e){return t[e]>=0}))}const jn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=Ln(e,{elementContext:"reference"}),a=Ln(e,{altBoundary:!0}),l=Rn(s,i),c=Rn(a,r,o),u=Fn(l),h=Fn(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}};const Nn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,s=Ie.reduce((function(t,n){return t[n]=function(t,e,n){var i=Xe(t),r=[_e,ve].indexOf(i)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[_e,be].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}};const Bn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Pn({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};const Un={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,g=void 0===p?0:p,m=Ln(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=Xe(e.placement),y=pn(e.placement),b=!y,_=cn(v),w="x"===_?"y":"x",x=e.modifiersData.popperOffsets,C=e.rects.reference,S=e.rects.popper,T="function"===typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,E="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(x){if(o){var A,I="y"===_?ve:_e,D="y"===_?ye:be,P="y"===_?"height":"width",L=x[_],M=L+m[I],R=L-m[D],F=f?-S[P]/2:0,j=y===Ce?C[P]:S[P],N=y===Ce?-S[P]:-C[P],B=e.elements.arrow,U=f&&B?tn(B):{width:0,height:0},V=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=V[I],H=V[D],W=un(0,C[P],U[P]),G=b?C[P]/2-F-W-z-E.mainAxis:j-W-z-E.mainAxis,q=b?-C[P]/2+F+W+H+E.mainAxis:N+W+H+E.mainAxis,X=e.elements.arrow&&ln(e.elements.arrow),Y=X?"y"===_?X.clientTop||0:X.clientLeft||0:0,K=null!=(A=null==k?void 0:k[_])?A:0,Q=L+q-K,$=un(f?Ke(M,L+G-K-Y):M,L,f?Ye(R,Q):R);x[_]=$,O[_]=$-L}if(a){var J,Z="x"===_?ve:_e,tt="x"===_?ye:be,et=x[w],nt="y"===w?"height":"width",it=et+m[Z],rt=et-m[tt],ot=-1!==[ve,_e].indexOf(v),st=null!=(J=null==k?void 0:k[w])?J:0,at=ot?it:et-C[nt]-S[nt]-st+E.altAxis,lt=ot?et+C[nt]+S[nt]-st-E.altAxis:rt,ct=f&&ot?function(t,e,n){var i=un(t,e,n);return i>n?n:i}(at,et,lt):un(f?at:it,et,f?lt:rt);x[w]=ct,O[w]=ct-et}e.modifiersData[i]=O}},requiresIfExists:["offset"]};function Vn(t,e,n){void 0===n&&(n=!1);var i=We(e),r=We(e)&&function(t){var e=t.getBoundingClientRect(),n=Qe(e.width)/t.offsetWidth||1,i=Qe(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),o=on(e),s=Ze(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==Ve(e)||En(o))&&(a=function(t){return t!==ze(t)&&We(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:Sn(t);var e}(e)),We(e)?((l=Ze(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Tn(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function zn(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}function Hn(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var Wn={placement:"bottom",modifiers:[],strategy:"absolute"};function Gn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function qn(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?Wn:r;return function(t,e,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wn,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],a=!1,l={state:r,setOptions:function(n){var a="function"===typeof n?n(r.options):n;c(),r.options=Object.assign({},o,r.options,a),r.scrollParents={reference:He(t)?On(t):t.contextElement?On(t.contextElement):[],popper:On(e)};var u=function(t){var e=zn(t);return Ue.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,r.options.modifiers)));return r.orderedModifiers=u.filter((function(t){return t.enabled})),r.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var a=o({state:r,name:e,instance:l,options:i}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var t=r.elements,e=t.reference,n=t.popper;if(Gn(e,n)){r.rects={reference:Vn(e,ln(n),"fixed"===r.options.strategy),popper:tn(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(t){return r.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],s=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof s&&(r=s({state:r,options:u,name:h,instance:l})||r)}else r.reset=!1,i=-1}}},update:Hn((function(){return new Promise((function(t){l.forceUpdate(),t(r)}))})),destroy:function(){c(),a=!0}};if(!Gn(t,e))return l;function c(){s.forEach((function(t){return t()})),s=[]}return l.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var Xn=qn(),Yn=qn({defaultModifiers:[bn,Bn,vn,qe,Nn,Mn,Un,fn,jn]}),Kn=qn({defaultModifiers:[bn,Bn,vn,qe]});const Qn=new Map,$n={set(t,e,n){Qn.has(t)||Qn.set(t,new Map);const i=Qn.get(t);i.has(e)||0===i.size?i.set(e,n):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:(t,e)=>Qn.has(t)&&Qn.get(t).get(e)||null,remove(t,e){if(!Qn.has(t))return;const n=Qn.get(t);n.delete(e),0===n.size&&Qn.delete(t)}},Jn="transitionend",Zn=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>"#".concat(CSS.escape(e))))),t),ti=t=>{t.dispatchEvent(new Event(Jn))},ei=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),ni=t=>ei(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(Zn(t)):null,ii=t=>{if(!ei(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},ri=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),oi=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?oi(t.parentNode):null},si=()=>{},ai=t=>{t.offsetHeight},li=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ci=[],ui=()=>"rtl"===document.documentElement.dir,hi=t=>{var e;e=()=>{const e=li();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(ci.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of ci)t()})),ci.push(e)):e()},di=function(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"function"===typeof t?t(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):e},fi=function(t,e){if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return void di(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let i=!1;const r=n=>{let{target:o}=n;o===e&&(i=!0,e.removeEventListener(Jn,r),di(t))};e.addEventListener(Jn,r),setTimeout((()=>{i||ti(e)}),n)},pi=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return-1===o?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},gi=/[^.]*(?=\..*)\.|.*/,mi=/\..*/,vi=/::\d+$/,yi={};let bi=1;const _i={mouseenter:"mouseover",mouseleave:"mouseout"},wi=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function xi(t,e){return e&&"".concat(e,"::").concat(bi++)||t.uidEvent||bi++}function Ci(t){const e=xi(t);return t.uidEvent=e,yi[e]=yi[e]||{},yi[e]}function Si(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function Ti(t,e,n){const i="string"===typeof e,r=i?n:e||n;let o=Ai(t);return wi.has(o)||(o=t),[i,r,o]}function Ei(t,e,n,i,r){if("string"!==typeof e||!t)return;let[o,s,a]=Ti(e,n,i);if(e in _i){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=Ci(t),c=l[a]||(l[a]={}),u=Si(c,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=xi(s,e.replace(gi,"")),d=o?function(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return Di(r,{delegateTarget:s}),i.oneOff&&Ii.off(t,r.type,e,n),n.apply(s,[r])}}(t,n,s):function(t,e){return function n(i){return Di(i,{delegateTarget:t}),n.oneOff&&Ii.off(t,i.type,e),e.apply(t,[i])}}(t,s);d.delegationSelector=o?n:null,d.callable=s,d.oneOff=r,d.uidEvent=h,c[h]=d,t.addEventListener(a,d,o)}function ki(t,e,n,i,r){const o=Si(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function Oi(t,e,n,i){const r=e[n]||{};for(const[o,s]of Object.entries(r))o.includes(i)&&ki(t,e,n,s.callable,s.delegationSelector)}function Ai(t){return t=t.replace(mi,""),_i[t]||t}const Ii={on(t,e,n,i){Ei(t,e,n,i,!1)},one(t,e,n,i){Ei(t,e,n,i,!0)},off(t,e,n,i){if("string"!==typeof e||!t)return;const[r,o,s]=Ti(e,n,i),a=s!==e,l=Ci(t),c=l[s]||{},u=e.startsWith(".");if("undefined"===typeof o){if(u)for(const n of Object.keys(l))Oi(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(vi,"");a&&!e.includes(r)||ki(t,l,s,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;ki(t,l,s,o,r?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const i=li();let r=null,o=!0,s=!0,a=!1;e!==Ai(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),o=!r.isPropagationStopped(),s=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());const l=Di(new Event(e,{bubbles:o,cancelable:!0}),n);return a&&l.preventDefault(),s&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Di(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[i,r]of Object.entries(e))try{t[i]=r}catch(n){Object.defineProperty(t,i,{configurable:!0,get:()=>r})}return t}function Pi(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function Li(t){return t.replace(/[A-Z]/g,(t=>"-".concat(t.toLowerCase())))}const Mi={setDataAttribute(t,e,n){t.setAttribute("data-bs-".concat(Li(e)),n)},removeDataAttribute(t,e){t.removeAttribute("data-bs-".concat(Li(e)))},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=Pi(t.dataset[i])}return e},getDataAttribute:(t,e)=>Pi(t.getAttribute("data-bs-".concat(Li(e))))};class Ri{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=ei(e)?Mi.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...ei(e)?Mi.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[i,r]of Object.entries(e)){const e=t[i],o=ei(e)?"element":null===(n=e)||void 0===n?"".concat(n):Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(i,'" provided type "').concat(o,'" but expected type "').concat(r,'".'))}var n}}class Fi extends Ri{constructor(t,e){super(),(t=ni(t))&&(this._element=t,this._config=this._getConfig(e),$n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){$n.remove(this._element,this.constructor.DATA_KEY),Ii.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e){fi(t,e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return $n.get(ni(t),this.DATA_KEY)}static getOrCreateInstance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return"bs.".concat(this.NAME)}static get EVENT_KEY(){return".".concat(this.DATA_KEY)}static eventName(t){return"".concat(t).concat(this.EVENT_KEY)}}const ji=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),e=n&&"#"!==n?Zn(n.trim()):null}return e},Ni={find(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(e,t)},children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>"".concat(t,':not([tabindex^="-"])'))).join(",");return this.find(e,t).filter((t=>!ri(t)&&ii(t)))},getSelectorFromElement(t){const e=ji(t);return e&&Ni.findOne(e)?e:null},getElementFromSelector(t){const e=ji(t);return e?Ni.findOne(e):null},getMultipleElementsFromSelector(t){const e=ji(t);return e?Ni.find(e):[]}},Bi=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const n="click.dismiss".concat(t.EVENT_KEY),i=t.NAME;Ii.on(document,n,'[data-bs-dismiss="'.concat(i,'"]'),(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),ri(this))return;const r=Ni.getElementFromSelector(this)||this.closest(".".concat(i));t.getOrCreateInstance(r)[e]()}))},Ui=".".concat("bs.alert"),Vi="close".concat(Ui),zi="closed".concat(Ui);class Hi extends Fi{static get NAME(){return"alert"}close(){if(Ii.trigger(this._element,Vi).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Ii.trigger(this._element,zi),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Hi.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError('No method named "'.concat(t,'"'));e[t](this)}}))}}Bi(Hi,"close"),hi(Hi);const Wi=".".concat("bs.button"),Gi='[data-bs-toggle="button"]',qi="click".concat(Wi).concat(".data-api");class Xi extends Fi{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Xi.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}Ii.on(document,qi,Gi,(t=>{t.preventDefault();const e=t.target.closest(Gi);Xi.getOrCreateInstance(e).toggle()})),hi(Xi);const Yi=".bs.swipe",Ki="touchstart".concat(Yi),Qi="touchmove".concat(Yi),$i="touchend".concat(Yi),Ji="pointerdown".concat(Yi),Zi="pointerup".concat(Yi),tr={endCallback:null,leftCallback:null,rightCallback:null},er={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class nr extends Ri{constructor(t,e){super(),this._element=t,t&&nr.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return tr}static get DefaultType(){return er}static get NAME(){return"swipe"}dispose(){Ii.off(this._element,Yi)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),di(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&di(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ii.on(this._element,Ji,(t=>this._start(t))),Ii.on(this._element,Zi,(t=>this._end(t))),this._element.classList.add("pointer-event")):(Ii.on(this._element,Ki,(t=>this._start(t))),Ii.on(this._element,Qi,(t=>this._move(t))),Ii.on(this._element,$i,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ir=".".concat("bs.carousel"),rr=".data-api",or="next",sr="prev",ar="left",lr="right",cr="slide".concat(ir),ur="slid".concat(ir),hr="keydown".concat(ir),dr="mouseenter".concat(ir),fr="mouseleave".concat(ir),pr="dragstart".concat(ir),gr="load".concat(ir).concat(rr),mr="click".concat(ir).concat(rr),vr="carousel",yr="active",br=".active",_r=".carousel-item",wr=br+_r,xr={ArrowLeft:lr,ArrowRight:ar},Cr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Sr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Tr extends Fi{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ni.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===vr&&this.cycle()}static get Default(){return Cr}static get DefaultType(){return Sr}static get NAME(){return"carousel"}next(){this._slide(or)}nextWhenVisible(){!document.hidden&&ii(this._element)&&this.next()}prev(){this._slide(sr)}pause(){this._isSliding&&ti(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ii.one(this._element,ur,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void Ii.one(this._element,ur,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?or:sr;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Ii.on(this._element,hr,(t=>this._keydown(t))),"hover"===this._config.pause&&(Ii.on(this._element,dr,(()=>this.pause())),Ii.on(this._element,fr,(()=>this._maybeEnableCycle()))),this._config.touch&&nr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of Ni.find(".carousel-item img",this._element))Ii.on(e,pr,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(ar)),rightCallback:()=>this._slide(this._directionToOrder(lr)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new nr(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=xr[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Ni.findOne(br,this._indicatorsElement);e.classList.remove(yr),e.removeAttribute("aria-current");const n=Ni.findOne('[data-bs-slide-to="'.concat(t,'"]'),this._indicatorsElement);n&&(n.classList.add(yr),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const n=this._getActive(),i=t===or,r=e||pi(this._getItems(),n,i,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),s=e=>Ii.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(s(cr).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),ai(r),n.classList.add(l),r.classList.add(l);this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(yr),n.classList.remove(yr,c,l),this._isSliding=!1,s(ur)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ni.findOne(wr,this._element)}_getItems(){return Ni.find(_r,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ui()?t===ar?sr:or:t===ar?or:sr}_orderToDirection(t){return ui()?t===sr?ar:lr:t===sr?lr:ar}static jQueryInterface(t){return this.each((function(){const e=Tr.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}else e.to(t)}))}}Ii.on(document,mr,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=Ni.getElementFromSelector(this);if(!e||!e.classList.contains(vr))return;t.preventDefault();const n=Tr.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Mi.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Ii.on(window,gr,(()=>{const t=Ni.find('[data-bs-ride="carousel"]');for(const e of t)Tr.getOrCreateInstance(e)})),hi(Tr);const Er=".".concat("bs.collapse"),kr="show".concat(Er),Or="shown".concat(Er),Ar="hide".concat(Er),Ir="hidden".concat(Er),Dr="click".concat(Er).concat(".data-api"),Pr="show",Lr="collapse",Mr="collapsing",Rr=":scope .".concat(Lr," .").concat(Lr),Fr='[data-bs-toggle="collapse"]',jr={parent:null,toggle:!0},Nr={parent:"(null|element)",toggle:"boolean"};class Br extends Fi{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=Ni.find(Fr);for(const i of n){const t=Ni.getSelectorFromElement(i),e=Ni.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return jr}static get DefaultType(){return Nr}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>Br.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(Ii.trigger(this._element,kr).defaultPrevented)return;for(const r of t)r.hide();const e=this._getDimension();this._element.classList.remove(Lr),this._element.classList.add(Mr),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=e[0].toUpperCase()+e.slice(1),i="scroll".concat(n);this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Mr),this._element.classList.add(Lr,Pr),this._element.style[e]="",Ii.trigger(this._element,Or)}),this._element,!0),this._element.style[e]="".concat(this._element[i],"px")}hide(){if(this._isTransitioning||!this._isShown())return;if(Ii.trigger(this._element,Ar).defaultPrevented)return;const t=this._getDimension();this._element.style[t]="".concat(this._element.getBoundingClientRect()[t],"px"),ai(this._element),this._element.classList.add(Mr),this._element.classList.remove(Lr,Pr);for(const e of this._triggerArray){const t=Ni.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Mr),this._element.classList.add(Lr),Ii.trigger(this._element,Ir)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(Pr)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=ni(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Fr);for(const e of t){const t=Ni.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=Ni.find(Rr,this._config.parent);return Ni.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Br.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError('No method named "'.concat(t,'"'));n[t]()}}))}}Ii.on(document,Dr,Fr,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of Ni.getMultipleElementsFromSelector(this))Br.getOrCreateInstance(e,{toggle:!1}).toggle()})),hi(Br);const Ur="dropdown",Vr=".".concat("bs.dropdown"),zr=".data-api",Hr="ArrowUp",Wr="ArrowDown",Gr="hide".concat(Vr),qr="hidden".concat(Vr),Xr="show".concat(Vr),Yr="shown".concat(Vr),Kr="click".concat(Vr).concat(zr),Qr="keydown".concat(Vr).concat(zr),$r="keyup".concat(Vr).concat(zr),Jr="show",Zr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',to="".concat(Zr,".").concat(Jr),eo=".dropdown-menu",no=ui()?"top-end":"top-start",io=ui()?"top-start":"top-end",ro=ui()?"bottom-end":"bottom-start",oo=ui()?"bottom-start":"bottom-end",so=ui()?"left-start":"right-start",ao=ui()?"right-start":"left-start",lo={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},co={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class uo extends Fi{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Ni.next(this._element,eo)[0]||Ni.prev(this._element,eo)[0]||Ni.findOne(eo,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return lo}static get DefaultType(){return co}static get NAME(){return Ur}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ri(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Ii.trigger(this._element,Xr,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))Ii.on(t,"mouseover",si);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Jr),this._element.classList.add(Jr),Ii.trigger(this._element,Yr,t)}}hide(){if(ri(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Ii.trigger(this._element,Gr,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Ii.off(t,"mouseover",si);this._popper&&this._popper.destroy(),this._menu.classList.remove(Jr),this._element.classList.remove(Jr),this._element.setAttribute("aria-expanded","false"),Mi.removeDataAttribute(this._menu,"popper"),Ii.trigger(this._element,qr,t)}}_getConfig(t){if("object"===typeof(t=super._getConfig(t)).reference&&!ei(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError("".concat(Ur.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return t}_createPopper(){if("undefined"===typeof t)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:ei(this._config.reference)?e=ni(this._config.reference):"object"===typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Yn(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Jr)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return so;if(t.classList.contains("dropstart"))return ao;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?io:no:e?oo:ro}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Mi.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...di(this._config.popperConfig,[t])}}_selectMenuItem(t){let{key:e,target:n}=t;const i=Ni.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>ii(t)));i.length&&pi(i,n,e===Wr,!i.includes(n)).focus()}static jQueryInterface(t){return this.each((function(){const e=uo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=Ni.find(to);for(const n of e){const e=uo.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[Hr,Wr].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(Zr)?this:Ni.prev(this,Zr)[0]||Ni.next(this,Zr)[0]||Ni.findOne(Zr,t.delegateTarget.parentNode),o=uo.getOrCreateInstance(r);if(i)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}Ii.on(document,Qr,Zr,uo.dataApiKeydownHandler),Ii.on(document,Qr,eo,uo.dataApiKeydownHandler),Ii.on(document,Kr,uo.clearMenus),Ii.on(document,$r,uo.clearMenus),Ii.on(document,Kr,Zr,(function(t){t.preventDefault(),uo.getOrCreateInstance(this).toggle()})),hi(uo);const ho="backdrop",fo="show",po="mousedown.bs.".concat(ho),go={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},mo={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vo extends Ri{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return go}static get DefaultType(){return mo}static get NAME(){return ho}show(t){if(!this._config.isVisible)return void di(t);this._append();const e=this._getElement();this._config.isAnimated&&ai(e),e.classList.add(fo),this._emulateAnimation((()=>{di(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(fo),this._emulateAnimation((()=>{this.dispose(),di(t)}))):di(t)}dispose(){this._isAppended&&(Ii.off(this._element,po),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=ni(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Ii.on(t,po,(()=>{di(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){fi(t,this._getElement(),this._config.isAnimated)}}const yo=".".concat("bs.focustrap"),bo="focusin".concat(yo),_o="keydown.tab".concat(yo),wo="backward",xo={autofocus:!0,trapElement:null},Co={autofocus:"boolean",trapElement:"element"};class So extends Ri{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return xo}static get DefaultType(){return Co}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ii.off(document,yo),Ii.on(document,bo,(t=>this._handleFocusin(t))),Ii.on(document,_o,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ii.off(document,yo))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=Ni.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===wo?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?wo:"forward")}}const To=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Eo=".sticky-top",ko="padding-right",Oo="margin-right";class Ao{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ko,(e=>e+t)),this._setElementAttributes(To,ko,(e=>e+t)),this._setElementAttributes(Eo,Oo,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ko),this._resetElementAttributes(To,ko),this._resetElementAttributes(Eo,Oo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,"".concat(n(Number.parseFloat(r)),"px"))}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Mi.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Mi.getDataAttribute(t,e);null!==n?(Mi.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(ei(t))e(t);else for(const n of Ni.find(t,this._element))e(n)}}const Io=".".concat("bs.modal"),Do="hide".concat(Io),Po="hidePrevented".concat(Io),Lo="hidden".concat(Io),Mo="show".concat(Io),Ro="shown".concat(Io),Fo="resize".concat(Io),jo="click.dismiss".concat(Io),No="mousedown.dismiss".concat(Io),Bo="keydown.dismiss".concat(Io),Uo="click".concat(Io).concat(".data-api"),Vo="modal-open",zo="show",Ho="modal-static",Wo={backdrop:!0,focus:!0,keyboard:!0},Go={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class qo extends Fi{constructor(t,e){super(t,e),this._dialog=Ni.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ao,this._addEventListeners()}static get Default(){return Wo}static get DefaultType(){return Go}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;Ii.trigger(this._element,Mo,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Vo),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;Ii.trigger(this._element,Do).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(zo),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){Ii.off(window,Io),Ii.off(this._dialog,Io),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vo({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new So({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Ni.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),ai(this._element),this._element.classList.add(zo);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ii.trigger(this._element,Ro,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){Ii.on(this._element,Bo,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),Ii.on(window,Fo,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Ii.on(this._element,No,(t=>{Ii.one(this._element,jo,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Vo),this._resetAdjustments(),this._scrollBar.reset(),Ii.trigger(this._element,Lo)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ii.trigger(this._element,Po).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Ho)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ho),this._queueCallback((()=>{this._element.classList.remove(Ho),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=ui()?"paddingLeft":"paddingRight";this._element.style[t]="".concat(e,"px")}if(!n&&t){const t=ui()?"paddingRight":"paddingLeft";this._element.style[t]="".concat(e,"px")}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=qo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError('No method named "'.concat(t,'"'));n[t](e)}}))}}Ii.on(document,Uo,'[data-bs-toggle="modal"]',(function(t){const e=Ni.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Ii.one(e,Mo,(t=>{t.defaultPrevented||Ii.one(e,Lo,(()=>{ii(this)&&this.focus()}))}));const n=Ni.findOne(".modal.show");n&&qo.getInstance(n).hide();qo.getOrCreateInstance(e).toggle(this)})),Bi(qo),hi(qo);const Xo=".".concat("bs.offcanvas"),Yo=".data-api",Ko="load".concat(Xo).concat(Yo),Qo="show",$o="showing",Jo="hiding",Zo=".offcanvas.show",ts="show".concat(Xo),es="shown".concat(Xo),ns="hide".concat(Xo),is="hidePrevented".concat(Xo),rs="hidden".concat(Xo),os="resize".concat(Xo),ss="click".concat(Xo).concat(Yo),as="keydown.dismiss".concat(Xo),ls={backdrop:!0,keyboard:!0,scroll:!1},cs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class us extends Fi{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ls}static get DefaultType(){return cs}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(Ii.trigger(this._element,ts,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ao).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($o);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Qo),this._element.classList.remove($o),Ii.trigger(this._element,es,{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(Ii.trigger(this._element,ns).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Jo),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(Qo,Jo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ao).reset(),Ii.trigger(this._element,rs)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new vo({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():Ii.trigger(this._element,is)}:null})}_initializeFocusTrap(){return new So({trapElement:this._element})}_addEventListeners(){Ii.on(this._element,as,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():Ii.trigger(this._element,is))}))}static jQueryInterface(t){return this.each((function(){const e=us.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError('No method named "'.concat(t,'"'));e[t](this)}}))}}Ii.on(document,ss,'[data-bs-toggle="offcanvas"]',(function(t){const e=Ni.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),ri(this))return;Ii.one(e,rs,(()=>{ii(this)&&this.focus()}));const n=Ni.findOne(Zo);n&&n!==e&&us.getInstance(n).hide();us.getOrCreateInstance(e).toggle(this)})),Ii.on(window,Ko,(()=>{for(const t of Ni.find(Zo))us.getOrCreateInstance(t).show()})),Ii.on(window,os,(()=>{for(const t of Ni.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&us.getOrCreateInstance(t).hide()})),Bi(us),hi(us);const hs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ds=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),fs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ps=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!ds.has(n)||Boolean(fs.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))};const gs={allowList:hs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ms={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},vs={entry:"(string|element|function|null)",selector:"(string|element)"};class ys extends Ri{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return gs}static get DefaultType(){return ms}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(t,r,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},vs)}_setContent(t,e,n){const i=Ni.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?ei(e)?this._putElementInTemplate(ni(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const o of r){const t=o.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){o.remove();continue}const n=[].concat(...o.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)ps(e,i)||o.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return di(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const bs=new Set(["sanitize","allowList","sanitizeFn"]),_s="fade",ws="show",xs=".".concat("modal"),Cs="hide.bs.modal",Ss="hover",Ts="focus",Es={AUTO:"auto",TOP:"top",RIGHT:ui()?"left":"right",BOTTOM:"bottom",LEFT:ui()?"right":"left"},ks={allowList:hs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Os={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class As extends Fi{constructor(e,n){if("undefined"===typeof t)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ks}static get DefaultType(){return Os}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ii.off(this._element.closest(xs),Cs,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=Ii.trigger(this._element,this.constructor.eventName("show")),e=(oi(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Ii.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ws),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))Ii.on(r,"mouseover",si);this._queueCallback((()=>{Ii.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(Ii.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(ws),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Ii.off(t,"mouseover",si);this._activeTrigger.click=!1,this._activeTrigger[Ts]=!1,this._activeTrigger[Ss]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ii.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(_s,ws),e.classList.add("bs-".concat(this.constructor.NAME,"-auto"));const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(_s),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ys({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(_s)}_isShown(){return this.tip&&this.tip.classList.contains(ws)}_createPopper(t){const e=di(this._config.placement,[this,t,this._element]),n=Es[e.toUpperCase()];return Yn(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return di(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...di(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)Ii.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===Ss?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===Ss?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ii.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Ts:Ss]=!0,e._enter()})),Ii.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Ts:Ss]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Ii.on(this._element.closest(xs),Cs,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Mi.getDataAttributes(this._element);for(const n of Object.keys(e))bs.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:ni(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=As.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}))}}hi(As);const Is={...As.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ds={...As.DefaultType,content:"(null|string|element|function)"};class Ps extends As{static get Default(){return Is}static get DefaultType(){return Ds}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Ps.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}))}}hi(Ps);const Ls=".".concat("bs.scrollspy"),Ms="activate".concat(Ls),Rs="click".concat(Ls),Fs="load".concat(Ls).concat(".data-api"),js="active",Ns="[href]",Bs=".nav-link",Us="".concat(Bs,", ").concat(".nav-item"," > ").concat(Bs,", ").concat(".list-group-item"),Vs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},zs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Hs extends Fi{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vs}static get DefaultType(){return zs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=ni(t.target)||document.body,t.rootMargin=t.offset?"".concat(t.offset,"px 0px -30%"):t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ii.off(this._config.target,Rs),Ii.on(this._config.target,Rs,Ns,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get("#".concat(t.target.id)),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(o),!i)return}else r||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ni.find(Ns,this._config.target);for(const e of t){if(!e.hash||ri(e))continue;const t=Ni.findOne(decodeURI(e.hash),this._element);ii(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(js),this._activateParents(t),Ii.trigger(this._element,Ms,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))Ni.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(js);else for(const e of Ni.parents(t,".nav, .list-group"))for(const t of Ni.prev(e,Us))t.classList.add(js)}_clearActiveClass(t){t.classList.remove(js);const e=Ni.find("".concat(Ns,".").concat(js),t);for(const n of e)n.classList.remove(js)}static jQueryInterface(t){return this.each((function(){const e=Hs.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}))}}Ii.on(window,Fs,(()=>{for(const t of Ni.find('[data-bs-spy="scroll"]'))Hs.getOrCreateInstance(t)})),hi(Hs);const Ws=".".concat("bs.tab"),Gs="hide".concat(Ws),qs="hidden".concat(Ws),Xs="show".concat(Ws),Ys="shown".concat(Ws),Ks="click".concat(Ws),Qs="keydown".concat(Ws),$s="load".concat(Ws),Js="ArrowLeft",Zs="ArrowRight",ta="ArrowUp",ea="ArrowDown",na="Home",ia="End",ra="active",oa="fade",sa="show",aa=".dropdown-toggle",la=":not(".concat(aa,")"),ca=".nav-link".concat(la,", .list-group-item").concat(la,', [role="tab"]').concat(la),ua='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ha="".concat(ca,", ").concat(ua),da=".".concat(ra,'[data-bs-toggle="tab"], .').concat(ra,'[data-bs-toggle="pill"], .').concat(ra,'[data-bs-toggle="list"]');class fa extends Fi{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ii.on(this._element,Qs,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?Ii.trigger(e,Gs,{relatedTarget:t}):null;Ii.trigger(t,Xs,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(ra),this._activate(Ni.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Ii.trigger(t,Ys,{relatedTarget:e})):t.classList.add(sa)}),t,t.classList.contains(oa))}_deactivate(t,e){if(!t)return;t.classList.remove(ra),t.blur(),this._deactivate(Ni.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Ii.trigger(t,qs,{relatedTarget:e})):t.classList.remove(sa)}),t,t.classList.contains(oa))}_keydown(t){if(![Js,Zs,ta,ea,na,ia].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!ri(t)));let n;if([na,ia].includes(t.key))n=e[t.key===na?0:e.length-1];else{const i=[Zs,ea].includes(t.key);n=pi(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),fa.getOrCreateInstance(n).show())}_getChildren(){return Ni.find(ha,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Ni.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby","".concat(t.id)))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=Ni.findOne(t,n);r&&r.classList.toggle(i,e)};i(aa,ra),i(".dropdown-menu",sa),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(ra)}_getInnerElement(t){return t.matches(ha)?t:Ni.findOne(ha,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=fa.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError('No method named "'.concat(t,'"'));e[t]()}}))}}Ii.on(document,Ks,ua,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),ri(this)||fa.getOrCreateInstance(this).show()})),Ii.on(window,$s,(()=>{for(const t of Ni.find(da))fa.getOrCreateInstance(t)})),hi(fa);const pa=".".concat("bs.toast"),ga="mouseover".concat(pa),ma="mouseout".concat(pa),va="focusin".concat(pa),ya="focusout".concat(pa),ba="hide".concat(pa),_a="hidden".concat(pa),wa="show".concat(pa),xa="shown".concat(pa),Ca="hide",Sa="show",Ta="showing",Ea={animation:"boolean",autohide:"boolean",delay:"number"},ka={animation:!0,autohide:!0,delay:5e3};class Oa extends Fi{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ka}static get DefaultType(){return Ea}static get NAME(){return"toast"}show(){if(Ii.trigger(this._element,wa).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(Ca),ai(this._element),this._element.classList.add(Sa,Ta),this._queueCallback((()=>{this._element.classList.remove(Ta),Ii.trigger(this._element,xa),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(Ii.trigger(this._element,ba).defaultPrevented)return;this._element.classList.add(Ta),this._queueCallback((()=>{this._element.classList.add(Ca),this._element.classList.remove(Ta,Sa),Ii.trigger(this._element,_a)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Sa),super.dispose()}isShown(){return this._element.classList.contains(Sa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Ii.on(this._element,ga,(t=>this._onInteraction(t,!0))),Ii.on(this._element,ma,(t=>this._onInteraction(t,!1))),Ii.on(this._element,va,(t=>this._onInteraction(t,!0))),Ii.on(this._element,ya,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Oa.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError('No method named "'.concat(t,'"'));e[t](this)}}))}}Bi(Oa),hi(Oa);var Aa=n(940);const Ia=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},Da={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],o=r+1<t.length,s=o?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ia(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const s=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==o||null==s||null==a)throw new Pa;const l=e<<2|o>>4;if(i.push(l),64!==s){const t=o<<4&240|s>>2;if(i.push(t),64!==a){const t=s<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Pa extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const La=function(t){return function(t){const e=Ia(t);return Da.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Ma=function(t){try{return Da.decodeString(t,!0)}catch(TT){console.error("base64Decode failed: ",TT)}return null};const Ra=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fa=()=>{try{return Ra()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(TT){return}const e=t&&Ma(t[1]);return e&&JSON.parse(e)})()}catch(TT){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(TT))}},ja=t=>{const e=(t=>{var e,n;return null===(n=null===(e=Fa())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Na=()=>{var t;return null===(t=Fa())||void 0===t?void 0:t.config};class Ba{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function Ua(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[La(JSON.stringify({alg:"none",type:"JWT"})),La(JSON.stringify(o)),""].join(".")}function Va(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function za(){return!function(){var t;const e=null===(t=Fa())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(TT){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ha(){try{return"object"===typeof indexedDB}catch(TT){return!1}}function Wa(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}class Ga extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}}class qa{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(Xa,((t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",o="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new Ga(n,o,e)}}const Xa=/\{\$([^}]+)}/g;function Ya(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],o=e[r];if(Ka(n)&&Ka(o)){if(!Ya(n,o))return!1}else if(n!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ka(t){return null!==t&&"object"===typeof t}const Qa=1e3,$a=2,Ja=144e5,Za=.5;function tl(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$a;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa)*Math.pow(e,t),i=Math.round(Za*n*(Math.random()-.5)*2);return Math.min(Ja,n+i)}function el(t){return t&&t._delegate?t._delegate:t}class nl{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const il="[DEFAULT]";class rl{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Ba;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(TT){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(TT){if(i)return null;throw TT}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:il})}catch(TT){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(TT){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&o.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===il?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(o){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:il;return this.component?this.component.multipleInstances?t:il:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ol{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new rl(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const sl=[];var al;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(al||(al={}));const ll={debug:al.DEBUG,verbose:al.VERBOSE,info:al.INFO,warn:al.WARN,error:al.ERROR,silent:al.SILENT},cl=al.INFO,ul={[al.DEBUG]:"log",[al.VERBOSE]:"log",[al.INFO]:"info",[al.WARN]:"warn",[al.ERROR]:"error"},hl=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=ul[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];console[i]("[".concat(n,"]  ").concat(t.name,":"),...o)};class dl{constructor(t){this.name=t,this._logLevel=cl,this._logHandler=hl,this._userLogHandler=null,sl.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in al))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?ll[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,al.DEBUG,...e),this._logHandler(this,al.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,al.VERBOSE,...e),this._logHandler(this,al.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,al.INFO,...e),this._logHandler(this,al.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,al.WARN,...e),this._logHandler(this,al.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,al.ERROR,...e),this._logHandler(this,al.ERROR,...e)}}const fl=(t,e)=>e.some((e=>t instanceof e));let pl,gl;const ml=new WeakMap,vl=new WeakMap,yl=new WeakMap,bl=new WeakMap,_l=new WeakMap;let wl={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return vl.get(t);if("objectStoreNames"===e)return t.objectStoreNames||yl.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sl(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function xl(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gl||(gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(Tl(this),n),Sl(ml.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Sl(t.apply(Tl(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const o=t.call(Tl(this),e,...i);return yl.set(o,e.sort?e.sort():[e]),Sl(o)}}function Cl(t){return"function"===typeof t?xl(t):(t instanceof IDBTransaction&&function(t){if(vl.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)}));vl.set(t,e)}(t),fl(t,pl||(pl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,wl):t)}function Sl(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{e(Sl(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&ml.set(e,t)})).catch((()=>{})),_l.set(e,t),e}(t);if(bl.has(t))return bl.get(t);const e=Cl(t);return e!==t&&(bl.set(t,e),_l.set(e,t)),e}const Tl=t=>_l.get(t);function El(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(t,e),a=Sl(s);return i&&s.addEventListener("upgradeneeded",(t=>{i(Sl(s.result),t.oldVersion,t.newVersion,Sl(s.transaction),t)})),n&&s.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{o&&t.addEventListener("close",(()=>o())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const kl=["get","getKey","getAll","getAllKeys","count"],Ol=["put","add","delete","clear"],Al=new Map;function Il(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(Al.get(e))return Al.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Ol.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!kl.includes(n))return;const o=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let o=e.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return i&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),r&&e.done]))[0]};return Al.set(e,o),o}wl=(t=>({...t,get:(e,n,i)=>Il(e,n)||t.get(e,n,i),has:(e,n)=>!!Il(e,n)||t.has(e,n)}))(wl);class Dl{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const Pl="@firebase/app",Ll="0.9.27",Ml=new dl("@firebase/app"),Rl="[DEFAULT]",Fl={[Pl]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jl=new Map,Nl=new Map;function Bl(t,e){try{t.container.addComponent(e)}catch(TT){Ml.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),TT)}}function Ul(t){const e=t.name;if(Nl.has(e))return Ml.debug("There were multiple attempts to register component ".concat(e,".")),!1;Nl.set(e,t);for(const n of jl.values())Bl(n,t);return!0}function Vl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const zl=new qa("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hl{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new nl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zl.create("app-deleted",{appName:this._name})}}const Wl="10.8.0";function Gl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:Rl,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw zl.create("bad-app-name",{appName:String(r)});if(n||(n=Na()),!n)throw zl.create("no-options");const o=jl.get(r);if(o){if(Ya(n,o.options)&&Ya(i,o.config))return o;throw zl.create("duplicate-app",{appName:r})}const s=new ol(r);for(const l of Nl.values())s.addComponent(l);const a=new Hl(n,i,s);return jl.set(r,a),a}function ql(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rl;const e=jl.get(t);if(!e&&t===Rl&&Na())return Gl();if(!e)throw zl.create("no-app",{appName:t});return e}function Xl(t,e,n){var i;let r=null!==(i=Fl[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return o&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),o&&s&&t.push("and"),s&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void Ml.warn(t.join(" "))}Ul(new nl("".concat(r,"-version"),(()=>({library:r,version:e})),"VERSION"))}const Yl="firebase-heartbeat-database",Kl=1,Ql="firebase-heartbeat-store";let $l=null;function Jl(){return $l||($l=El(Yl,Kl,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ql)}catch(TT){console.warn(TT)}}}).catch((t=>{throw zl.create("idb-open",{originalErrorMessage:t.message})}))),$l}async function Zl(t,e){try{const n=(await Jl()).transaction(Ql,"readwrite"),i=n.objectStore(Ql);await i.put(e,tc(t)),await n.done}catch(TT){if(TT instanceof Ga)Ml.warn(TT.message);else{const e=zl.create("idb-set",{originalErrorMessage:null===TT||void 0===TT?void 0:TT.message});Ml.warn(e.message)}}}function tc(t){return"".concat(t.name,"!").concat(t.options.appId)}class ec{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ic(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nc();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=nc(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),rc(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),rc(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=La(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function nc(){return(new Date).toISOString().substring(0,10)}class ic{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ha()&&Wa().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Jl()).transaction(Ql),n=await e.objectStore(Ql).get(tc(t));return await e.done,n}catch(TT){if(TT instanceof Ga)Ml.warn(TT.message);else{const e=zl.create("idb-get",{originalErrorMessage:null===TT||void 0===TT?void 0:TT.message});Ml.warn(e.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zl(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zl(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function rc(t){return La(JSON.stringify({version:2,heartbeats:t})).length}var oc;oc="",Ul(new nl("platform-logger",(t=>new Dl(t)),"PRIVATE")),Ul(new nl("heartbeat",(t=>new ec(t)),"PRIVATE")),Xl(Pl,Ll,oc),Xl(Pl,Ll,"esm2017"),Xl("fire-js","");var sc,ac="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},lc={},cc=cc||{},uc=ac||self;function hc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function dc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var fc="closure_uid_"+(1e9*Math.random()>>>0),pc=0;function gc(t,e,n){return t.call.apply(t.bind,arguments)}function mc(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function vc(t,e,n){return(vc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gc:mc).apply(null,arguments)}function yc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function bc(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function _c(){this.s=this.s,this.o=this.o}_c.prototype.s=!1,_c.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,fc)&&t[fc]||(t[fc]=++pc))},_c.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xc(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Cc(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(hc(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function Sc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sc.prototype.h=function(){this.defaultPrevented=!0};var Tc=function(){if(!uc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};uc.addEventListener("test",t,e),uc.removeEventListener("test",t,e)}catch(n){}return t}();function Ec(t){return/^[\s\xa0]*$/.test(t)}function kc(){var t=uc.navigator;return t&&(t=t.userAgent)?t:""}function Oc(t){return-1!=kc().indexOf(t)}function Ac(t){return Ac[" "](t),t}Ac[" "]=function(){};var Ic,Dc,Pc=Oc("Opera"),Lc=Oc("Trident")||Oc("MSIE"),Mc=Oc("Edge"),Rc=Mc||Lc,Fc=Oc("Gecko")&&!(-1!=kc().toLowerCase().indexOf("webkit")&&!Oc("Edge"))&&!(Oc("Trident")||Oc("MSIE"))&&!Oc("Edge"),jc=-1!=kc().toLowerCase().indexOf("webkit")&&!Oc("Edge");function Nc(){var t=uc.document;return t?t.documentMode:void 0}t:{var Bc="",Uc=function(){var t=kc();return Fc?/rv:([^\);]+)(\)|;)/.exec(t):Mc?/Edge\/([\d\.]+)/.exec(t):Lc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):jc?/WebKit\/(\S+)/.exec(t):Pc?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Uc&&(Bc=Uc?Uc[1]:""),Lc){var Vc=Nc();if(null!=Vc&&Vc>parseFloat(Bc)){Ic=String(Vc);break t}}Ic=Bc}if(uc.document&&Lc){var zc=Nc();Dc=zc||(parseInt(Ic,10)||void 0)}else Dc=void 0;var Hc=Dc;function Wc(t,e){if(Sc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Fc){t:{try{Ac(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Gc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Wc.$.h.call(this)}}bc(Wc,Sc);var Gc={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var qc="closure_listenable_"+(1e6*Math.random()|0),Xc=0;function Yc(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Xc,this.fa=this.ia=!1}function Kc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Qc(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function $c(t){const e={};for(const n in t)e[n]=t[n];return e}const Jc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zc(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<Jc.length;e++)n=Jc[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function tu(t){this.src=t,this.g={},this.h=0}function eu(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],o=wc(r,e);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(Kc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function nu(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}tu.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=nu(t,e,i,r);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new Yc(e,this.src,o,!!i,r)).ia=n,t.push(e)),e};var iu="closure_lm_"+(1e6*Math.random()|0),ru={};function ou(t,e,n,i,r){if(i&&i.once)return au(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ou(t,e[o],n,i,r);return null}return n=pu(n),t&&t[qc]?t.O(e,n,dc(i)?!!i.capture:!!i,r):su(t,e,n,!1,i,r)}function su(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=dc(r)?!!r.capture:!!r,a=du(t);if(a||(t[iu]=a=new tu(t)),(n=a.add(e,n,i,s,o)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=hu;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Tc||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(uu(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function au(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)au(t,e[o],n,i,r);return null}return n=pu(n),t&&t[qc]?t.P(e,n,dc(i)?!!i.capture:!!i,r):su(t,e,n,!0,i,r)}function lu(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)lu(t,e[o],n,i,r);else i=dc(i)?!!i.capture:!!i,n=pu(n),t&&t[qc]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=nu(o=t.g[e],n,i,r))&&(Kc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=du(t))&&(e=t.g[e.toString()],t=-1,e&&(t=nu(e,n,i,r)),(n=-1<t?e[t]:null)&&cu(n))}function cu(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[qc])eu(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(uu(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=du(e))?(eu(n,t),0==n.h&&(n.src=null,e[iu]=null)):Kc(t)}}}function uu(t){return t in ru?ru[t]:ru[t]="on"+t}function hu(t,e){if(t.fa)t=!0;else{e=new Wc(e,this);var n=t.listener,i=t.la||t.src;t.ia&&cu(t),t=n.call(i,e)}return t}function du(t){return(t=t[iu])instanceof tu?t:null}var fu="__closure_events_fn_"+(1e9*Math.random()>>>0);function pu(t){return"function"===typeof t?t:(t[fu]||(t[fu]=function(e){return t.handleEvent(e)}),t[fu])}function gu(){_c.call(this),this.i=new tu(this),this.S=this,this.J=null}function mu(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new Sc(e,t);else if(e instanceof Sc)e.target=e.target||t;else{var r=e;Zc(e=new Sc(i,t),r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];r=vu(s,i,!0,e)&&r}if(r=vu(s=e.g=t,i,!0,e)&&r,r=vu(s,i,!1,e)&&r,n)for(o=0;o<n.length;o++)r=vu(s=e.g=n[o],i,!1,e)&&r}function vu(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&eu(t.i,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}bc(gu,_c),gu.prototype[qc]=!0,gu.prototype.removeEventListener=function(t,e,n,i){lu(this,t,e,n,i)},gu.prototype.N=function(){if(gu.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Kc(n[i]);delete e.g[t],e.h--}}this.J=null},gu.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},gu.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var yu=uc.JSON.stringify;function bu(){var t=Eu;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var _u=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new wu),(t=>t.reset()));class wu{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function xu(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Cu(t){uc.setTimeout((()=>{throw t}),0)}let Su,Tu=!1,Eu=new class{constructor(){this.h=this.g=null}add(t,e){const n=_u.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},ku=()=>{const t=uc.Promise.resolve(void 0);Su=()=>{t.then(Ou)}};var Ou=()=>{for(var t;t=bu();){try{t.h.call(t.g)}catch(n){Cu(n)}var e=_u;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Tu=!1};function Au(t,e){gu.call(this),this.h=t||1,this.g=e||uc,this.j=vc(this.qb,this),this.l=Date.now()}function Iu(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Du(t,e,n){if("function"===typeof t)n&&(t=vc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=vc(t.handleEvent,t)}return 2147483647<Number(e)?-1:uc.setTimeout(t,e||0)}function Pu(t){t.g=Du((()=>{t.g=null,t.i&&(t.i=!1,Pu(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}bc(Au,gu),(sc=Au.prototype).ga=!1,sc.T=null,sc.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mu(this,"tick"),this.ga&&(Iu(this),this.start()))}},sc.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sc.N=function(){Au.$.N.call(this),Iu(this),delete this.g};class Lu extends _c{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(uc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mu(t){_c.call(this),this.h=t,this.g={}}bc(Mu,_c);var Ru=[];function Fu(t,e,n,i){Array.isArray(n)||(n&&(Ru[0]=n.toString()),n=Ru);for(var r=0;r<n.length;r++){var o=ou(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ju(t){Qc(t.g,(function(t,e){this.g.hasOwnProperty(e)&&cu(t)}),t),t.g={}}function Nu(){this.g=!0}function Bu(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return yu(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}Mu.prototype.N=function(){Mu.$.N.call(this),ju(this)},Mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nu.prototype.Ea=function(){this.g=!1},Nu.prototype.info=function(){};var Uu={},Vu=null;function zu(){return Vu=Vu||new gu}function Hu(t){Sc.call(this,Uu.Ta,t)}function Wu(t){const e=zu();mu(e,new Hu(e))}function Gu(t,e){Sc.call(this,Uu.STAT_EVENT,t),this.stat=e}function qu(t){const e=zu();mu(e,new Gu(e,t))}function Xu(t,e){Sc.call(this,Uu.Ua,t),this.size=e}function Yu(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return uc.setTimeout((function(){t()}),e)}Uu.Ta="serverreachability",bc(Hu,Sc),Uu.STAT_EVENT="statevent",bc(Gu,Sc),Uu.Ua="timingevent",bc(Xu,Sc);var Ku={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $u(){}function Ju(t){return t.h||(t.h=t.i())}function Zu(){}$u.prototype.h=null;var th,eh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nh(){Sc.call(this,"d")}function ih(){Sc.call(this,"c")}function rh(){}function oh(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Mu(this),this.P=ah,t=Rc?125:void 0,this.V=new Au(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sh}function sh(){this.i=null,this.g="",this.h=!1}bc(nh,Sc),bc(ih,Sc),bc(rh,$u),rh.prototype.g=function(){return new XMLHttpRequest},rh.prototype.i=function(){return{}},th=new rh;var ah=45e3,lh={},ch={};function uh(t,e,n){t.L=1,t.A=Ah(Sh(e)),t.u=n,t.S=!0,hh(t,null)}function hh(t,e){t.G=Date.now(),gh(t),t.B=Sh(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),zh(n.i,"t",i),t.o=0,n=t.l.J,t.h=new sh,t.g=Hd(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Lu(vc(t.Pa,t,t.g),t.O)),Fu(t.U,t.g,"readystatechange",t.nb),e=t.I?$c(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Wu(),function(t,e,n,i,r,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function dh(t){return!!t.g&&("GET"==t.v&&2!=t.L&&t.l.Ha)}function fh(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=ph(t,n),i==ch){4==e&&(t.s=4,qu(14),r=!1),Bu(t.j,t.m,null,"[Incomplete Response]");break}if(i==lh){t.s=4,qu(15),Bu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Bu(t.j,t.m,i,null),_h(t,i)}dh(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,qu(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rd(e),e.M=!0,qu(11))):(Bu(t.j,t.m,n,"[Invalid Chunked Response]"),bh(t),yh(t))}function ph(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?ch:(n=Number(e.substring(n,i)),isNaN(n)?lh:(i+=1)+n>e.length?ch:(e=e.slice(i,i+n),t.o=i+n,e))}function gh(t){t.Y=Date.now()+t.P,mh(t,t.P)}function mh(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Yu(vc(t.lb,t),e)}function vh(t){t.C&&(uc.clearTimeout(t.C),t.C=null)}function yh(t){0==t.l.H||t.J||Nd(t.l,t)}function bh(t){vh(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Iu(t.V),ju(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _h(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Kh(n.i,t)))if(!t.K&&Kh(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;jd(n),kd(n)}Md(n),qu(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yu(vc(n.ib,n),6e3));if(1>=Yh(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ud(n,11)}else if((t.K||n.g==t)&&jd(n),!Ec(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var o=i.i;o.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Qh(o,o.h),o.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Oh(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((i=n).wa=zd(i,i.J?i.pa:null,i.Y),s.K){$h(i.i,s);var a=s,l=i.L;l&&a.setTimeout(l),a.C&&(vh(a),gh(a)),i.g=s}else Ld(i);0<n.j.length&&Ad(n)}else"stop"!=c[0]&&"close"!=c[0]||Ud(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ud(n,7):Ed(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Wu()}catch(c){}}function wh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(hc(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(hc(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(hc(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(sc=oh.prototype).setTimeout=function(t){this.P=t},sc.nb=function(t){t=t.target;const e=this.M;e&&3==_d(t)?e.l():this.Pa(t)},sc.Pa=function(t){try{if(t==this.g)t:{const u=_d(this.g);var e=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Rc||this.g&&(this.h.h||this.g.ja()||wd(this.g)))){this.J||4!=u||7==e||Wu(),vh(this);var n=this.g.da();this.ca=n;e:if(dh(this)){var i=wd(this.g);t="";var r=i.length,o=4==_d(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bh(this),yh(this);var s="";break e}this.h.i=new uc.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,o,s){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ec(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.s=3,qu(12),bh(this),yh(this);break t}Bu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,n)}this.S?(fh(this,u,s),Rc&&this.i&&3==u&&(Fu(this.U,this.V,"tick",this.mb),this.V.start())):(Bu(this.j,this.m,s,null),_h(this,s)),4==u&&bh(this),this.i&&!this.J&&(4==u?Nd(this.l,this):(this.i=!1,gh(this)))}else(function(t){const e={};t=(t.g&&2<=_d(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(Ec(t[i]))continue;var n=xu(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=e[r]||[];e[r]=o,o.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,qu(12)):(this.s=0,qu(13)),bh(this),yh(this)}}}catch(u){}},sc.mb=function(){if(this.g){var t=_d(this.g),e=this.g.ja();this.o<e.length&&(vh(this),fh(this,t,e),this.i&&4!=t&&gh(this))}},sc.cancel=function(){this.J=!0,bh(this)},sc.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(Wu(),qu(17)),bh(this),this.s=2,yh(this)):mh(this,this.Y-t)};var xh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ch){this.h=t.h,Th(this,t.j),this.s=t.s,this.g=t.g,Eh(this,t.m),this.l=t.l;var e=t.i,n=new Nh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),kh(this,n),this.o=t.o}else t&&(e=String(t).match(xh))?(this.h=!1,Th(this,e[1]||"",!0),this.s=Ih(e[2]||""),this.g=Ih(e[3]||"",!0),Eh(this,e[4]),this.l=Ih(e[5]||"",!0),kh(this,e[6]||"",!0),this.o=Ih(e[7]||"")):(this.h=!1,this.i=new Nh(null,this.h))}function Sh(t){return new Ch(t)}function Th(t,e,n){t.j=n?Ih(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Eh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function kh(t,e,n){e instanceof Nh?(t.i=e,function(t,e){e&&!t.j&&(Bh(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Uh(this,e),zh(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Dh(e,Fh)),t.i=new Nh(e,t.h))}function Oh(t,e,n){t.i.set(e,n)}function Ah(t){return Oh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ih(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dh(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ph),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ph(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ch.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Dh(e,Lh,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Dh(e,Lh,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dh(n,"/"==n.charAt(0)?Rh:Mh,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Dh(n,jh)),t.join("")};var Lh=/[#\/\?@]/g,Mh=/[#\?:]/g,Rh=/[#\?]/g,Fh=/[#\?@]/g,jh=/#/g;function Nh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bh(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Uh(t,e){Bh(t),e=Hh(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Vh(t,e){return Bh(t),e=Hh(t,e),t.g.has(e)}function zh(t,e,n){Uh(t,e),0<n.length&&(t.i=null,t.g.set(Hh(t,e),xc(n)),t.h+=n.length)}function Hh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(sc=Nh.prototype).add=function(t,e){Bh(this),this.i=null,t=Hh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},sc.forEach=function(t,e){Bh(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},sc.ta=function(){Bh(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},sc.Z=function(t){Bh(this);let e=[];if("string"===typeof t)Vh(this,t)&&(e=e.concat(this.g.get(Hh(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},sc.set=function(t,e){return Bh(this),this.i=null,Vh(this,t=Hh(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},sc.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},sc.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),t.push(r)}}return this.i=t.join("&")};var Wh=class{constructor(t,e){this.g=t,this.map=e}};function Gh(t){this.l=t||qh,uc.PerformanceNavigationTiming?t=0<(t=uc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(uc.g&&uc.g.Ka&&uc.g.Ka()&&uc.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qh=10;function Xh(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Yh(t){return t.h?1:t.g?t.g.size:0}function Kh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Qh(t,e){t.g?t.g.add(e):t.h=e}function $h(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Jh(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xc(t.i)}Gh.prototype.cancel=function(){if(this.i=Jh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Zh,td=class{stringify(t){return uc.JSON.stringify(t,void 0)}parse(t){return uc.JSON.parse(t,void 0)}};function ed(){this.g=new td}function nd(t,e,n){const i=n||"";try{wh(t,(function(t,n){let r=t;dc(t)&&(r=yu(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(TT){throw e.push(i+"type="+encodeURIComponent("_badmap")),TT}}function id(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(o){}}function rd(t){this.l=t.ec||null,this.j=t.ob||!1}function od(t,e){gu.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=sd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bc(rd,$u),rd.prototype.g=function(){return new od(this.l,this.j)},rd.prototype.i=(Zh={},function(){return Zh}),bc(od,gu);var sd=0;function ad(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ld(t){t.readyState=4,t.l=null,t.j=null,t.A=null,cd(t)}function cd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(sc=od.prototype).open=function(t,e){if(this.readyState!=sd)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,cd(this)},sc.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||uc).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},sc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ld(this)),this.readyState=sd},sc.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,cd(this)),this.g&&(this.readyState=3,cd(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof uc.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ad(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},sc.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ld(this):cd(this),3==this.readyState&&ad(this)}},sc.Za=function(t){this.g&&(this.response=this.responseText=t,ld(this))},sc.Ya=function(t){this.g&&(this.response=t,ld(this))},sc.ka=function(){this.g&&ld(this)},sc.setRequestHeader=function(t,e){this.v.append(t,e)},sc.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},sc.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(od.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ud=uc.JSON.parse;function hd(t){gu.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dd,this.L=this.M=!1}bc(hd,gu);var dd="",fd=/^https?$/i,pd=["POST","PUT"];function gd(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,md(t),yd(t)}function md(t){t.F||(t.F=!0,mu(t,"complete"),mu(t,"error"))}function vd(t){if(t.h&&"undefined"!=typeof cc&&(!t.C[1]||4!=_d(t)||2!=t.da()))if(t.v&&4==_d(t))Du(t.La,0,t);else if(mu(t,"readystatechange"),4==_d(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.I).match(xh)[1]||null;!r&&uc.self&&uc.self.location&&(r=uc.self.location.protocol.slice(0,-1)),i=!fd.test(r?r.toLowerCase():"")}n=i}if(n)mu(t,"complete"),mu(t,"success");else{t.m=6;try{var o=2<_d(t)?t.g.statusText:""}catch(s){o=""}t.j=o+" ["+t.da()+"]",md(t)}}finally{yd(t)}}}function yd(t,e){if(t.g){bd(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||mu(t,"ready");try{n.onreadystatechange=i}catch(TT){}}}function bd(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(uc.clearTimeout(t.A),t.A=null)}function _d(t){return t.g?t.g.readyState:0}function wd(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case dd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Af){return null}}function xd(t){let e="";return Qc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Cd(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=xd(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Oh(t,e,n))}function Sd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Td(t){this.Ga=0,this.j=[],this.l=new Nu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Sd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Sd("baseRetryDelayMs",5e3,t),this.hb=Sd("retryDelaySeedMs",1e4,t),this.eb=Sd("forwardChannelMaxRetries",2,t),this.xa=Sd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Gh(t&&t.concurrentRequestLimit),this.Ja=new ed,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ed(t){if(Od(t),3==t.H){var e=t.W++,n=Sh(t.I);if(Oh(n,"SID",t.K),Oh(n,"RID",e),Oh(n,"TYPE","terminate"),Dd(t,n),(e=new oh(t,t.l,e)).L=2,e.A=Ah(Sh(n)),n=!1,uc.navigator&&uc.navigator.sendBeacon)try{n=uc.navigator.sendBeacon(e.A.toString(),"")}catch(i){}!n&&uc.Image&&((new Image).src=e.A,n=!0),n||(e.g=Hd(e.l,null),e.g.ha(e.A)),e.G=Date.now(),gh(e)}Vd(t)}function kd(t){t.g&&(Rd(t),t.g.cancel(),t.g=null)}function Od(t){kd(t),t.u&&(uc.clearTimeout(t.u),t.u=null),jd(t),t.i.cancel(),t.m&&("number"===typeof t.m&&uc.clearTimeout(t.m),t.m=null)}function Ad(t){if(!Xh(t.i)&&!t.m){t.m=!0;var e=t.Na;Su||ku(),Tu||(Su(),Tu=!0),Eu.add(e,t),t.C=0}}function Id(t,e){var n;n=e?e.m:t.W++;const i=Sh(t.I);Oh(i,"SID",t.K),Oh(i,"RID",n),Oh(i,"AID",t.V),Dd(t,i),t.o&&t.s&&Cd(i,t.o,t.s),n=new oh(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Pd(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Qh(t.i,n),uh(n,i,e)}function Dd(t,e){t.na&&Qc(t.na,(function(t,n){Oh(e,n,t)})),t.h&&wh({},(function(t,n){Oh(e,n,t)}))}function Pd(t,e,n){n=Math.min(t.j.length,n);var i=t.h?vc(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),s=!1;else try{nd(l,t,"req"+n+"_")}catch(o){i&&i(l)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function Ld(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Su||ku(),Tu||(Su(),Tu=!0),Eu.add(e,t),t.A=0}}function Md(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=Yu(vc(t.Ma,t),Bd(t,t.A)),t.A++,!0)}function Rd(t){null!=t.B&&(uc.clearTimeout(t.B),t.B=null)}function Fd(t){t.g=new oh(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Sh(t.wa);Oh(e,"RID","rpc"),Oh(e,"SID",t.K),Oh(e,"AID",t.V),Oh(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Oh(e,"TO",t.qa),Oh(e,"TYPE","xmlhttp"),Dd(t,e),t.o&&t.s&&Cd(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ah(Sh(e)),n.u=null,n.S=!0,hh(n,t)}function jd(t){null!=t.v&&(uc.clearTimeout(t.v),t.v=null)}function Nd(t,e){var n=null;if(t.g==e){jd(t),Rd(t),t.g=null;var i=2}else{if(!Kh(t.i,e))return;n=e.F,$h(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;mu(i=zu(),new Xu(i,n)),Ad(t)}else Ld(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(Yh(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=Yu(vc(t.Na,t,e),Bd(t,t.C)),t.C++,!0))}(t,e)||2==i&&Md(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ud(t,5);break;case 4:Ud(t,10);break;case 3:Ud(t,6);break;default:Ud(t,2)}}function Bd(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ud(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=vc(t.pb,t);n||(n=new Ch("//www.google.com/images/cleardot.gif"),uc.location&&"http"==uc.location.protocol||Th(n,"https"),Ah(n)),function(t,e){const n=new Nu;if(uc.Image){const i=new Image;i.onload=yc(id,n,i,"TestLoadImage: loaded",!0,e),i.onerror=yc(id,n,i,"TestLoadImage: error",!1,e),i.onabort=yc(id,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=yc(id,n,i,"TestLoadImage: timeout",!1,e),uc.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else qu(2);t.H=0,t.h&&t.h.za(e),Vd(t),Od(t)}function Vd(t){if(t.H=0,t.ma=[],t.h){const e=Jh(t.i);0==e.length&&0==t.j.length||(Cc(t.ma,e),Cc(t.ma,t.j),t.i.i.length=0,xc(t.j),t.j.length=0),t.h.ya()}}function zd(t,e,n){var i=n instanceof Ch?Sh(n):new Ch(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Eh(i,i.m);else{var r=uc.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Ch(null);i&&Th(o,i),e&&(o.g=e),r&&Eh(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Oh(i,n,e),Oh(i,"VER",t.ra),Dd(t,i),i}function Hd(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new hd(new rd({ob:n})):new hd(t.va)).Oa(t.J),e}function Wd(){}function Gd(){if(Lc&&!(10<=Number(Hc)))throw Error("Environmental error: no available transport.")}function qd(t,e){gu.call(this),this.g=new Td(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ec(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ec(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Kd(this)}function Xd(t){nh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Yd(){ih.call(this),this.status=1}function Kd(t){this.g=t}function Qd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $d(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],s=e+(o^n&(r^o))+i[0]+3614090360&4294967295;s=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=(n=(r=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^o&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^r&(o^e))+i[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(r^o))+i[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^o&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^r&(o^e))+i[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(r^o))+i[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^o&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^r&(o^e))+i[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(r^o))+i[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(n^o&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^r&(o^e))+i[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(r^o&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^n&(o^e))+i[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(r^o))+i[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^n&(o^e))+i[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(r^o))+i[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^n&(o^e))+i[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(r^o))+i[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^n&(o^e))+i[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(r^o))+i[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^r^o)+i[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^o^e)+i[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^r^o)+i[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^o^e)+i[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^r^o)+i[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^o^e)+i[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^r^o)+i[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^n)+i[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(r^o^e)+i[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(r^(n|~o))+i[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~n))+i[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(n|~o))+i[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~n))+i[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(n|~o))+i[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~n))+i[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(r^(n|~o))+i[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=o+((s=r+(e^(o|~n))+i[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}function Jd(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=0|t[r];i&&o==e||(n[r]=o,i=!1)}this.g=n}(sc=hd.prototype).Oa=function(t){this.M=t},sc.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():th.g(),this.C=this.u?Ju(this.u):Ju(th),this.g.onreadystatechange=vc(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void gd(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=uc.FormData&&t instanceof uc.FormData,!(0<=wc(pd,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bd(this),0<this.B&&((this.L=function(t){return Lc&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vc(this.ua,this)):this.A=Du(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){gd(this,o)}},sc.ua=function(){"undefined"!=typeof cc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mu(this,"timeout"),this.abort(8))},sc.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mu(this,"complete"),mu(this,"abort"),yd(this))},sc.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yd(this,!0)),hd.$.N.call(this)},sc.La=function(){this.s||(this.G||this.v||this.l?vd(this):this.kb())},sc.kb=function(){vd(this)},sc.isActive=function(){return!!this.g},sc.da=function(){try{return 2<_d(this)?this.g.status:-1}catch(Zh){return-1}},sc.ja=function(){try{return this.g?this.g.responseText:""}catch(Zh){return""}},sc.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ud(e)}},sc.Ia=function(){return this.m},sc.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(sc=Td.prototype).ra=8,sc.H=1,sc.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new oh(this,this.l,t);let o=this.s;if(this.U&&(o?(o=$c(o),Zc(o,this.U)):o=this.U),null!==this.o||this.O||(r.I=o,o=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Pd(this,r,e),Oh(n=Sh(this.I),"RID",t),Oh(n,"CVER",22),this.F&&Oh(n,"X-HTTP-Session-Id",this.F),Dd(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(xd(o)))+"&"+e:this.o&&Cd(n,this.o,o)),Qh(this.i,r),this.bb&&Oh(n,"TYPE","init"),this.P?(Oh(n,"$req",e),Oh(n,"SID","null"),r.aa=!0,uh(r,n,null)):uh(r,n,e),this.H=2}}else 3==this.H&&(t?Id(this,t):0==this.j.length||Xh(this.i)||Id(this))},sc.Ma=function(){if(this.u=null,Fd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yu(vc(this.jb,this),t)}},sc.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qu(10),kd(this),Fd(this))},sc.ib=function(){null!=this.v&&(this.v=null,kd(this),Md(this),qu(19))},sc.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qu(2)):(this.l.info("Failed to ping google.com"),qu(1))},sc.isActive=function(){return!!this.h&&this.h.isActive(this)},(sc=Wd.prototype).Ba=function(){},sc.Aa=function(){},sc.za=function(){},sc.ya=function(){},sc.isActive=function(){return!0},sc.Va=function(){},Gd.prototype.g=function(t,e){return new qd(t,e)},bc(qd,gu),qd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qu(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=zd(t,null,t.Y),Ad(t)},qd.prototype.close=function(){Ed(this.g)},qd.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=yu(t),t=n);e.j.push(new Wh(e.fb++,t)),3==e.H&&Ad(e)},qd.prototype.N=function(){this.g.h=null,delete this.j,Ed(this.g),delete this.g,qd.$.N.call(this)},bc(Xd,nh),bc(Yd,ih),bc(Kd,Wd),Kd.prototype.Ba=function(){mu(this.g,"a")},Kd.prototype.Aa=function(t){mu(this.g,new Xd(t))},Kd.prototype.za=function(t){mu(this.g,new Yd)},Kd.prototype.ya=function(){mu(this.g,"b")},bc(Qd,(function(){this.blockSize=-1})),Qd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qd.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(0==r)for(;o<=n;)$d(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){$d(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){$d(this,i),r=0;break}}this.h=r,this.i+=e},Qd.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Zd={};function tf(t){return-128<=t&&128>t?function(t,e){var n=Zd;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new Jd([0|t],0>t?-1:0)})):new Jd([0|t],0>t?-1:0)}function ef(t){if(isNaN(t)||!isFinite(t))return rf;if(0>t)return cf(ef(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=nf;return new Jd(e,0)}var nf=4294967296,rf=tf(0),of=tf(1),sf=tf(16777216);function af(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function lf(t){return-1==t.h}function cf(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Jd(n,~t.h).add(of)}function uf(t,e){return t.add(cf(e))}function hf(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function df(t,e){this.g=t,this.h=e}function ff(t,e){if(af(e))throw Error("division by zero");if(af(t))return new df(rf,rf);if(lf(t))return e=ff(cf(t),e),new df(cf(e.g),cf(e.h));if(lf(e))return e=ff(t,cf(e)),new df(cf(e.g),e.h);if(30<t.g.length){if(lf(t)||lf(e))throw Error("slowDivide_ only works with positive integers.");for(var n=of,i=e;0>=i.X(t);)n=pf(n),i=pf(i);var r=gf(n,1),o=gf(i,1);for(i=gf(i,2),n=gf(n,2);!af(i);){var s=o.add(i);0>=s.X(t)&&(r=r.add(n),o=s),i=gf(i,1),n=gf(n,1)}return e=uf(t,r.R(e)),new df(r,e)}for(r=rf;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),s=(o=ef(n)).R(e);lf(s)||0<s.X(t);)s=(o=ef(n-=i)).R(e);af(o)&&(o=of),r=r.add(o),t=uf(t,s)}return new df(r,t)}function pf(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Jd(n,t.h)}function gf(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Jd(r,t.h)}(sc=Jd.prototype).ea=function(){if(lf(this))return-cf(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:nf+i)*e,e*=nf}return t},sc.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(af(this))return"0";if(lf(this))return"-"+cf(this).toString(t);for(var e=ef(Math.pow(t,6)),n=this,i="";;){var r=ff(n,e).g,o=((0<(n=uf(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(af(n=r))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},sc.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},sc.X=function(t){return lf(t=uf(this,t))?-1:af(t)?0:1},sc.abs=function(){return lf(this)?cf(this):this},sc.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(65535&this.D(r))+(65535&t.D(r)),s=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new Jd(n,-2147483648&n[n.length-1]?-1:0)},sc.R=function(t){if(af(this)||af(t))return rf;if(lf(this))return lf(t)?cf(this).R(cf(t)):cf(cf(this).R(t));if(lf(t))return cf(this.R(cf(t)));if(0>this.X(sf)&&0>t.X(sf))return ef(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,s=65535&this.D(i),a=t.D(r)>>>16,l=65535&t.D(r);n[2*i+2*r]+=s*l,hf(n,2*i+2*r),n[2*i+2*r+1]+=o*l,hf(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,hf(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,hf(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Jd(n,0)},sc.gb=function(t){return ff(this,t).h},sc.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Jd(n,this.h&t.h)},sc.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Jd(n,this.h|t.h)},sc.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Jd(n,this.h^t.h)},Gd.prototype.createWebChannel=Gd.prototype.g,qd.prototype.send=qd.prototype.u,qd.prototype.open=qd.prototype.m,qd.prototype.close=qd.prototype.close,Ku.NO_ERROR=0,Ku.TIMEOUT=8,Ku.HTTP_ERROR=6,Qu.COMPLETE="complete",Zu.EventType=eh,eh.OPEN="a",eh.CLOSE="b",eh.ERROR="c",eh.MESSAGE="d",gu.prototype.listen=gu.prototype.O,hd.prototype.listenOnce=hd.prototype.P,hd.prototype.getLastError=hd.prototype.Sa,hd.prototype.getLastErrorCode=hd.prototype.Ia,hd.prototype.getStatus=hd.prototype.da,hd.prototype.getResponseJson=hd.prototype.Wa,hd.prototype.getResponseText=hd.prototype.ja,hd.prototype.send=hd.prototype.ha,hd.prototype.setWithCredentials=hd.prototype.Oa,Qd.prototype.digest=Qd.prototype.l,Qd.prototype.reset=Qd.prototype.reset,Qd.prototype.update=Qd.prototype.j,Jd.prototype.add=Jd.prototype.add,Jd.prototype.multiply=Jd.prototype.R,Jd.prototype.modulo=Jd.prototype.gb,Jd.prototype.compare=Jd.prototype.X,Jd.prototype.toNumber=Jd.prototype.ea,Jd.prototype.toString=Jd.prototype.toString,Jd.prototype.getBits=Jd.prototype.D,Jd.fromNumber=ef,Jd.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return cf(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ef(Math.pow(n,8)),r=rf,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),a=parseInt(e.substring(o,o+s),n);8>s?(s=ef(Math.pow(n,s)),r=r.R(s).add(ef(a))):r=(r=r.R(i)).add(ef(a))}return r};var mf=lc.createWebChannelTransport=function(){return new Gd},vf=lc.getStatEventTarget=function(){return zu()},yf=lc.ErrorCode=Ku,bf=lc.EventType=Qu,_f=lc.Event=Uu,wf=lc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xf=(lc.FetchXmlHttpFactory=rd,lc.WebChannel=Zu),Cf=lc.XhrIo=hd,Sf=lc.Md5=Qd,Tf=lc.Integer=Jd;const Ef="@firebase/firestore";class kf{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}kf.UNAUTHENTICATED=new kf(null),kf.GOOGLE_CREDENTIALS=new kf("google-credentials-uid"),kf.FIRST_PARTY=new kf("first-party-uid"),kf.MOCK_USER=new kf("mock-user");let Of="10.8.0";const Af=new dl("@firebase/firestore");function If(){return Af.logLevel}function Df(t){if(Af.logLevel<=al.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Mf);Af.debug("Firestore (".concat(Of,"): ").concat(t),...r)}}function Pf(t){if(Af.logLevel<=al.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Mf);Af.error("Firestore (".concat(Of,"): ").concat(t),...r)}}function Lf(t){if(Af.logLevel<=al.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Mf);Af.warn("Firestore (".concat(Of,"): ").concat(t),...r)}}function Mf(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Rf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(Of,") INTERNAL ASSERTION FAILED: ")+t;throw Pf(e),new Error(e)}function Ff(t,e){t||Rf()}function jf(t,e){return t}const Nf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bf extends Ga{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Uf{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Vf{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class zf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(kf.UNAUTHENTICATED)))}shutdown(){}}class Hf{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Wf{constructor(t){this.t=t,this.currentUser=kf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Uf;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Uf,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},s=t=>{Df("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((t=>s(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?s(t):(Df("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Uf)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Df("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ff("string"==typeof e.accessToken),new Vf(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ff(null===t||"string"==typeof t),new kf(t)}}class Gf{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=kf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qf{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Gf(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(kf.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yf{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Df("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,Df("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Df("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Df("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ff("string"==typeof t.token),this.R=t.token,new Xf(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kf(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Qf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Kf(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62))}return n}}function $f(t,e){return t<e?-1:t>e?1:0}function Jf(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Zf{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bf(Nf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bf(Nf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Bf(Nf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bf(Nf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Zf.fromMillis(Date.now())}static fromDate(t){return Zf.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Zf(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?$f(this.nanoseconds,t.nanoseconds):$f(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tp{constructor(t){this.timestamp=t}static fromTimestamp(t){return new tp(t)}static min(){return new tp(new Zf(0,0))}static max(){return new tp(new Zf(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ep{constructor(t,e,n){void 0===e?e=0:e>t.length&&Rf(),void 0===n?n=t.length-e:n>t.length-e&&Rf(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===ep.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ep?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class np extends ep{construct(t,e,n){return new np(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((t=>t.length>0)))}return new np(t)}static emptyPath(){return new np([])}}const ip=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rp extends ep{construct(t,e,n){return new rp(t,e,n)}static isValidIdentifier(t){return ip.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rp.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rp(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let o=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Bf(Nf.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Bf(Nf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(o=!o,i++):"."!==e||o?(n+=e,i++):(r(),i++)}if(r(),o)throw new Bf(Nf.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new rp(e)}static emptyPath(){return new rp([])}}class op{constructor(t){this.path=t}static fromPath(t){return new op(np.fromString(t))}static fromName(t){return new op(np.fromString(t).popFirst(5))}static empty(){return new op(np.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===np.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return np.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new op(new np(t.slice()))}}class sp{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}sp.UNKNOWN_ID=-1;function ap(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=tp.fromTimestamp(1e9===i?new Zf(n+1,0):new Zf(n,i));return new cp(r,op.empty(),e)}function lp(t){return new cp(t.readTime,t.key,-1)}class cp{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new cp(tp.min(),op.empty(),-1)}static max(){return new cp(tp.max(),op.empty(),-1)}}function up(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=op.comparator(t.documentKey,e.documentKey),0!==n?n:$f(t.largestBatchId,e.largestBatchId))}const hp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function fp(t){if(t.code!==Nf.FAILED_PRECONDITION||t.message!==hp)throw t;Df("LocalStore","Unexpectedly lost primary lease")}class pp{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Rf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new pp(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof pp?e:pp.resolve(e)}catch(t){return pp.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):pp.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):pp.reject(e)}static resolve(t){return new pp(((e,n)=>{e(t)}))}static reject(t){return new pp(((e,n)=>{n(t)}))}static waitFor(t){return new pp(((e,n)=>{let i=0,r=0,o=!1;t.forEach((t=>{++i,t.next((()=>{++r,o&&r===i&&e()}),(t=>n(t)))})),o=!0,r===i&&e()}))}static or(t){let e=pp.resolve(!1);for(const n of t)e=e.next((t=>t?pp.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new pp(((n,i)=>{const r=t.length,o=new Array(r);let s=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{o[l]=t,++s,s===r&&n(o)}),(t=>i(t)))}}))}static doWhile(t,e){return new pp(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class gp{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Uf,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new yp(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Cp(e.target.error);this.V.reject(new yp(t,n))}}static open(t,e,n,i){try{return new gp(e,t.transaction(i,n))}catch(t){throw new yp(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Df("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new _p(e)}}class mp{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===mp.S(Va())&&Pf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Df("SimpleDb","Removing database:",t),wp(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Ha())return!1;if(mp.C())return!0;const t=Va(),e=mp.S(t),n=0<e&&e<10,i=mp.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(Df("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new yp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Bf(Nf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Bf(Nf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new yp(t,i))},i.onupgradeneeded=t=>{Df("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{Df("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let o=0;for(;;){++o;try{this.db=await this.O(t);const e=gp.open(this.db,t,r?"readonly":"readwrite",n),o=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),pp.reject(t)))).toPromise();return o.catch((()=>{})),await e.m,o}catch(t){const e=t,n="FirebaseError"!==e.name&&o<3;if(Df("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class vp{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return wp(this.k.delete())}}class yp extends Bf{constructor(t,e){super(Nf.UNAVAILABLE,"IndexedDB transaction '".concat(t,"' failed: ").concat(e)),this.name="IndexedDbTransactionError"}}function bp(t){return"IndexedDbTransactionError"===t.name}class _p{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Df("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Df("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),wp(n)}add(t){return Df("SimpleDb","ADD",this.store.name,t,t),wp(this.store.add(t))}get(t){return wp(this.store.get(t)).next((e=>(void 0===e&&(e=null),Df("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Df("SimpleDb","DELETE",this.store.name,t),wp(this.store.delete(t))}count(){return Df("SimpleDb","COUNT",this.store.name),wp(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new pp(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new pp(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){Df("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new pp(((n,i)=>{e.onerror=t=>{const e=Cp(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new pp(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const o=new vp(r),s=e(r.primaryKey,r.value,o);if(s instanceof pp){const t=s.catch((t=>(o.done(),pp.reject(t))));n.push(t)}o.isDone?i():null===o.$?r.continue():r.continue(o.$)}})).next((()=>pp.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function wp(t){return new pp(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Cp(t.target.error);n(e)}}))}let xp=!1;function Cp(t){const e=mp.S(Va());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Bf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(e,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return xp||(xp=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Sp{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Tp(t){return null==t}function Ep(t){return 0===t&&1/t==-1/0}function kp(t){return"number"==typeof t&&Number.isInteger(t)&&!Ep(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}Sp._e=-1;const Op=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ap=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ip=Ap;function Dp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pp(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Mp{constructor(t,e){this.comparator=t,this.root=e||Fp.EMPTY}insert(t,e){return new Mp(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Fp.BLACK,null,null))}remove(t){return new Mp(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fp.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rp(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rp(this.root,t,this.comparator,!0)}}class Rp{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fp{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Fp.RED,this.left=null!=i?i:Fp.EMPTY,this.right=null!=r?r:Fp.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Fp(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fp.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Fp.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fp.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rf();if(this.right.isRed())throw Rf();const t=this.left.check();if(t!==this.right.check())throw Rf();return t+(this.isRed()?0:1)}}Fp.EMPTY=null,Fp.RED=!0,Fp.BLACK=!1,Fp.EMPTY=new class{constructor(){this.size=0}get key(){throw Rf()}get value(){throw Rf()}get color(){throw Rf()}get left(){throw Rf()}get right(){throw Rf()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Fp(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jp{constructor(t){this.comparator=t,this.data=new Mp(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Np(this.data.getIterator())}getIteratorFrom(t){return new Np(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof jp))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new jp(this.comparator);return e.data=t,e}}class Np{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bp{constructor(t){this.fields=t,t.sort(rp.comparator)}static empty(){return new Bp([])}unionWith(t){let e=new jp(rp.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Bp(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Jf(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Up extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vp{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Up("Invalid base64 string: "+t):t}}(t);return new Vp(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Vp(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $f(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vp.EMPTY_BYTE_STRING=new Vp("");const zp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hp(t){if(Ff(!!t),"string"==typeof t){let e=0;const n=zp.exec(t);if(Ff(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wp(t.seconds),nanos:Wp(t.nanos)}}function Wp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Gp(t){return"string"==typeof t?Vp.fromBase64String(t):Vp.fromUint8Array(t)}function qp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xp(t){const e=t.mapValue.fields.__previous_value__;return qp(e)?Xp(e):e}function Yp(t){const e=Hp(t.mapValue.fields.__local_write_time__.timestampValue);return new Zf(e.seconds,e.nanos)}class Kp{constructor(t,e,n,i,r,o,s,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Qp{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Qp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Qp&&t.projectId===this.projectId&&t.database===this.database}}const $p={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qp(t)?4:dg(t)?9007199254740991:10:Rf()}function Zp(t,e){if(t===e)return!0;const n=Jp(t);if(n!==Jp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yp(t).isEqual(Yp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Hp(t.timestampValue),i=Hp(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Gp(t.bytesValue).isEqual(Gp(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Wp(t.geoPointValue.latitude)===Wp(e.geoPointValue.latitude)&&Wp(t.geoPointValue.longitude)===Wp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Wp(t.integerValue)===Wp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Wp(t.doubleValue),i=Wp(e.doubleValue);return n===i?Ep(n)===Ep(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Jf(t.arrayValue.values||[],e.arrayValue.values||[],Zp);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Dp(n)!==Dp(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Zp(n[r],i[r])))return!1;return!0}(t,e);default:return Rf()}}function tg(t,e){return void 0!==(t.values||[]).find((t=>Zp(t,e)))}function eg(t,e){if(t===e)return 0;const n=Jp(t),i=Jp(e);if(n!==i)return $f(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $f(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Wp(t.integerValue||t.doubleValue),i=Wp(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ng(t.timestampValue,e.timestampValue);case 4:return ng(Yp(t),Yp(e));case 5:return $f(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Gp(t),i=Gp(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=$f(n[r],i[r]);if(0!==t)return t}return $f(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=$f(Wp(t.latitude),Wp(e.latitude));return 0!==n?n:$f(Wp(t.longitude),Wp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=eg(n[r],i[r]);if(t)return t}return $f(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===$p.mapValue&&e===$p.mapValue)return 0;if(t===$p.mapValue)return 1;if(e===$p.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let s=0;s<i.length&&s<o.length;++s){const t=$f(i[s],o[s]);if(0!==t)return t;const e=eg(n[i[s]],r[o[s]]);if(0!==e)return e}return $f(i.length,o.length)}(t.mapValue,e.mapValue);default:throw Rf()}}function ng(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $f(t,e);const n=Hp(t),i=Hp(e),r=$f(n.seconds,i.seconds);return 0!==r?r:$f(n.nanos,i.nanos)}function ig(t){return rg(t)}function rg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Hp(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Gp(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return op.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=rg(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(rg(t.fields[r]));return n+"}"}(t.mapValue):Rf()}function og(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function sg(t){return!!t&&"integerValue"in t}function ag(t){return!!t&&"arrayValue"in t}function lg(t){return!!t&&"nullValue"in t}function cg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ug(t){return!!t&&"mapValue"in t}function hg(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Pp(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=hg(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hg(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dg(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class fg{constructor(t){this.value=t}static empty(){return new fg({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ug(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=hg(e)}setAll(t){let e=rp.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=hg(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());ug(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Zp(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Pp(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new fg(hg(this.value))}}function pg(t){const e=[];return Pp(t.fields,((t,n)=>{const i=new rp([t]);if(ug(n)){const t=pg(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Bp(e)}class gg{constructor(t,e,n,i,r,o,s){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=s}static newInvalidDocument(t){return new gg(t,0,tp.min(),tp.min(),tp.min(),fg.empty(),0)}static newFoundDocument(t,e,n,i){return new gg(t,1,e,tp.min(),n,i,0)}static newNoDocument(t,e){return new gg(t,2,e,tp.min(),tp.min(),fg.empty(),0)}static newUnknownDocument(t,e){return new gg(t,3,e,tp.min(),tp.min(),fg.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(tp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fg.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tp.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof gg&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mg{constructor(t,e){this.position=t,this.inclusive=e}}function vg(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],s=t.position[r];if(i=o.field.isKeyField()?op.comparator(op.fromName(s.referenceValue),n.key):eg(s,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function yg(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zp(t.position[n],e.position[n]))return!1;return!0}class bg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function _g(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class wg{}class xg extends wg{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Ig(t,e,n):"array-contains"===e?new Mg(t,n):"in"===e?new Rg(t,n):"not-in"===e?new Fg(t,n):"array-contains-any"===e?new jg(t,n):new xg(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Dg(t,n):new Pg(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(eg(e,this.value)):null!==e&&Jp(this.value)===Jp(e)&&this.matchesComparison(eg(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Rf()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cg extends wg{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Cg(t,e)}matches(t){return Sg(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sg(t){return"and"===t.op}function Tg(t){return Eg(t)&&Sg(t)}function Eg(t){for(const e of t.filters)if(e instanceof Cg)return!1;return!0}function kg(t){if(t instanceof xg)return t.field.canonicalString()+t.op.toString()+ig(t.value);if(Tg(t))return t.filters.map((t=>kg(t))).join(",");{const e=t.filters.map((t=>kg(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function Og(t,e){return t instanceof xg?function(t,e){return e instanceof xg&&t.op===e.op&&t.field.isEqual(e.field)&&Zp(t.value,e.value)}(t,e):t instanceof Cg?function(t,e){return e instanceof Cg&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Og(n,e.filters[i])),!0)}(t,e):void Rf()}function Ag(t){return t instanceof xg?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(ig(t.value))}(t):t instanceof Cg?function(t){return t.op.toString()+" {"+t.getFilters().map(Ag).join(" ,")+"}"}(t):"Filter"}class Ig extends xg{constructor(t,e,n){super(t,e,n),this.key=op.fromName(n.referenceValue)}matches(t){const e=op.comparator(t.key,this.key);return this.matchesComparison(e)}}class Dg extends xg{constructor(t,e){super(t,"in",e),this.keys=Lg("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Pg extends xg{constructor(t,e){super(t,"not-in",e),this.keys=Lg("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Lg(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>op.fromName(t.referenceValue)))}class Mg extends xg{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ag(e)&&tg(e.arrayValue,this.value)}}class Rg extends xg{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&tg(this.value.arrayValue,e)}}class Fg extends xg{constructor(t,e){super(t,"not-in",e)}matches(t){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!tg(this.value.arrayValue,e)}}class jg extends xg{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ag(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>tg(this.value.arrayValue,t)))}}class Ng{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.ce=null}}function Bg(t){return new Ng(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ug(t){const e=jf(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>kg(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ig(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ig(t))).join(",")),e.ce=t}return e.ce}function Vg(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_g(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Og(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yg(t.startAt,e.startAt)&&yg(t.endAt,e.endAt)}function zg(t){return op.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Hg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Wg(t,e,n,i,r,o,s,a){return new Hg(t,e,n,i,r,o,s,a)}function Gg(t){return new Hg(t)}function qg(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Xg(t){return null!==t.collectionGroup}function Yg(t){const e=jf(t);if(null===e.le){e.le=[];const t=new Set;for(const r of e.explicitOrderBy)e.le.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new jp(rp.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new bg(i,n))})),t.has(rp.keyField().canonicalString())||e.le.push(new bg(rp.keyField(),n))}return e.le}function Kg(t){const e=jf(t);return e.he||(e.he=Qg(e,Yg(t))),e.he}function Qg(t,e){if("F"===t.limitType)return Bg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new bg(t.field,e)}));const n=t.endAt?new mg(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new mg(t.startAt.position,t.startAt.inclusive):null;return Bg(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function $g(t,e){const n=t.filters.concat([e]);return new Hg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jg(t,e,n){return new Hg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zg(t,e){return Vg(Kg(t),Kg(e))&&t.limitType===e.limitType}function tm(t){return"".concat(Ug(Kg(t)),"|lt:").concat(t.limitType)}function em(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>Ag(t))).join(", "),"]")),Tp(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ig(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ig(t))).join(",")),"Target(".concat(e,")")}(Kg(t)),"; limitType=").concat(t.limitType,")")}function nm(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):op.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Yg(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=vg(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Yg(t),e))&&!(t.endAt&&!function(t,e,n){const i=vg(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Yg(t),e))}(t,e)}function im(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rm(t){return(e,n)=>{let i=!1;for(const r of Yg(t)){const t=om(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function om(t,e,n){const i=t.field.isKeyField()?op.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?eg(i,r):Rf()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Rf()}}class sm{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Pp(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return Lp(this.inner)}size(){return this.innerSize}}const am=new Mp(op.comparator);function lm(){return am}const cm=new Mp(op.comparator);function um(){let t=cm;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function hm(t){let e=cm;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function dm(){return pm()}function fm(){return pm()}function pm(){return new sm((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gm=new Mp(op.comparator),mm=new jp(op.comparator);function vm(){let t=mm;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const ym=new jp($f);function bm(){return ym}function _m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ep(e)?"-0":e}}function wm(t){return{integerValue:""+t}}function xm(t,e){return kp(e)?wm(e):_m(t,e)}class Cm{constructor(){this._=void 0}}function Sm(t,e,n){return t instanceof km?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&qp(e)&&(e=Xp(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Om?Am(t,e):t instanceof Im?Dm(t,e):function(t,e){const n=Em(t,e),i=Lm(n)+Lm(t.Ie);return sg(n)&&sg(t.Ie)?wm(i):_m(t.serializer,i)}(t,e)}function Tm(t,e,n){return t instanceof Om?Am(t,e):t instanceof Im?Dm(t,e):n}function Em(t,e){return t instanceof Pm?function(t){return sg(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class km extends Cm{}class Om extends Cm{constructor(t){super(),this.elements=t}}function Am(t,e){const n=Mm(e);for(const i of t.elements)n.some((t=>Zp(t,i)))||n.push(i);return{arrayValue:{values:n}}}class Im extends Cm{constructor(t){super(),this.elements=t}}function Dm(t,e){let n=Mm(e);for(const i of t.elements)n=n.filter((t=>!Zp(t,i)));return{arrayValue:{values:n}}}class Pm extends Cm{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Lm(t){return Wp(t.integerValue||t.doubleValue)}function Mm(t){return ag(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Rm{constructor(t,e){this.version=t,this.transformResults=e}}class Fm{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Fm}static exists(t){return new Fm(void 0,t)}static updateTime(t){return new Fm(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Nm{}function Bm(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Km(t.key,Fm.none()):new Wm(t.key,t.data,Fm.none());{const n=t.data,i=fg.empty();let r=new jp(rp.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Gm(t.key,i,new Bp(r.toArray()),Fm.none())}}function Um(t,e,n){t instanceof Wm?function(t,e,n){const i=t.value.clone(),r=Xm(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Gm?function(t,e,n){if(!jm(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Xm(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(qm(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Vm(t,e,n,i){return t instanceof Wm?function(t,e,n,i){if(!jm(t.precondition,e))return n;const r=t.value.clone(),o=Ym(t.fieldTransforms,i,e);return r.setAll(o),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Gm?function(t,e,n,i){if(!jm(t.precondition,e))return n;const r=Ym(t.fieldTransforms,i,e),o=e.data;return o.setAll(qm(t)),o.setAll(r),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return jm(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function zm(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Em(i.transform,t||null);null!=r&&(null===n&&(n=fg.empty()),n.set(i.field,r))}return n||null}function Hm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Jf(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Om&&e instanceof Om||t instanceof Im&&e instanceof Im?Jf(t.elements,e.elements,Zp):t instanceof Pm&&e instanceof Pm?Zp(t.Ie,e.Ie):t instanceof km&&e instanceof km}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wm extends Nm{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gm extends Nm{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function qm(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Xm(t,e,n){const i=new Map;Ff(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,Tm(s,a,n[r]))}return i}function Ym(t,e,n){const i=new Map;for(const r of t){const t=r.transform,o=n.data.field(r.field);i.set(r.field,Sm(t,o,e))}return i}class Km extends Nm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qm extends Nm{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $m{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Um(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Vm(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Vm(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=fm();return this.mutations.forEach((i=>{const r=t.get(i.key),o=r.overlayedDocument;let s=this.applyToLocalView(o,r.mutatedFields);s=e.has(i.key)?null:s;const a=Bm(o,s);null!==a&&n.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(tp.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),vm())}isEqual(t){return this.batchId===t.batchId&&Jf(this.mutations,t.mutations,((t,e)=>Hm(t,e)))&&Jf(this.baseMutations,t.baseMutations,((t,e)=>Hm(t,e)))}}class Jm{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Ff(t.mutations.length===n.length);let i=gm;const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,n[o].version);return new Jm(t,e,n,i)}}class Zm{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class tv{constructor(t,e){this.count=t,this.unchangedNames=e}}var ev,nv;function iv(t){switch(t){default:return Rf();case Nf.CANCELLED:case Nf.UNKNOWN:case Nf.DEADLINE_EXCEEDED:case Nf.RESOURCE_EXHAUSTED:case Nf.INTERNAL:case Nf.UNAVAILABLE:case Nf.UNAUTHENTICATED:return!1;case Nf.INVALID_ARGUMENT:case Nf.NOT_FOUND:case Nf.ALREADY_EXISTS:case Nf.PERMISSION_DENIED:case Nf.FAILED_PRECONDITION:case Nf.ABORTED:case Nf.OUT_OF_RANGE:case Nf.UNIMPLEMENTED:case Nf.DATA_LOSS:return!0}}function rv(t){if(void 0===t)return Pf("GRPC error has no .code"),Nf.UNKNOWN;switch(t){case ev.OK:return Nf.OK;case ev.CANCELLED:return Nf.CANCELLED;case ev.UNKNOWN:return Nf.UNKNOWN;case ev.DEADLINE_EXCEEDED:return Nf.DEADLINE_EXCEEDED;case ev.RESOURCE_EXHAUSTED:return Nf.RESOURCE_EXHAUSTED;case ev.INTERNAL:return Nf.INTERNAL;case ev.UNAVAILABLE:return Nf.UNAVAILABLE;case ev.UNAUTHENTICATED:return Nf.UNAUTHENTICATED;case ev.INVALID_ARGUMENT:return Nf.INVALID_ARGUMENT;case ev.NOT_FOUND:return Nf.NOT_FOUND;case ev.ALREADY_EXISTS:return Nf.ALREADY_EXISTS;case ev.PERMISSION_DENIED:return Nf.PERMISSION_DENIED;case ev.FAILED_PRECONDITION:return Nf.FAILED_PRECONDITION;case ev.ABORTED:return Nf.ABORTED;case ev.OUT_OF_RANGE:return Nf.OUT_OF_RANGE;case ev.UNIMPLEMENTED:return Nf.UNIMPLEMENTED;case ev.DATA_LOSS:return Nf.DATA_LOSS;default:return Rf()}}(nv=ev||(ev={}))[nv.OK=0]="OK",nv[nv.CANCELLED=1]="CANCELLED",nv[nv.UNKNOWN=2]="UNKNOWN",nv[nv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nv[nv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nv[nv.NOT_FOUND=5]="NOT_FOUND",nv[nv.ALREADY_EXISTS=6]="ALREADY_EXISTS",nv[nv.PERMISSION_DENIED=7]="PERMISSION_DENIED",nv[nv.UNAUTHENTICATED=16]="UNAUTHENTICATED",nv[nv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nv[nv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nv[nv.ABORTED=10]="ABORTED",nv[nv.OUT_OF_RANGE=11]="OUT_OF_RANGE",nv[nv.UNIMPLEMENTED=12]="UNIMPLEMENTED",nv[nv.INTERNAL=13]="INTERNAL",nv[nv.UNAVAILABLE=14]="UNAVAILABLE",nv[nv.DATA_LOSS=15]="DATA_LOSS";let ov=null;function sv(){return new TextEncoder}const av=new Tf([4294967295,4294967295],0);function lv(t){const e=sv().encode(t),n=new Sf;return n.update(e),new Uint8Array(n.digest())}function cv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tf([n,i],0),new Tf([r,o],0)]}class uv{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new hv("Invalid padding: ".concat(e));if(n<0)throw new hv("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new hv("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new hv("Invalid padding when bitmap length is 0: ".concat(e));this.Te=8*t.length-e,this.Ee=Tf.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(Tf.fromNumber(n)));return 1===i.compare(av)&&(i=new Tf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=lv(t),[n,i]=cv(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);if(!this.Ae(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new uv(r,i,e);return n.forEach((t=>o.insert(t))),o}insert(t){if(0===this.Te)return;const e=lv(t),[n,i]=cv(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);this.Re(t)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class hv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dv{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,fv.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new dv(tp.min(),i,new Mp($f),lm(),vm())}}class fv{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new fv(n,e,vm(),vm(),vm())}}class pv{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class gv{constructor(t,e){this.targetId=t,this.fe=e}}class mv{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class vv{constructor(){this.ge=0,this.pe=_v(),this.ye=Vp.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=vm(),e=vm(),n=vm();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Rf()}})),new fv(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=_v()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ff(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yv{constructor(t){this.Le=t,this.ke=new Map,this.qe=lm(),this.Qe=bv(),this.Ke=new Mp($f)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:Rf()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(zg(r))if(0===n){const t=new op(r.path);this.We(e,t,gg.newNoDocument(t,tp.min()))}else Ff(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==ov||ov.tt(function(t,e,n,i,r){var o,s,a,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}(i,t.fe,this.Le.nt(),n,r))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let o,s;try{o=Gp(n).toUint8Array()}catch(t){if(t instanceof Up)return Lf("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{s=new uv(o,i,r)}catch(t){return Lf(t instanceof hv?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===s.Te?null:s}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),o="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.mightContain(o)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&zg(r.target)){const e=new op(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,gg.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=vm();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new dv(t,e,this.Ke,this.qe,n);return this.qe=lm(),this.Qe=bv(),this.Ke=new Mp($f),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new vv,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new jp($f),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Df("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new vv),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function bv(){return new Mp(op.comparator)}function _v(){return new Mp(op.comparator)}const wv={asc:"ASCENDING",desc:"DESCENDING"},xv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cv={and:"AND",or:"OR"};class Sv{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Tv(t,e){return t.useProto3Json||Tp(e)?e:{value:e}}function Ev(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function kv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ov(t,e){return Ev(t,e.toTimestamp())}function Av(t){return Ff(!!t),tp.fromTimestamp(function(t){const e=Hp(t);return new Zf(e.seconds,e.nanos)}(t))}function Iv(t,e){return Dv(t,e).canonicalString()}function Dv(t,e){const n=function(t){return new np(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Pv(t){const e=np.fromString(t);return Ff(Jv(e)),e}function Lv(t,e){return Iv(t.databaseId,e.path)}function Mv(t,e){const n=Pv(e);if(n.get(1)!==t.databaseId.projectId)throw new Bf(Nf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Bf(Nf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new op(Nv(n))}function Rv(t,e){return Iv(t.databaseId,e)}function Fv(t){const e=Pv(t);return 4===e.length?np.emptyPath():Nv(e)}function jv(t){return new np(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Nv(t){return Ff(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Bv(t,e,n){return{name:Lv(t,e),fields:n.value.mapValue.fields}}function Uv(t,e){let n;if(e instanceof Wm)n={update:Bv(t,e.key,e.value)};else if(e instanceof Km)n={delete:Lv(t,e.key)};else if(e instanceof Gm)n={update:Bv(t,e.key,e.data),updateMask:$v(e.fieldMask)};else{if(!(e instanceof Qm))return Rf();n={verify:Lv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof km)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Om)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Im)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pm)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Rf()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ov(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Rf()}(t,e.precondition)),n}function Vv(t,e){return{documents:[Rv(t,e.path)]}}function zv(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Rv(t,r);const o=function(t){if(0!==t.length)return Qv(Cg.create(t,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Yv(t.field),direction:Gv(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Tv(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function Hv(t){let e=Fv(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ff(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let o=[];n.where&&(o=function(t){const e=Wv(t);return e instanceof Cg&&Tg(e)?e.getFilters():[e]}(n.where));let s=[];n.orderBy&&(s=function(t){return t.map((t=>function(t){return new bg(Kv(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Tp(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new mg(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new mg(n,e)}(n.endAt)),Wg(e,r,s,o,a,"F",l,c)}function Wv(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Kv(t.unaryFilter.field);return xg.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Kv(t.unaryFilter.field);return xg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Kv(t.unaryFilter.field);return xg.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Kv(t.unaryFilter.field);return xg.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Rf()}}(t):void 0!==t.fieldFilter?function(t){return xg.create(Kv(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rf()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Cg.create(t.compositeFilter.filters.map((t=>Wv(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Rf()}}(t.compositeFilter.op))}(t):Rf()}function Gv(t){return wv[t]}function qv(t){return xv[t]}function Xv(t){return Cv[t]}function Yv(t){return{fieldPath:t.canonicalString()}}function Kv(t){return rp.fromServerFormat(t.fieldPath)}function Qv(t){return t instanceof xg?function(t){if("=="===t.op){if(cg(t.value))return{unaryFilter:{field:Yv(t.field),op:"IS_NAN"}};if(lg(t.value))return{unaryFilter:{field:Yv(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(cg(t.value))return{unaryFilter:{field:Yv(t.field),op:"IS_NOT_NAN"}};if(lg(t.value))return{unaryFilter:{field:Yv(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yv(t.field),op:qv(t.op),value:t.value}}}(t):t instanceof Cg?function(t){const e=t.getFilters().map((t=>Qv(t)));return 1===e.length?e[0]:{compositeFilter:{op:Xv(t.op),filters:e}}}(t):Rf()}function $v(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jv(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Zv{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tp.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vp.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(t){return new Zv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ty{constructor(t){this.ct=t}}function ey(t){const e=Hv({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Jg(e,e.limit,"L"):e}class ny{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Wp(t.integerValue));else if("doubleValue"in t){const n=Wp(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Ep(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At("".concat(n.seconds||"")),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Gp(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?dg(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Rf()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const i of Object.keys(n))this.Rt(i,e),this.It(n[i],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const i of n)this.It(i,e)}gt(t,e){this.Et(e,37),op.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}ny.bt=new ny;class iy{constructor(){this._n=new ry}addToCollectionParentIndex(t,e){return this._n.add(e),pp.resolve()}getCollectionParents(t,e){return pp.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return pp.resolve()}deleteFieldIndex(t,e){return pp.resolve()}deleteAllFieldIndexes(t){return pp.resolve()}createTargetIndexes(t,e){return pp.resolve()}getDocumentsMatchingTarget(t,e){return pp.resolve(null)}getIndexType(t,e){return pp.resolve(0)}getFieldIndexes(t,e){return pp.resolve([])}getNextCollectionGroupToUpdate(t){return pp.resolve(null)}getMinOffset(t,e){return pp.resolve(cp.min())}getMinOffsetFromCollectionGroup(t,e){return pp.resolve(cp.min())}updateCollectionGroup(t,e,n){return pp.resolve()}updateIndexEntries(t,e){return pp.resolve()}}class ry{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new jp(np.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new jp(np.comparator)).toArray()}}new Uint8Array(0);class oy{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new oy(t,oy.DEFAULT_COLLECTION_PERCENTILE,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}oy.DEFAULT_COLLECTION_PERCENTILE=10,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oy.DEFAULT=new oy(41943040,oy.DEFAULT_COLLECTION_PERCENTILE,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oy.DISABLED=new oy(-1,0,0);class sy{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new sy(0)}static Bn(){return new sy(-1)}}class ay{constructor(){this.changes=new sm((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gg.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?pp.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ly{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class cy{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Vm(n.mutation,t,Bp.empty(),Zf.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,vm()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vm();const i=dm();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=um();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=dm();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,vm())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=lm();const o=pm(),s=pm();return e.forEach(((t,e)=>{const s=n.get(e.key);i.has(e.key)&&(void 0===s||s.mutation instanceof Gm)?r=r.insert(e.key,e):void 0!==s?(o.set(e.key,s.mutation.getFieldMask()),Vm(s.mutation,e,s.mutation.getFieldMask(),Zf.now())):o.set(e.key,Bp.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>o.set(t,e))),e.forEach(((t,e)=>{var n;return s.set(t,new ly(e,null!==(n=o.get(t))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(t,e){const n=pm();let i=new Mp(((t,e)=>t-e)),r=vm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const o=e.get(t);if(null===o)return;let s=n.get(t)||Bp.empty();s=r.applyToLocalView(o,s),n.set(t,s);const a=(i.get(r.batchId)||vm()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const i=s.getNext(),a=i.key,l=i.value,c=fm();l.forEach((t=>{if(!r.has(t)){const i=Bm(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}})),o.push(this.documentOverlayCache.saveOverlays(t,a,c))}return pp.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return op.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Xg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):pp.resolve(dm());let s=-1,a=r;return o.next((e=>pp.forEach(e,((e,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(e)?pp.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,vm()))).next((t=>({batchId:s,changes:hm(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new op(e)).next((t=>{let e=um();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let o=um();return this.indexManager.getCollectionParents(t,r).next((s=>pp.forEach(s,(s=>{const a=function(t,e){return new Hg(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{o=o.insert(t,e)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,gg.newInvalidDocument(i)))}));let n=um();return t.forEach(((t,i)=>{const o=r.get(t);void 0!==o&&Vm(o.mutation,i,Bp.empty(),Zf.now()),nm(e,i)&&(n=n.insert(t,i))})),n}))}}class uy{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return pp.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Av(t.createTime)}}(e)),pp.resolve()}getNamedQuery(t,e){return pp.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:ey(t.bundledQuery),readTime:Av(t.readTime)}}(e)),pp.resolve()}}class hy{constructor(){this.overlays=new Mp(op.comparator),this.hr=new Map}getOverlay(t,e){return pp.resolve(this.overlays.get(e))}getOverlays(t,e){const n=dm();return pp.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),pp.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),pp.resolve()}getOverlaysForCollection(t,e,n){const i=dm(),r=e.length+1,o=new op(e.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const t=s.getNext().value,o=t.getKey();if(!e.isPrefixOf(o.path))break;o.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return pp.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Mp(((t,e)=>t-e));const o=this.overlays.getIterator();for(;o.hasNext();){const t=o.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=dm(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const s=dm(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>s.set(t,e))),!(s.size()>=i)););return pp.resolve(s)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Zm(e,n));let r=this.hr.get(e);void 0===r&&(r=vm(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class dy{constructor(){this.Pr=new jp(fy.Ir),this.Tr=new jp(fy.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new fy(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new fy(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new op(new np([])),n=new fy(e,t),i=new fy(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new op(new np([])),n=new fy(e,t),i=new fy(e,t+1);let r=vm();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new fy(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class fy{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return op.comparator(t.key,e.key)||$f(t.pr,e.pr)}static Er(t,e){return $f(t.pr,e.pr)||op.comparator(t.key,e.key)}}class py{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new jp(fy.Ir)}checkEmpty(t){return pp.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $m(r,e,n,i);this.mutationQueue.push(o);for(const s of i)this.wr=this.wr.add(new fy(s.key,r)),this.indexManager.addToCollectionParentIndex(t,s.key.path.popLast());return pp.resolve(o)}lookupMutationBatch(t,e){return pp.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return pp.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return pp.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return pp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new fy(e,0),i=new fy(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),pp.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new jp($f);return e.forEach((t=>{const e=new fy(t,0),i=new fy(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),pp.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;op.isDocumentKey(r)||(r=r.child(""));const o=new fy(new op(r),0);let s=new jp($f);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.pr)),!0)}),o),pp.resolve(this.Dr(s))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Ff(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return pp.forEach(e.mutations,(i=>{const r=new fy(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new fy(e,0),i=this.wr.firstAfterOrEqual(n);return pp.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,pp.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class gy{constructor(t){this.vr=t,this.docs=new Mp(op.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return pp.resolve(n?n.document.mutableCopy():gg.newInvalidDocument(e))}getEntries(t,e){let n=lm();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():gg.newInvalidDocument(t))})),pp.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=lm();const o=e.path,s=new op(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:t,value:{document:s}}=a.getNext();if(!o.isPrefixOf(t.path))break;t.path.length>o.length+1||up(lp(s),n)<=0||(i.has(s.key)||nm(e,s))&&(r=r.insert(s.key,s.mutableCopy()))}return pp.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Rf()}Fr(t,e){return pp.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new my(this)}getSize(t){return pp.resolve(this.size)}}class my extends ay{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),pp.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class vy{constructor(t){this.persistence=t,this.Mr=new sm((t=>Ug(t)),Vg),this.lastRemoteSnapshotVersion=tp.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dy,this.targetCount=0,this.Br=sy.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),pp.resolve()}getLastRemoteSnapshotVersion(t){return pp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pp.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),pp.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),pp.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new sy(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,pp.resolve()}updateTargetData(t,e){return this.qn(e),pp.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,pp.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=e&&null===n.get(s.targetId)&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),pp.waitFor(r).next((()=>i))}getTargetCount(t){return pp.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return pp.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),pp.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),pp.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),pp.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return pp.resolve(n)}containsKey(t,e){return pp.resolve(this.Nr.containsKey(e))}}class yy{constructor(t,e){this.Lr={},this.overlays={},this.kr=new Sp(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new vy(this),this.indexManager=new iy,this.remoteDocumentCache=function(t){return new gy(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new ty(e),this.$r=new uy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new hy,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new py(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Df("MemoryPersistence","Starting transaction:",t);const i=new by(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return pp.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class by extends dp{constructor(t){super(),this.currentSequenceNumber=t}}class _y{constructor(t){this.persistence=t,this.zr=new dy,this.jr=null}static Hr(t){return new _y(t)}get Jr(){if(this.jr)return this.jr;throw Rf()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),pp.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),pp.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),pp.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pp.forEach(this.Jr,(n=>{const i=op.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,tp.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return pp.or([()=>pp.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class wy{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=vm(),i=vm();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new wy(t,e.fromCache,n,i)}}class xy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Cy{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=za()?8:mp.v(Va())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new xy;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(If()<=al.DEBUG&&Df("QueryEngine","SDK will not create cache indexes for query:",em(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),pp.resolve()):(If()<=al.DEBUG&&Df("QueryEngine","Query:",em(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(If()<=al.DEBUG&&Df("QueryEngine","The SDK decides to create cache indexes for query:",em(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kg(e))):pp.resolve())}ji(t,e){if(qg(e))return pp.resolve(null);let n=Kg(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Jg(e,null,"F"),n=Kg(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=vm(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const o=this.Zi(e,i);return this.Xi(e,o,r,n.readTime)?this.ji(t,Jg(e,null,"F")):this.es(t,o,e,n)}))))})))))}Hi(t,e,n,i){return qg(e)||i.isEqual(tp.min())?pp.resolve(null):this.zi.getDocuments(t,n).next((r=>{const o=this.Zi(e,r);return this.Xi(e,o,n,i)?pp.resolve(null):(If()<=al.DEBUG&&Df("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),em(e)),this.es(t,o,e,ap(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new jp(rm(t));return e.forEach(((e,i)=>{nm(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return If()<=al.DEBUG&&Df("QueryEngine","Using full collection scan to execute query:",em(e)),this.zi.getDocumentsMatchingQuery(t,e,cp.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Sy{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new Mp($f),this.rs=new sm((t=>Ug(t)),Vg),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cy(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function Ty(t,e,n,i){return new Sy(t,e,n,i)}async function Ey(t,e){const n=jf(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],o=[];let s=vm();for(const t of i){r.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}for(const t of e){o.push(t.batchId);for(const e of t.mutations)s=s.add(e.key)}return n.localDocuments.getDocuments(t,s).next((t=>({us:t,removedBatchIds:r,addedBatchIds:o})))}))}))}function ky(t){const e=jf(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Oy(t,e,n){let i=vm(),r=vm();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=lm();return n.forEach(((n,o)=>{const s=t.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),o.isNoDocument()&&o.version.isEqual(tp.min())?(e.removeEntry(n,o.readTime),i=i.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(o),i=i.insert(n,o)):Df("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:i,ls:r}}))}function Ay(t,e){const n=jf(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Iy(t,e){const n=jf(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,pp.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new Zv(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function Dy(t,e,n){const i=jf(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!bp(t))throw t;Df("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Py(t,e,n){const i=jf(t);let r=tp.min(),o=vm();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=jf(t),r=i.rs.get(n);return void 0!==r?pp.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,Kg(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{o=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:tp.min(),n?o:vm()))).next((t=>(Ly(i,im(e),t),{documents:t,hs:o})))))}function Ly(t,e,n){let i=t.ss.get(e)||tp.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}class My{constructor(){this.activeTargetIds=bm()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ry{constructor(){this.no=new My,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new My,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Fy{io(t){}shutdown(){}}class jy{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Df("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Df("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ny=null;function By(){return null===Ny?Ny=268435456+Math.round(2147483648*Math.random()):Ny++,"0x"+Ny.toString(16)}const Uy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vy{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const zy="WebChannelConnection";class Hy extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po="projects/".concat(n,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get wo(){return!1}So(t,e,n,i,r){const o=By(),s=this.bo(t,e.toUriEncodedString());Df("RestConnection","Sending RPC '".concat(t,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,s,a,n).then((e=>(Df("RestConnection","Received RPC '".concat(t,"' ").concat(o,": "),e),e)),(e=>{throw Lf("RestConnection","RPC '".concat(t,"' ").concat(o," failed with error: "),e,"url: ",s,"request:",n),e}))}vo(t,e,n,i,r,o){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Of,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Uy[t];return"".concat(this.fo,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=By();return new Promise(((o,s)=>{const a=new Cf;a.setWithCredentials(!0),a.listenOnce(bf.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case yf.NO_ERROR:const e=a.getResponseJson();Df(zy,"XHR for RPC '".concat(t,"' ").concat(r," received:"),JSON.stringify(e)),o(e);break;case yf.TIMEOUT:Df(zy,"RPC '".concat(t,"' ").concat(r," timed out")),s(new Bf(Nf.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const n=a.getStatus();if(Df(zy,"RPC '".concat(t,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Nf).indexOf(e)>=0?e:Nf.UNKNOWN}(e.status);s(new Bf(t,e.message))}else s(new Bf(Nf.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Bf(Nf.UNAVAILABLE,"Connection failed."));break;default:Rf()}}finally{Df(zy,"RPC '".concat(t,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);Df(zy,"RPC '".concat(t,"' ").concat(r," sending request:"),i),a.send(e,"POST",l,n,15)}))}Fo(t,e,n){const i=By(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=mf(),s=vf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Df(zy,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new Vy({lo:e=>{d?Df(zy,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(h||(Df(zy,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),u.open(),h=!0),Df(zy,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),u.send(e))},ho:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,xf.EventType.OPEN,(()=>{d||Df(zy,"RPC '".concat(t,"' stream ").concat(i," transport opened."))})),p(u,xf.EventType.CLOSE,(()=>{d||(d=!0,Df(zy,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.Vo())})),p(u,xf.EventType.ERROR,(e=>{d||(d=!0,Lf(zy,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),f.Vo(new Bf(Nf.UNAVAILABLE,"The operation could not be completed")))})),p(u,xf.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Ff(!!r);const o=r,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Df(zy,"RPC '".concat(t,"' stream ").concat(i," received error:"),s);const e=s.status;let n=function(t){const e=ev[t];if(void 0!==e)return rv(e)}(e),r=s.message;void 0===n&&(n=Nf.INTERNAL,r="Unknown error status: "+e+" with message "+s.message),d=!0,f.Vo(new Bf(n,r)),u.close()}else Df(zy,"RPC '".concat(t,"' stream ").concat(i," received:"),r),f.mo(r)}})),p(s,_f.STAT_EVENT,(e=>{e.stat===wf.PROXY?Df(zy,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===wf.NOPROXY&&Df(zy,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Wy(){return"undefined"!=typeof document?document:null}function Gy(t){return new Sv(t,!0)}class qy{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&Df("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Xy{constructor(t,e,n,i,r,o,s,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new qy(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===Nf.RESOURCE_EXHAUSTED?(Pf(e.toString()),Pf("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===Nf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.Wo===e&&this.o_(n,i)}),(e=>{t((()=>{const t=new Bf(Nf.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return Df("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(Df("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yy extends Xy{constructor(t,e,n,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,o),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Rf()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(t,e){return t.useProto3Json?(Ff(void 0===e||"string"==typeof e),Vp.fromBase64String(e||"")):(Ff(void 0===e||e instanceof Uint8Array),Vp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){const e=void 0===t.code?Nf.UNKNOWN:rv(t.code);return new Bf(e,t.message||"")}(s);n=new mv(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Mv(t,i.document.name),o=Av(i.document.updateTime),s=i.document.createTime?Av(i.document.createTime):tp.min(),a=new fg({mapValue:{fields:i.document.fields}}),l=gg.newFoundDocument(r,o,s,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new pv(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Mv(t,i.document),o=i.readTime?Av(i.readTime):tp.min(),s=gg.newNoDocument(r,o),a=i.removedTargetIds||[];n=new pv([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Mv(t,i.document),o=i.removedTargetIds||[];n=new pv([],o,r,null)}else{if(!("filter"in e))return Rf();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,o=new tv(i,r),s=t.targetId;n=new gv(s,o)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return tp.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?tp.min():e.readTime?Av(e.readTime):tp.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=jv(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=zg(i)?{documents:Vv(t,i)}:{query:zv(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=kv(t,e.resumeToken);const i=Tv(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(tp.min())>0){n.readTime=Ev(t,e.snapshotVersion.toTimestamp());const i=Tv(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rf()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=jv(this.serializer),e.removeTarget=t,this.t_(e)}}class Ky extends Xy{constructor(t,e,n,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,o),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(Ff(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(Ff(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Av(t.updateTime):Av(e);return n.isEqual(tp.min())&&(n=Av(e)),new Rm(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Av(t.commitTime);return this.listener.T_(n,e)}return Ff(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=jv(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Uv(this.serializer,t)))};this.t_(e)}}class Qy extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Bf(Nf.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[o,s]=r;return this.connection.So(t,Dv(e,n),i,o,s)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Nf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Bf(Nf.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(t,Dv(e,n),i,s,a,r)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Nf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Bf(Nf.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class $y{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Pf(e),this.g_=!1):Df("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Jy{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{ab(this)&&(Df("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=jf(t);e.v_.add(4),await tb(e),e.x_.set("Unknown"),e.v_.delete(4),await Zy(e)}(this))}))})),this.x_=new $y(n,i)}}async function Zy(t){if(ab(t))for(const e of t.F_)await e(!0)}async function tb(t){for(const e of t.F_)await e(!1)}function eb(t,e){const n=jf(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),sb(n)?ob(n):Tb(n).Jo()&&ib(n,e))}function nb(t,e){const n=jf(t),i=Tb(n);n.C_.delete(e),i.Jo()&&rb(n,e),0===n.C_.size&&(i.Jo()?i.Xo():ab(n)&&n.x_.set("Unknown"))}function ib(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tp.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tb(t).c_(e)}function rb(t,e){t.O_.Oe(e),Tb(t).l_(e)}function ob(t){t.O_=new yv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Tb(t).start(),t.x_.p_()}function sb(t){return ab(t)&&!Tb(t).Ho()&&t.C_.size>0}function ab(t){return 0===jf(t).v_.size}function lb(t){t.O_=void 0}async function cb(t){t.C_.forEach(((e,n)=>{ib(t,e)}))}async function ub(t,e){lb(t),sb(t)?(t.x_.S_(e),ob(t)):t.x_.set("Unknown")}async function hb(t,e,n){if(t.x_.set("Online"),e instanceof mv&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){Df("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await db(t,n)}else if(e instanceof pv?t.O_.$e(e):e instanceof gv?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(tp.min()))try{const e=await ky(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(Vp.EMPTY_BYTE_STRING,i.snapshotVersion)),rb(t,e);const r=new Zv(i.target,e,n,i.sequenceNumber);ib(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Df("RemoteStore","Failed to raise snapshot:",e),await db(t,e)}}async function db(t,e,n){if(!bp(e))throw e;t.v_.add(1),await tb(t),t.x_.set("Offline"),n||(n=()=>ky(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Df("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Zy(t)}))}function fb(t,e){return e().catch((n=>db(t,n,e)))}async function pb(t){const e=jf(t),n=Eb(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;gb(e);)try{const t=await Ay(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,mb(e,t)}catch(t){await db(e,t)}vb(e)&&yb(e)}function gb(t){return ab(t)&&t.D_.length<10}function mb(t,e){t.D_.push(e);const n=Eb(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function vb(t){return ab(t)&&!Eb(t).Ho()&&t.D_.length>0}function yb(t){Eb(t).start()}async function bb(t){Eb(t).d_()}async function _b(t){const e=Eb(t);for(const n of t.D_)e.I_(n.mutations)}async function wb(t,e,n){const i=t.D_.shift(),r=Jm.from(i,e,n);await fb(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await pb(t)}async function xb(t,e){e&&Eb(t).P_&&await async function(t,e){if(function(t){return iv(t)&&t!==Nf.ABORTED}(e.code)){const n=t.D_.shift();Eb(t).Zo(),await fb(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await pb(t)}}(t,e),vb(t)&&yb(t)}async function Cb(t,e){const n=jf(t);n.asyncQueue.verifyOperationInProgress(),Df("RemoteStore","RemoteStore received new credentials");const i=ab(n);n.v_.add(3),await tb(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Zy(n)}async function Sb(t,e){const n=jf(t);e?(n.v_.delete(2),await Zy(n)):e||(n.v_.add(2),await tb(n),n.x_.set("Unknown"))}function Tb(t){return t.N_||(t.N_=function(t,e,n){const i=jf(t);return i.R_(),new Yy(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:cb.bind(null,t),To:ub.bind(null,t),u_:hb.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),sb(t)?ob(t):t.x_.set("Unknown")):(await t.N_.stop(),lb(t))}))),t.N_}function Eb(t){return t.B_||(t.B_=function(t,e,n){const i=jf(t);return i.R_(),new Ky(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:bb.bind(null,t),To:xb.bind(null,t),E_:_b.bind(null,t),T_:wb.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await pb(t)):(await t.B_.stop(),t.D_.length>0&&(Df("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))}))),t.B_}class kb{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Uf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const o=Date.now()+n,s=new kb(t,e,o,i,r);return s.start(n),s}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bf(Nf.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ob(t,e){if(Pf("AsyncQueue","".concat(e,": ").concat(t)),bp(t))return new Bf(Nf.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class Ab{constructor(t){this.comparator=t?(e,n)=>t(e,n)||op.comparator(e.key,n.key):(t,e)=>op.comparator(t.key,e.key),this.keyedMap=um(),this.sortedSet=new Mp(this.comparator)}static emptySet(t){return new Ab(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ab))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ab;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Ib{constructor(){this.L_=new Mp(op.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):Rf():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Db{constructor(t,e,n,i,r,o,s,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const o=[];return e.forEach((t=>{o.push({type:0,doc:t})})),new Db(t,e,Ab.emptySet(e),o,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class Pb{constructor(){this.q_=void 0,this.Q_=[]}}class Lb{constructor(){this.queries=new sm((t=>tm(t)),Zg),this.onlineState="Unknown",this.K_=new Set}}async function Mb(t,e){const n=jf(t),i=e.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new Pb),r)try{o.q_=await n.onListen(i)}catch(t){const n=Ob(t,"Initialization of query '".concat(em(e.query),"' failed"));return void e.onError(n)}n.queries.set(i,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Nb(n)}async function Rb(t,e){const n=jf(t),i=e.query;let r=!1;const o=n.queries.get(i);if(o){const t=o.Q_.indexOf(e);t>=0&&(o.Q_.splice(t,1),r=0===o.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Fb(t,e){const n=jf(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.Q_)t.W_(r)&&(i=!0);e.q_=r}}i&&Nb(n)}function jb(t,e,n){const i=jf(t),r=i.queries.get(e);if(r)for(const o of r.Q_)o.onError(n);i.queries.delete(e)}function Nb(t){t.K_.forEach((t=>{t.next()}))}class Bb{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Db(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Db.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class Ub{constructor(t){this.key=t}}class Vb{constructor(t){this.key=t}}class zb{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=vm(),this.mutatedKeys=vm(),this.ua=rm(t),this.ca=new Ab(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new Ib,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,o=i,s=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const c=i.get(t),u=nm(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||l&&this.ua(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),r=d?r.add(t):r.delete(t)):(o=o.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const t="F"===this.query.limitType?o.last():o.first();o=o.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:o,Pa:n,Xi:s,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const o=t.Pa.k_();o.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rf()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const s=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,l=a!==this._a;return this._a=a,0!==o.length||l?{snapshot:new Db(this.query,t.ca,r,o,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ib,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=vm(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Vb(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new Ub(n))})),e}Ra(t){this.oa=t.hs,this.aa=vm();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Db.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Hb{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Wb{constructor(t){this.key=t,this.ma=!1}}class Gb{constructor(t,e,n,i,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new sm((t=>tm(t)),Zg),this.pa=new Map,this.ya=new Set,this.wa=new Mp(op.comparator),this.Sa=new Map,this.ba=new dy,this.Da={},this.Ca=new Map,this.va=sy.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function qb(t,e){const n=u_(t);let i,r;const o=n.ga.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.Va();else{const t=await Iy(n.localStore,Kg(e)),o=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await Xb(n,e,i,"current"===o,t.resumeToken),n.isPrimaryClient&&eb(n.remoteStore,t)}return r}async function Xb(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await Py(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.ha(n,r)})));const o=i&&i.targetChanges.get(e.targetId),s=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,o,s);return r_(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const o=await Py(t.localStore,e,!0),s=new zb(e,o.hs),a=s.ha(o.documents),l=fv.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),c=s.applyChanges(a,t.isPrimaryClient,l);r_(t,n,c.da);const u=new Hb(e,n,s);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function Yb(t,e){const n=jf(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!Zg(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Dy(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),nb(n.remoteStore,i.targetId),n_(n,i.targetId)})).catch(fp)):(n_(n,i.targetId),await Dy(n.localStore,i.targetId,!0))}async function Kb(t,e){const n=jf(t);try{const t=await function(t,e){const n=jf(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const s=[];e.targetChanges.forEach(((o,a)=>{const l=r.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(t,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,o.addedDocuments,a))));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(Vp.EMPTY_BYTE_STRING,tp.min()).withLastLimboFreeSnapshotVersion(tp.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,i)),r=r.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Qr.updateTargetData(t,c))}));let a=lm(),l=vm();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),s.push(Oy(t,o,e.documentUpdates).next((t=>{a=t.cs,l=t.ls}))),!i.isEqual(tp.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));s.push(e)}return pp.waitFor(s).next((()=>o.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(Ff(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?Ff(i.ma):t.removedDocuments.size>0&&(Ff(i.ma),i.ma=!1))})),await a_(n,t,e)}catch(t){await fp(t)}}function Qb(t,e,n){const i=jf(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=jf(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.Q_)r.U_(e)&&(i=!0)})),i&&Nb(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $b(t,e,n){const i=jf(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),o=r&&r.key;if(o){let t=new Mp(op.comparator);t=t.insert(o,gg.newNoDocument(o,tp.min()));const n=vm().add(o),r=new dv(tp.min(),new Map,new Mp($f),t,n);await Kb(i,r),i.wa=i.wa.remove(o),i.Sa.delete(e),s_(i)}else await Dy(i.localStore,e,!1).then((()=>n_(i,e,n))).catch(fp)}async function Jb(t,e){const n=jf(t),i=e.batch.batchId;try{const t=await function(t,e){const n=jf(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,o=r.keys();let s=pp.resolve();return o.forEach((t=>{s=s.next((()=>i.getEntry(e,t))).next((e=>{const o=n.docVersions.get(t);Ff(null!==o),e.version.compareTo(o)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),s.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=vm();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);e_(n,i,null),t_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await a_(n,t)}catch(t){await fp(t)}}async function Zb(t,e,n){const i=jf(t);try{const t=await function(t,e){const n=jf(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Ff(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);e_(i,e,n),t_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await a_(i,t)}catch(n){await fp(n)}}function t_(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function e_(t,e,n){const i=jf(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function n_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||i_(t,e)}))}function i_(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(nb(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),s_(t))}function r_(t,e,n){for(const i of n)i instanceof Ub?(t.ba.addReference(i.key,e),o_(t,i)):i instanceof Vb?(Df("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||i_(t,i.key)):Rf()}function o_(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(Df("SyncEngine","New document in limbo: "+n),t.ya.add(i),s_(t))}function s_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new op(np.fromString(e)),i=t.va.next();t.Sa.set(i,new Wb(n)),t.wa=t.wa.insert(n,i),eb(t.remoteStore,new Zv(Kg(Gg(n.path)),i,"TargetPurposeLimboResolution",Sp._e))}}async function a_(t,e,n){const i=jf(t),r=[],o=[],s=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{s.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=wy.Ki(a.targetId,t);o.push(e)}})))})),await Promise.all(s),i.fa.u_(r),await async function(t,e){const n=jf(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>pp.forEach(e,(e=>pp.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>pp.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!bp(t))throw t;Df("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,r)}}}(i.localStore,o))}async function l_(t,e){const n=jf(t);if(!n.currentUser.isEqual(e)){Df("SyncEngine","User change. New user:",e.toKey());const t=await Ey(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Bf(Nf.CANCELLED,e))}))})),t.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await a_(n,t.us)}}function c_(t,e){const n=jf(t),i=n.Sa.get(e);if(i&&i.ma)return vm().add(i.key);{let t=vm();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}function u_(t){const e=jf(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$b.bind(null,e),e.fa.u_=Fb.bind(null,e.eventManager),e.fa.xa=jb.bind(null,e.eventManager),e}function h_(t){const e=jf(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zb.bind(null,e),e}class d_{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Gy(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Ty(this.persistence,new Cy,t.initialUser,this.serializer)}createPersistence(t){return new yy(_y.Hr,this.serializer)}createSharedClientState(t){return new Ry}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class f_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Qb(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=l_.bind(null,this.syncEngine),await Sb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Lb}createDatastore(t){const e=Gy(t.databaseInfo.databaseId),n=function(t){return new Hy(t)}(t.databaseInfo);return function(t,e,n,i){return new Qy(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Jy(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Qb(this.syncEngine,t,0)),jy.D()?new jy:new Fy)}createSyncEngine(t,e){return function(t,e,n,i,r,o,s){const a=new Gb(t,e,n,i,r,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=jf(t);Df("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await tb(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class p_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Pf("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class g_{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=kf.UNAUTHENTICATED,this.clientId=Qf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Df("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Df("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bf(Nf.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Uf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Ob(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function m_(t,e){t.asyncQueue.verifyOperationInProgress(),Df("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Ey(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function v_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await b_(t);Df("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Cb(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Cb(e.remoteStore,n))),t._onlineComponents=e}function y_(t){return"FirebaseError"===t.name?t.code===Nf.FAILED_PRECONDITION||t.code===Nf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function b_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Df("FirestoreClient","Using user provided OfflineComponentProvider");try{await m_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!y_(n))throw n;Lf("Error using user provided cache. Falling back to memory cache: "+n),await m_(t,new d_)}}else Df("FirestoreClient","Using default OfflineComponentProvider"),await m_(t,new d_);return t._offlineComponents}async function __(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Df("FirestoreClient","Using user provided OnlineComponentProvider"),await v_(t,t._uninitializedComponentsProvider._online)):(Df("FirestoreClient","Using default OnlineComponentProvider"),await v_(t,new f_))),t._onlineComponents}function w_(t){return __(t).then((t=>t.syncEngine))}async function x_(t){const e=await __(t),n=e.eventManager;return n.onListen=qb.bind(null,e.syncEngine),n.onUnlisten=Yb.bind(null,e.syncEngine),n}function C_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Uf;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const o=new p_({next:o=>{e.enqueueAndForget((()=>Rb(t,s)));const a=o.docs.has(n);!a&&o.fromCache?r.reject(new Bf(Nf.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&i&&"server"===i.source?r.reject(new Bf(Nf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:t=>r.reject(t)}),s=new Bb(Gg(n.path),o,{includeMetadataChanges:!0,Z_:!0});return Mb(t,s)}(await x_(t),t.asyncQueue,e,n,i))),i.promise}function S_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Uf;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const o=new p_({next:n=>{e.enqueueAndForget((()=>Rb(t,s))),n.fromCache&&"server"===i.source?r.reject(new Bf(Nf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),s=new Bb(n,o,{includeMetadataChanges:!0,Z_:!0});return Mb(t,s)}(await x_(t),t.asyncQueue,e,n,i))),i.promise}function T_(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const E_=new Map;function k_(t,e,n){if(!n)throw new Bf(Nf.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function O_(t){if(!op.isDocumentKey(t))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function A_(t){if(op.isDocumentKey(t))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function I_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":Rf()}function D_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Bf(Nf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=I_(t);throw new Bf(Nf.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}function P_(t,e){if(e<=0)throw new Bf(Nf.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}class L_{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Bf(Nf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bf(Nf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Bf(Nf.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T_(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Bf(Nf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new Bf(Nf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new Bf(Nf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class M_{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bf(Nf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Bf(Nf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new zf;switch(t.type){case"firstParty":return new qf(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Bf(Nf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=E_.get(t);e&&(Df("ComponentProvider","Removing Datastore"),E_.delete(t),e.terminate())}(this),Promise.resolve()}}class R_{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new R_(this.firestore,t,this._query)}}class F_{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new j_(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new F_(this.firestore,t,this._key)}}class j_ extends R_{constructor(t,e,n){super(t,e,Gg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new F_(this.firestore,null,new op(t))}withConverter(t){return new j_(this.firestore,t,this._path)}}function N_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=el(t),k_("collection","path",e),t instanceof M_){const n=np.fromString(e,...i);return A_(n),new j_(t,null,n)}{if(!(t instanceof F_||t instanceof j_))throw new Bf(Nf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(np.fromString(e,...i));return A_(n),new j_(t.firestore,null,n)}}function B_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=el(t),1===arguments.length&&(e=Qf.newId()),k_("doc","path",e),t instanceof M_){const n=np.fromString(e,...i);return O_(n),new F_(t,null,new op(n))}{if(!(t instanceof F_||t instanceof j_))throw new Bf(Nf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(np.fromString(e,...i));return O_(n),new F_(t.firestore,t instanceof j_?t.converter:null,new op(n))}}class U_{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new qy(this,"async_queue_retry"),this._u=()=>{const t=Wy();t&&Df("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Wy();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=Wy();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new Uf;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(TT){if(!bp(TT))throw TT;Df("AsyncQueue","Operation failed with retryable error: "+TT)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Pf("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=kb.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&Rf()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class V_ extends M_{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new U_,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||H_(this),this._firestoreClient.terminate()}}function z_(t){return t._firestoreClient||H_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function H_(t){var e,n,i;const r=t._freezeSettings(),o=function(t,e,n,i){return new Kp(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,T_(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new g_(t._authCredentials,t._appCheckCredentials,t._queue,o),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class W_{constructor(t){this._byteString=t}static fromBase64String(t){try{return new W_(Vp.fromBase64String(t))}catch(t){throw new Bf(Nf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new W_(Vp.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class G_{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rp(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class q_{constructor(t){this._methodName=t}}class X_{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bf(Nf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bf(Nf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return $f(this._lat,t._lat)||$f(this._long,t._long)}}const Y_=/^__.*__$/;class K_{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Gm(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wm(t,this.data,e,this.fieldTransforms)}}function Q_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rf()}}class $_{constructor(t,e,n,i,r,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new $_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return cw(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Q_(this.du)&&Y_.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class J_{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Gy(t)}Su(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $_({du:t,methodName:e,wu:n,path:rp.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z_(t){const e=t._freezeSettings(),n=Gy(t._databaseId);return new J_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tw(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=t.Su(o.merge||o.mergeFields?2:0,e,n,r);ow("Data must be an object, but it was:",s,i);const a=iw(i,s);let l,c;if(o.merge)l=new Bp(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const t=[];for(const i of o.mergeFields){const r=sw(e,i,n);if(!s.contains(r))throw new Bf(Nf.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));uw(t,r)||t.push(r)}l=new Bp(t),c=s.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=s.fieldTransforms;return new K_(new fg(a),l,c)}function ew(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nw(n,t.Su(i?4:3,e))}function nw(t,e){if(rw(t=el(t)))return ow("Unsupported field value:",e,t),iw(t,e);if(t instanceof q_)return function(t,e){if(!Q_(e.du))throw e.pu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.pu("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=nw(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=el(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xm(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Zf.fromDate(t);return{timestampValue:Ev(e.serializer,n)}}if(t instanceof Zf){const n=new Zf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ev(e.serializer,n)}}if(t instanceof X_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof W_)return{bytesValue:kv(e.serializer,t._byteString)};if(t instanceof F_){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Iv(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu("Unsupported field value: ".concat(I_(t)))}(t,e)}function iw(t,e){const n={};return Lp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pp(t,((t,i)=>{const r=nw(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function rw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Zf||t instanceof X_||t instanceof W_||t instanceof F_||t instanceof q_)}function ow(t,e,n){if(!rw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=I_(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function sw(t,e,n){if((e=el(e))instanceof G_)return e._internalPath;if("string"==typeof e)return lw(t,e);throw cw("Field path arguments must be of type string or ",t,!1,void 0,n)}const aw=new RegExp("[~\\*/\\[\\]]");function lw(t,e,n){if(e.search(aw)>=0)throw cw("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new G_(...e.split("."))._internalPath}catch(bc){throw cw("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function cw(t,e,n,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(i)),s&&(l+=" in document ".concat(r)),l+=")"),new Bf(Nf.INVALID_ARGUMENT,a+t+l)}function uw(t,e){return t.some((t=>t.isEqual(e)))}class hw{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new F_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new dw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(fw("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class dw extends hw{data(){return super.data()}}function fw(t,e){return"string"==typeof e?lw(t,e):e instanceof G_?e._internalPath:e._delegate._internalPath}function pw(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Bf(Nf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gw{}class mw extends gw{}function vw(t,e){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];e instanceof gw&&n.push(e),n=n.concat(r),function(t){const e=t.filter((t=>t instanceof bw)).length,n=t.filter((t=>t instanceof yw)).length;if(e>1||e>0&&n>0)throw new Bf(Nf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class yw extends mw{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new yw(t,e,n)}_apply(t){const e=this._parse(t);return Ow(t._query,e),new R_(t.firestore,t.converter,$g(t._query,e))}_parse(t){const e=Z_(t.firestore),n=function(t,e,n,i,r,o,s){let a;if(r.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){kw(s,o);const e=[];for(const n of s)e.push(Ew(i,t,n));a={arrayValue:{values:e}}}else a=Ew(i,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||kw(s,o),a=ew(n,e,s,"in"===o||"not-in"===o);return xg.create(r,o,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class bw extends gw{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new bw(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Cg.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)Ow(n,r),n=$g(n,r)}(t._query,e),new R_(t.firestore,t.converter,$g(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _w extends mw{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new _w(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bg(e,n)}(t._query,this._field,this._direction);return new R_(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Hg(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function ww(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fw("orderBy",t);return _w._create(n,e)}class xw extends mw{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new xw(t,e,n)}_apply(t){return new R_(t.firestore,t.converter,Jg(t._query,this._limit,this._limitType))}}function Cw(t){return P_("limit",t),xw._create("limit",t,"F")}class Sw extends mw{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Sw(t,e,n)}_apply(t){const e=Tw(t,this.type,this._docOrFields,this._inclusive);return new R_(t.firestore,t.converter,function(t,e){return new Hg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function Tw(t,e,n,i){if(n[0]=el(n[0]),n[0]instanceof hw)return function(t,e,n,i,r){if(!i)throw new Bf(Nf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Yg(t))if(s.field.isKeyField())o.push(og(e,i.key));else{const t=i.data.field(s.field);if(qp(t))throw new Bf(Nf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=s.field.canonicalString();throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(t,"' (used as the orderBy) does not exist."))}o.push(t)}return new mg(o,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Z_(t.firestore);return function(t,e,n,i,r,o){const s=t.explicitOrderBy;if(r.length>s.length)throw new Bf(Nf.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<r.length;l++){const o=r[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(typeof o));if(!Xg(t)&&-1!==o.indexOf("/"))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=t.path.child(np.fromString(o));if(!op.isDocumentKey(n))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const r=new op(n);a.push(og(e,r))}else{const t=ew(n,i,o);a.push(t)}}return new mg(a,o)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Ew(t,e,n){if("string"==typeof(n=el(n))){if(""===n)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xg(e)&&-1!==n.indexOf("/"))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(np.fromString(n));if(!op.isDocumentKey(i))throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return og(t,new op(i))}if(n instanceof F_)return og(t,n._key);throw new Bf(Nf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(I_(n),"."))}function kw(t,e){if(!Array.isArray(t)||0===t.length)throw new Bf(Nf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function Ow(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Bf(Nf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new Bf(Nf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Aw{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wp(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Rf()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pp(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new X_(Wp(t.latitude),Wp(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Xp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Yp(t));default:return null}}convertTimestamp(t){const e=Hp(t);return new Zf(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=np.fromString(t);Ff(Jv(n));const i=new Qp(n.get(1),n.get(3)),r=new op(n.popFirst(5));return i.isEqual(e)||Pf("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function Iw(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Dw{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pw extends hw{constructor(t,e,n,i,r,o){super(t,e,n,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fw("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Lw extends Pw{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class Mw{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Dw(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Lw(this._firestore,this._userDataWriter,n.key,n,new Dw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bf(Nf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Lw(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Dw(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Lw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Dw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,o=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),o=n.indexOf(e.doc.key)),{type:Rw(e.type),doc:i,oldIndex:r,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Rw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rf()}}class Fw extends Aw{constructor(t){super(),this.firestore=t}convertBytes(t){return new W_(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new F_(this.firestore,null,e)}}function jw(t){t=D_(t,R_);const e=D_(t.firestore,V_),n=z_(e),i=new Fw(e);return pw(t._query),S_(n,t._query).then((n=>new Mw(e,i,t,n)))}function Nw(t,e){return function(t,e){const n=new Uf;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=h_(t);try{const t=await function(t,e){const n=jf(t),i=Zf.now(),r=e.reduce(((t,e)=>t.add(e.key)),vm());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=lm(),l=vm();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{o=r;const s=[];for(const t of e){const e=zm(t,o.get(t.key).overlayedDocument);null!=e&&s.push(new Gm(t.key,e,pg(e.value.mapValue),Fm.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,s,e)})).next((e=>{s=e;const i=e.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:s.batchId,changes:hm(o)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new Mp($f)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await a_(i,t.changes),await pb(i.remoteStore)}catch(t){const e=Ob(t,"Failed to persist write");n.reject(e)}}(await w_(t),e,n))),n.promise}(z_(t),e)}function Bw(t,e,n){const i=n.docs.get(e._key),r=new Fw(t);return new Pw(t,r,e._key,i,new Dw(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){Of=t}(Wl),Ul(new nl("firestore",((t,n)=>{let{instanceIdentifier:i,options:r}=n;const o=t.getProvider("app").getImmediate(),s=new V_(new Wf(t.getProvider("auth-internal")),new Yf(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Bf(Nf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qp(t.options.projectId,e)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Xl(Ef,"4.4.2",t),Xl(Ef,"4.4.2","esm2017")}();const Uw="firebasestorage.googleapis.com",Vw="storageBucket";class zw extends Ga{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Gw(t),"Firebase Storage: ".concat(e," (").concat(Gw(t),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zw.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Gw(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Hw,Ww;function Gw(t){return"storage/"+t}function qw(){return new zw(Hw.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xw(){return new zw(Hw.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yw(){return new zw(Hw.CANCELED,"User canceled the upload/download.")}function Kw(){return new zw(Hw.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qw(t){return new zw(Hw.INVALID_ARGUMENT,t)}function $w(){return new zw(Hw.APP_DELETED,"The Firebase app was deleted.")}function Jw(t,e){return new zw(Hw.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Zw(t){throw new zw(Hw.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Hw||(Hw={}));class tx{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=tx.makeFromUrl(t,e)}catch(TT){return new tx(t,"")}if(""===n.path)return n;throw i=t,new zw(Hw.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}const s=e.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(e===Uw?"(?:storage.googleapis.com|storage.cloud.google.com)":e,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const e=a[l],i=e.regex.exec(t);if(i){const t=i[e.indices.bucket];let r=i[e.indices.path];r||(r=""),n=new tx(t,r),e.postModify(n);break}}if(null==n)throw function(t){return new zw(Hw.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class ex{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(){}}function nx(t){return"string"===typeof t||t instanceof String}function ix(t){return rx()&&t instanceof Blob}function rx(){return"undefined"!==typeof Blob}function ox(t,e,n,i){if(i<e)throw Qw("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(i>n)throw Qw("Invalid value for '".concat(t,"'. Expected ").concat(n," or less."))}function sx(t,e,n){let i=e;return null==n&&(i="https://".concat(e)),"".concat(n,"://").concat(i,"/v0").concat(t)}function ax(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){n=n+(e(i)+"="+e(t[i]))+"&"}return n=n.slice(0,-1),n}function lx(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),r=-1!==e.indexOf(t);return n||i||r}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Ww||(Ww={}));class cx{constructor(t,e,n,i,r,o,s,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new ux(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===Ww.NO_ERROR,r=n.getStatus();if(!e||lx(r,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===Ww.ABORT;return void t(!1,new ux(!1,null,e))}const o=-1!==this.successCodes_.indexOf(r);t(!0,new ux(o,n))}))},e=(t,e)=>{const n=this.resolve_,i=this.reject_,r=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(r,r.getResponse());!function(t){return void 0!==t}(t)?n():n(t)}catch(TT){i(TT)}else if(null!==r){const t=qw();t.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,t)):i(t)}else if(e.canceled){i(this.appDelete_?$w():Yw())}else{i(Xw())}};this.canceled_?e(0,new ux(!1,null,!0)):this.backoffId_=function(t,e,n){let i=1,r=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(null,n)}}function h(e){r=setTimeout((()=>{r=null,t(f,l())}),e)}function d(){o&&clearTimeout(o)}function f(t){if(c)return void d();for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t)return d(),void u.call(null,t,...n);if(l()||s)return d(),void u.call(null,t,...n);let o;i<64&&(i*=2),1===a?(a=2,o=0):o=1e3*(i+Math.random()),h(o)}let p=!1;function g(t){p||(p=!0,d(),c||(null!==r?(t||(a=2),clearTimeout(r),h(0)):t||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,g(!0)}),n),g}(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ux{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function hx(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function dx(){const t=hx();for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(void 0!==t){const e=new t;for(let t=0;t<n.length;t++)e.append(n[t]);return e.getBlob()}if(rx())return new Blob(n);throw new zw(Hw.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function fx(t){if("undefined"===typeof atob)throw e="base-64",new zw(Hw.UNSUPPORTED_ENVIRONMENT,"".concat(e," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var e;return atob(t)}const px={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gx{constructor(t,e){this.data=t,this.contentType=e||null}}function mx(t,e){switch(t){case px.RAW:return new gx(vx(e));case px.BASE64:case px.BASE64URL:return new gx(yx(t,e));case px.DATA_URL:return new gx(function(t){const e=new bx(t);return e.base64?yx(px.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(TT){throw Jw(px.DATA_URL,"Malformed data URL.")}return vx(e)}(e.rest)}(e),new bx(e).contentType)}throw qw()}function vx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&t.charCodeAt(++n),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189)}else 56320===(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function yx(t,e){switch(t){case px.BASE64:{const n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i){throw Jw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case px.BASE64URL:{const n=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(n||i){throw Jw(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fx(e)}catch(TT){if(TT.message.includes("polyfill"))throw TT;throw Jw(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class bx{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Jw(px.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=function(t,e){const n=t.length>=e.length;if(!n)return!1;return t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class _x{constructor(t,e){let n=0,i="";ix(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(ix(this.data_)){const n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new _x(n)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new _x(n,!0)}}static getBlob(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(rx()){const t=e.map((t=>t instanceof _x?t.data_:t));return new _x(dx.apply(null,t))}{const t=e.map((t=>nx(t)?mx(px.RAW,t).data:t.data_));let n=0;t.forEach((t=>{n+=t.byteLength}));const i=new Uint8Array(n);let r=0;return t.forEach((t=>{for(let e=0;e<t.length;e++)i[r++]=t[e]})),new _x(i,!0)}}uploadData(){return this.data_}}function wx(t){let e;try{e=JSON.parse(t)}catch(TT){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function xx(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Cx(t,e){return e}class Sx{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||Cx}}let Tx=null;function Ex(){if(Tx)return Tx;const t=[];t.push(new Sx("bucket")),t.push(new Sx("generation")),t.push(new Sx("metageneration")),t.push(new Sx("name","fullPath",!0));const e=new Sx("name");e.xform=function(t,e){return function(t){return!nx(t)||t.length<2?t:xx(t)}(e)},t.push(e);const n=new Sx("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Sx("timeCreated")),t.push(new Sx("updated")),t.push(new Sx("md5Hash",null,!0)),t.push(new Sx("cacheControl",null,!0)),t.push(new Sx("contentDisposition",null,!0)),t.push(new Sx("contentEncoding",null,!0)),t.push(new Sx("contentLanguage",null,!0)),t.push(new Sx("contentType",null,!0)),t.push(new Sx("metadata","customMetadata",!0)),Tx=t,Tx}function kx(t,e,n){const i={type:"file"},r=n.length;for(let o=0;o<r;o++){const t=n[o];i[t.local]=t.xform(i,e[t.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,i=t.fullPath,r=new tx(n,i);return e._makeStorageReference(r)}})}(i,t),i}function Ox(t,e,n){const i=wx(e);if(null===i)return null;return kx(t,i,n)}function Ax(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ix{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dx(t){if(!t)throw qw()}function Px(t,e){return function(n,i){const r=Ox(t,i,e);return Dx(null!==r),r}}function Lx(t,e){return function(n,i){const r=Ox(t,i,e);return Dx(null!==r),function(t,e,n,i){const r=wx(e);if(null===r)return null;if(!nx(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((e=>{const r=t.bucket,o=t.fullPath;return sx("/b/"+s(r)+"/o/"+s(o),n,i)+ax({alt:"media",token:e})}))[0]}(r,i,t.host,t._protocol)}}function Mx(t){return function(e,n){let i;var r,o;return 401===e.getStatus()?i=e.getErrorText().includes("Firebase App Check token is invalid")?new zw(Hw.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new zw(Hw.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,i=new zw(Hw.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=t.path,i=new zw(Hw.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=e.getStatus(),i.serverResponse=n.serverResponse,i}}function Rx(t){const e=Mx(t);return function(n,i){let r=e(n,i);var o;return 404===n.getStatus()&&(o=t.path,r=new zw(Hw.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function Fx(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}function jx(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;const l=Fx(e,i,r),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ax(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=_x.getBlob(c,i,u);if(null===h)throw Kw();const d={name:l.fullPath},f=sx(o,t.host,t._protocol),p=t.maxUploadRetryTime,g=new Ix(f,"POST",Px(t,n),p);return g.urlParams=d,g.headers=s,g.body=h.uploadData(),g.errorHandler=Mx(e),g}let Nx=null;class Bx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ww.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ww.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ww.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,i){if(this.sent_)throw Zw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(TT){return-1}}getResponse(){if(!this.sent_)throw Zw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class Ux extends Bx{initXhr(){this.xhr_.responseType="text"}}function Vx(){return Nx?Nx():new Ux}class zx{constructor(t,e){this._service=t,this._location=e instanceof tx?e:tx.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new zx(t,e)}get root(){const t=new tx(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xx(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new tx(this._location.bucket,t);return new zx(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new zw(Hw.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function Hx(t,e,n){t._throwIfRoot("uploadBytes");const i=jx(t.storage,t._location,Ex(),new _x(e,!0),n);return t.storage.makeRequestWithTokens(i,Vx).then((e=>({metadata:e,ref:t})))}function Wx(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const i=sx(e.fullServerUrl(),t.host,t._protocol),r=t.maxOperationRetryTime,o=new Ix(i,"GET",Lx(t,n),r);return o.errorHandler=Rx(e),o}(t.storage,t._location,Ex());return t.storage.makeRequestWithTokens(e,Vx).then((t=>{if(null===t)throw new zw(Hw.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t}))}function Gx(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),i=new tx(t._location.bucket,n);return new zx(t.storage,i)}function qx(t,e){if(t instanceof Kx){const n=t;if(null==n._bucket)throw new zw(Hw.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vw+"' property when initializing the app?");const i=new zx(n,n._bucket);return null!=e?qx(i,e):i}return void 0!==e?Gx(t,e):t}function Xx(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof Kx)return new zx(t,e);throw Qw("To use ref(service, url), the first argument must be a Storage instance.")}return qx(t,e)}function Yx(t,e){const n=null===e||void 0===e?void 0:e[Vw];return null==n?null:tx.makeFromBucketSpec(n,t)}class Kx{constructor(t,e,n,i,r){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Uw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?tx.makeFromBucketSpec(i,this._host):Yx(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=tx.makeFromBucketSpec(this._url,t):this._bucket=Yx(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){ox("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){ox("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){return(await t.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new zx(this,t)}_makeRequest(t,e,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ex($w());{const o=function(t,e,n,i,r,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ax(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(c,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,i),new cx(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,s)}(t,this._appId,n,i,e,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(t,e){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,i).getPromise()}}const Qx="@firebase/storage",$x="0.12.1",Jx="storage";function Zx(t,e){return Xx(t=el(t),e)}function tC(t,e){let{instanceIdentifier:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Kx(i,r,o,n,Wl)}Ul(new nl(Jx,tC,"PUBLIC").setMultipleInstances(!0)),Xl(Qx,$x,""),Xl(Qx,$x,"esm2017");const eC="@firebase/installations",nC="0.6.5",iC=1e4,rC="w:".concat(nC),oC="FIS_v2",sC="https://firebaseinstallations.googleapis.com/v1",aC=36e5,lC=new qa("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function cC(t){return t instanceof Ga&&t.code.includes("request-failed")}function uC(t){let{projectId:e}=t;return"".concat(sC,"/projects/").concat(e,"/installations")}function hC(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function dC(t,e){const n=(await e.json()).error;return lC.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fC(t){let{apiKey:e}=t;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function pC(t,e){let{refreshToken:n}=e;const i=fC(t);return i.append("Authorization",function(t){return"".concat(oC," ").concat(t)}(n)),i}async function gC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function mC(t){return new Promise((e=>{setTimeout(e,t)}))}const vC=/^[cdef][\w-]{21}$/,yC="";function bC(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return vC.test(e)?e:yC}catch(t){return yC}}function _C(t){return"".concat(t.appName,"!").concat(t.appId)}const wC=new Map;function xC(t,e){const n=_C(t);CC(n,e),function(t,e){const n=TC();n&&n.postMessage({key:t,fid:e});EC()}(n,e)}function CC(t,e){const n=wC.get(t);if(n)for(const i of n)i(e)}let SC=null;function TC(){return!SC&&"BroadcastChannel"in self&&(SC=new BroadcastChannel("[Firebase] FID Change"),SC.onmessage=t=>{CC(t.data.key,t.data.fid)}),SC}function EC(){0===wC.size&&SC&&(SC.close(),SC=null)}const kC="firebase-installations-database",OC=1,AC="firebase-installations-store";let IC=null;function DC(){return IC||(IC=El(kC,OC,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(AC)}})),IC}async function PC(t,e){const n=_C(t),i=(await DC()).transaction(AC,"readwrite"),r=i.objectStore(AC),o=await r.get(n);return await r.put(e,n),await i.done,o&&o.fid===e.fid||xC(t,e.fid),e}async function LC(t){const e=_C(t),n=(await DC()).transaction(AC,"readwrite");await n.objectStore(AC).delete(e),await n.done}async function MC(t,e){const n=_C(t),i=(await DC()).transaction(AC,"readwrite"),r=i.objectStore(AC),o=await r.get(n),s=e(o);return void 0===s?await r.delete(n):await r.put(s,n),await i.done,!s||o&&o.fid===s.fid||xC(t,s.fid),s}async function RC(t){let e;const n=await MC(t.appConfig,(n=>{const i=function(t){const e=t||{fid:bC(),registrationStatus:0};return NC(e)}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(lC.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function(t,e){let{appConfig:n,heartbeatServiceProvider:i}=t,{fid:r}=e;const o=uC(n),s=fC(n),a=i.getImmediate({optional:!0});if(a){const t=await a.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const l={fid:r,authVersion:oC,appId:n.appId,sdkVersion:rC},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await gC((()=>fetch(o,c)));if(u.ok){const t=await u.json();return{fid:t.fid||r,registrationStatus:2,refreshToken:t.refreshToken,authToken:hC(t.authToken)}}throw await dC("Create Installation",u)}(t,e);return PC(t.appConfig,n)}catch(TT){throw cC(TT)&&409===TT.customData.serverCode?await LC(t.appConfig):await PC(t.appConfig,{fid:e.fid,registrationStatus:0}),TT}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:FC(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return n.fid===yC?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function FC(t){let e=await jC(t.appConfig);for(;1===e.registrationStatus;)await mC(100),e=await jC(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await RC(t);return n||e}return e}function jC(t){return MC(t,(t=>{if(!t)throw lC.create("installation-not-found");return NC(t)}))}function NC(t){return 1===(e=t).registrationStatus&&e.registrationTime+iC<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function BC(t,e){let{appConfig:n,heartbeatServiceProvider:i}=t;const r=function(t,e){let{fid:n}=e;return"".concat(uC(t),"/").concat(n,"/authTokens:generate")}(n,e),o=pC(n,e),s=i.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const a={installation:{sdkVersion:rC,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(a)},c=await gC((()=>fetch(r,l)));if(c.ok){return hC(await c.json())}throw await dC("Generate Auth Token",c)}async function UC(t){let e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=await MC(t.appConfig,(i=>{if(!zC(i))throw lC.create("not-registered");const r=i.authToken;if(!n&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+aC}(t)}(r))return i;if(1===r.requestStatus)return e=async function(t,e){let n=await VC(t.appConfig);for(;1===n.authToken.requestStatus;)await mC(100),n=await VC(t.appConfig);const i=n.authToken;return 0===i.requestStatus?UC(t,e):i}(t,n),i;{if(!navigator.onLine)throw lC.create("app-offline");const n=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return e=async function(t,e){try{const n=await BC(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await PC(t.appConfig,i),n}catch(TT){if(!cC(TT)||401!==TT.customData.serverCode&&404!==TT.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await PC(t.appConfig,n)}else await LC(t.appConfig);throw TT}}(t,n),n}}));return e?await e:i.authToken}function VC(t){return MC(t,(t=>{if(!zC(t))throw lC.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+iC<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function zC(t){return void 0!==t&&2===t.registrationStatus}async function HC(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t;await async function(t){const{registrationPromise:e}=await RC(t);e&&await e}(n);return(await UC(n,e)).token}function WC(t){return lC.create("missing-app-config-values",{valueName:t})}const GC="installations",qC=t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw WC("App Configuration");if(!t.name)throw WC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw WC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Vl(e,"heartbeat"),_delete:()=>Promise.resolve()}},XC=t=>{const e=Vl(t.getProvider("app").getImmediate(),GC).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await RC(e);return i?i.catch(console.error):UC(e).catch(console.error),n.fid}(e),getToken:t=>HC(e,t)}};Ul(new nl(GC,qC,"PUBLIC")),Ul(new nl("installations-internal",XC,"PRIVATE")),Xl(eC,nC),Xl(eC,nC,"esm2017");const YC="analytics",KC="firebase_id",QC="origin",$C=6e4,JC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ZC="https://www.googletagmanager.com/gtag/js",tS=new dl("@firebase/analytics"),eS=new qa("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function nS(t){if(!t.startsWith(ZC)){const e=eS.create("invalid-gtag-resource",{gtagURL:t});return tS.warn(e.message),""}return t}function iS(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function rS(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:nS}),i=document.createElement("script"),r="".concat(ZC,"?l=").concat(t,"&id=").concat(e);i.src=n?null===n||void 0===n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function oS(t,e,n,i){return async function(r){try{for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await iS(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){o=[];break}o.push(r)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(TT){tS.error(TT)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,o){const s=i[r];try{if(s)await e[s];else{const t=(await iS(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(TT){tS.error(TT)}t("config",r,o)}(t,e,n,i,r,o)}else if("consent"===r){const[e]=s;t("consent","update",e)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(TT){tS.error(TT)}}}const sS=30;const aS=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function lS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function cS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aS,n=arguments.length>2?arguments[2]:void 0;const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw eS.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw eS.create("no-api-key")}const s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new hS;return setTimeout((async()=>{a.abort()}),void 0!==n?n:$C),uS({appId:i,apiKey:r,measurementId:o},s,a,e)}async function uS(t,e,n){let{throttleEndTimeMillis:i,backoffCount:r}=e,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aS;var s;const{appId:a,measurementId:l}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(o),i(eS.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(n,i)}catch(TT){if(l)return tS.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===TT||void 0===TT?void 0:TT.message,"]")),{appId:a,measurementId:l};throw TT}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:lS(i)},o=JC.replace("{app-id}",n),s=await fetch(o,r);if(200!==s.status&&304!==s.status){let t="";try{const n=await s.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw eS.create("config-fetch-failed",{httpStatus:s.status,responseMessage:t})}return s.json()}(t);return o.deleteThrottleMetadata(a),e}catch(TT){const i=TT;if(!function(t){if(!(t instanceof Ga)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i)){if(o.deleteThrottleMetadata(a),l)return tS.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===i||void 0===i?void 0:i.message,"]")),{appId:a,measurementId:l};throw TT}const c=503===Number(null===(s=null===i||void 0===i?void 0:i.customData)||void 0===s?void 0:s.httpStatus)?tl(r,o.intervalMillis,sS):tl(r,o.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:r+1};return o.setThrottleMetadata(a,u),tS.debug("Calling attemptFetch again in ".concat(c," millis")),uS(t,u,n,o)}}class hS{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let dS,fS;function pS(t){fS=t}function gS(t){dS=t}async function mS(t,e,n,i,r,o,s){var a;const l=cS(t);l.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&tS.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((t=>tS.error(t))),e.push(l);const c=async function(){if(!Ha())return tS.warn(eS.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Wa()}catch(TT){return tS.warn(eS.create("indexeddb-unavailable",{errorInfo:null===TT||void 0===TT?void 0:TT.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ZC)&&n.src.includes(t))return n;return null})(o)||rS(o,u.measurementId),fS&&(r("consent","default",fS),pS(void 0)),r("js",new Date);const d=null!==(a=null===s||void 0===s?void 0:s.config)&&void 0!==a?a:{};return d[QC]="firebase",d.update=!0,null!=h&&(d[KC]=h),r("config",u.measurementId,d),dS&&(r("set",dS),gS(void 0)),u.measurementId}class vS{constructor(t){this.app=t}_delete(){return delete yS[this.app.options.appId],Promise.resolve()}}let yS={},bS=[];const _S={};let wS,xS,CS="dataLayer",SS="gtag",TS=!1;function ES(){const t=[];if(function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>"(".concat(e+1,") ").concat(t))).join(" "),n=eS.create("invalid-analytics-context",{errorInfo:e});tS.warn(n.message)}}function kS(t,e,n){ES();const i=t.options.appId;if(!i)throw eS.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw eS.create("no-api-key");tS.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=yS[i])throw eS.create("already-exists",{id:i});if(!TS){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(CS);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];window[i].push(arguments)};return window[r]&&"function"===typeof window[r]&&(o=window[r]),window[r]=oS(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}(yS,bS,_S,CS,SS);xS=t,wS=e,TS=!0}yS[i]=mS(t,bS,_S,e,wS,CS,n);return new vS(t)}function OS(t,e,n,i){t=el(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(xS,yS[t.app.options.appId],e,n,i).catch((t=>tS.error(t)))}const AS="@firebase/analytics",IS="0.10.1";Ul(new nl(YC,((t,e)=>{let{options:n}=e;return kS(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Ul(new nl("analytics-internal",(function(t){try{const e=t.getProvider(YC).getImmediate();return{logEvent:(t,n,i)=>OS(e,t,n,i)}}catch(TT){throw eS.create("interop-component-reg-failed",{reason:TT})}}),"PRIVATE")),Xl(AS,IS),Xl(AS,IS,"esm2017");Xl("firebase","10.8.0","app");const DS=Gl({apiKey:"AIzaSyD_F_ESTDyLHvTOv1QrzUbiy6Gt0sQCS4k",authDomain:"widi-share.firebaseapp.com",projectId:"widi-share",storageBucket:"widi-share.appspot.com",messagingSenderId:"1051941909584",appId:"1:1051941909584:web:e1bb94be2b95f2465b8d55",measurementId:"G-MNCR6GZVDZ"}),PS=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql();t=el(t);const e=Vl(t,YC);return e.isInitialized()?e.getImmediate():function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Vl(t,YC);if(n.isInitialized()){const t=n.getImmediate();if(Ya(e,n.getOptions()))return t;throw eS.create("already-initialized")}const i=n.initialize({options:e});return i}(t)}(DS),LS=function(t,e){const n="string"==typeof t?t:e||"(default)",i=Vl("object"==typeof t?t:ql(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=ja("firestore");t&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const o=(t=D_(t,M_))._getSettings(),s="".concat(e,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Lf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=kf.MOCK_USER;else{e=Ua(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new Bf(Nf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new kf(o)}t._authCredentials=new Hf(new Vf(e,n))}}(i,...t)}return i}(DS),MS=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ql(),e=arguments.length>1?arguments[1]:void 0;t=el(t);const n=Vl(t,Jx).getImmediate({identifier:e}),i=ja("storage");return i&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host="".concat(e,":").concat(n),t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken="string"===typeof r?r:Ua(r,t.app.options.projectId))}(t,e,n,i)}(n,...i),n}(DS),RS=n.p+"static/media/bg_0.5ced85fc3b2e3779f7d4.png",FS=n.p+"static/media/bg_1.2b9580b61b87f20a6736.png",jS=n.p+"static/media/bg_2.d00b67fd70e83ea38eda.png",NS=n.p+"static/media/bg_3.488b8c714d4f413b86e9.png",BS=n.p+"static/media/bg_4.f9d423602e45db2f1941.png",US=n.p+"static/media/bg_5.0fc178b083a5168e9cd5.png",VS=n.p+"static/media/bg_6.4a6d154ceb74fdf205a1.png",zS=n.p+"static/media/bg_7.8a91e41289e2970b433f.png",HS=(n.p,n.p+"static/media/bg_9.3d85f9ff4b878323c514.png"),WS=n.p+"static/media/bg_10.278ed8fffee7fa3c23e2.png",GS=n.p+"static/media/bg_11.a98c774e7c5e9d777f71.png",qS=n.p+"static/media/bg_12.dcac082bc2ad313b3e6c.png",XS=n.p+"static/media/bg_13.c0e48fe40dfafce31148.png",YS=(n.p,n.p+"static/media/bg_15.3c20a181aefa4c7a7b90.png"),KS=n.p+"static/media/bg_16.ff9791842d1e32b65607.png",QS=n.p+"static/media/bg_17.e5eb1bf9661e8e4ff744.png",$S=n.p+"static/media/bg_18.e59286982c44e115bcae.png",JS=(n.p,n.p+"static/media/bg_20.24d739332d67021e6f69.png"),ZS=n.p+"static/media/bg_21.0b4b052427552581d327.png",tT=n.p+"static/media/bg_22.c12da0403e27f2600c7a.png",eT=n.p+"static/media/bg_23.0da0f4528a8875d990bb.png",nT=n.p+"static/media/bg_24.0eac9a149f03a7b69e67.png",iT=n.p+"static/media/bg_25.359198e7f39638423b1b.png",rT=n.p+"static/media/bg_26.1d7f9b13d2b49cb2f786.png",oT=[{name:"Pretendard",family:"Pretendard"},{name:"\ub9ac\ub514\ubc14\ud0d5",family:"RIDIBatang"},{name:"Kopub \ubc14\ud0d5\uccb4",family:"KoPubWorldBatang"},{name:"\ubcf8\uace0\ub515",family:"NotoSans"}],sT=[{image:RS,file:"bg_0",fontColor:"#FFFFFF",visible:!0},{image:FS,file:"bg_1",fontColor:"#FFFFFF",visible:!0},{image:jS,file:"bg_2",fontColor:"#FFFFFF",visible:!0},{image:NS,file:"bg_3",fontColor:"#FFFFFF",visible:!0},{image:BS,file:"bg_4",fontColor:"#FFFFFF",visible:!0},{image:US,file:"bg_5",fontColor:"#FFFFFF",visible:!0},{image:VS,file:"bg_6",fontColor:"#000000",visible:!0},{image:zS,file:"bg_7",fontColor:"#FFFFFF",visible:!0},{image:ZS,file:"bg_21",fontColor:"#FFFFFF",visible:!1},{image:tT,file:"bg_22",fontColor:"#FFFFFF",visible:!1},{image:eT,file:"bg_23",fontColor:"#000000",visible:!1},{image:nT,file:"bg_24",fontColor:"#000000",visible:!1},{image:iT,file:"bg_25",fontColor:"#000000",visible:!1},{image:rT,file:"bg_26",fontColor:"#FFFFFF",visible:!1},{image:JS,file:"bg_20",fontColor:"#FFFFFF",visible:!1},{image:$S,file:"bg_18",fontColor:"#FFFFFF",visible:!1},{image:QS,file:"bg_17",fontColor:"#FFFFFF",visible:!1},{image:KS,file:"bg_16",fontColor:"#000000",visible:!1},{image:WS,file:"bg_10",fontColor:"#FFFFFF",visible:!1},{image:HS,file:"bg_9",fontColor:"#000000",visible:!1},{image:XS,file:"bg_13",fontColor:"#FFFFFF",visible:!1},{image:YS,file:"bg_15",fontColor:"#FFFFFF",visible:!1},{image:GS,file:"bg_11",fontColor:"#FFFFFF",visible:!1},{image:qS,file:"bg_12",fontColor:"#FFFFFF",visible:!1}],aT=async t=>{let{uniqueId:e="canvas",text:n,name:i,username:r,font:o,color:s,charSpacing:a,imageFile:l,customImage:c,customImageWidth:u,customImageHeight:h}=t;const d=360,f=20,p=new Aa.fabric.Canvas(e,{isDrawingMode:!1,width:d,height:d,allowTouchScrolling:!1});if(c){var g=new Aa.fabric.Image(c,{left:0,top:0,right:u,bottom:h,scaleX:d/u,scaleY:d/h,opacity:1,selectable:!1});p.add(g)}else{let t=document.getElementById(l),e=new Aa.fabric.Image(t,{left:0,top:0,right:1200,bottom:1200,scaleX:.3,scaleY:.3,opacity:1,selectable:!1});p.add(e)}let m=new Aa.fabric.Textbox(n,{left:f,width:312,fontSize:15,fontFamily:o,lineHeight:1.5,selectable:!1,fill:s,textAlign:"left",charSpacing:a,splitByGrapheme:!0});m.top=(d-(m.height+54))/2,p.add(m);let v=new Aa.fabric.Text(i,{left:f,width:320,fontSize:14,fontFamily:"NotoSans",top:m.top+m.height+16,selectable:!1,fill:s});if(p.add(v),r){let t=new Aa.fabric.Text("".concat(r),{left:f,width:320,fontSize:14,fontFamily:"NotoSansThin",top:m.top+m.height+38,selectable:!1,fill:"".concat(s,"B0")});p.add(t)}const y=.3;let b=document.getElementById("logo"),_=new Aa.fabric.Image(b,{left:305,top:332,scaleX:y,scaleY:y,opacity:1,selectable:!1});return p.add(_),{canvas:p,imageData:p.toDataURL({format:"png",multiplier:4})}};var lT=n(496);function cT(t){let{data:e}=t;const[n,r]=(0,i.useState)(null),o=uT();return(0,i.useEffect)((()=>{(async()=>{if(e.customImage){const t=Zx(MS,e.customImage),n=await function(t){return Wx(t=el(t))}(t),i=new Promise(((t,e)=>{let i=new Image;i.crossOrigin="anonymous",i.onload=()=>t(i),i.onerror=e,i.src=n})),r=await i;e.customImage=r}const{imageData:t}=await aT({uniqueId:e.id,text:e.text,name:e.name,username:e.username,font:e.font,color:e.color,charSpacing:e.charSpacing,imageFile:e.imageFile,customImage:e.customImage,customImageWidth:e.customImageWidth,customImageHeight:e.customImageHeight});r(t)})()}),[e]),(0,lT.jsx)("div",{children:n?(0,lT.jsx)("img",{src:n,alt:"image",style:o.image}):(0,lT.jsx)("div",{children:"Loading..."})})}const uT=()=>({image:{width:"100%",borderRadius:"6px"}});const hT=n.p+"static/media/header_round.b6b75bd33cbe90972dbef2ceebc95d9c.svg",dT=n.p+"static/media/banner_image.41c15fb34a5766f6b72e.png",fT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAAA8CAYAAABrRChUAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAdpSURBVHgB7ZwhdyM3EMfHfgcCXWaosrCmLKyGgYFlDWvgfYzCwiu7+waBKfOxlCUsUGUuurCG5TS25CjrleY/8q7P79383tPZ59VqtdJfM6PxOkSGYRiGYRiGYRiGYRiGYRiGYRiGYRiG8Q2ZkPHd8/Lywi8nsdBkMnmiAZiEhmdiJeXFQpvbjvbwHNp7puHa620XuC+4H8j1G8aIKJvQodpVXPcslHkoLpS+seKxWYXC138MxWvnjcV1FS9Q42No2BNIaJM7flk4/BTa+pMUaPsYhfVeqL8M9ZeEXX8RXhZCtdvQ3h2BxEnmPkqL4A/tpFau52hzH47auKfNuEGCn4bigXpz0nFWOTYLN+oIJFoNqf6TRvwNIPd/SiDZRIteA6xTvVYc7+tQrqhdWAzP6/vQ3iXi8VBxaQaOL+qEatJxbV1P44JMsAv3rlmEZ2A97cLeEkV8QRtRNbfTA/f9OrR/Xqs0jSteMrvzaEEQHFAHHVgGEfYjjQs6MfAiVNRViyJaK54vtlbnNA7c/kUMGXqZxtd7khtCbxIRjsY1Itf1NBJKayROZLQmPEboYlW5xSxgv6JhrVWJRUlgSVzIyhdXGugSE2K92J40QH6IgLeCZnJPwEWjsdwtArmkwwgr0SuwJC7ecoqukWQc4SAD7IA6ktXdF+0kFa1XtCqaBbiuj4Yksf0F6dzzUCy6C+sd/8MrPxxggbnKyRywnghWQrMiedBmwrYWGSRP46IVlzROjvSwIFe1CplwF6SD+3lPrzktZh4Ljz/qvhm2mNs007vsALtGJ5x8SgVLoXSJCRbjsnJcmtjV0EnGHrSpgJSgLOW8FqSHx2EF1FsQDo/bTSGF4zvJ1gVhImODsUj5w2l2AHEvtcl2pMeVDsRAWppYTyMS3VFL7HLa0xa/OGrLW1X7kFkt1HPwXH+o5QbDMYrWlxfJB3q1ahLbsGCaNcYNeeHEmpvSuMSEqyTjHMkcSwqiSynn1TJGaD/QOOsxzPUNuglikdFGWB8JE9h2UzPtHPDCibM+MTS6xERpwKXBGjsrz2jijS59/XfUBiIuRLgsjltSkgnsBjxlfe9acW1P7OCoHVf4XExB0Pg4amfrHrLcVotLZE5KO8YsNkIEuGyNUaPAPGHh06640Gx9z2et5p7ZcY3RrEpWY2yXyOyTK+rmvPYZIxL6gvZziDFDxLVOn0xJ34E3lgv4YpnFuqQ6Z7VrFPA0PpLApYE+B3NbbE2k3WBNQIhF3DvZnFkvpJ0mcXVXpCSE9bNAQh0XJyGZ+W+dlUd3iiyuWj8cbQT6I9VZkiyuWeOxxJApG6StWZ+4PIGuMQpBEtd9dLe1Djl6tRLIIzZH4RLjfdWsV8oT/VKpw4PoSZ6wfVw00bDighb2jriiRZBW0WkWSNbEle/oJBeSXKMjmWMQV5osqS8c2Ncsy0NsSxRXsu49IJPdupnoA9pFTwufSwM2J1lYjC+87+MUtIRPB8jKM9JkpD54qt+b1E5adNKCPqm0BYmrIk6IeD4HXogVfW4VV4pHRJeY3ihco9TxQ1gtRvzqKXvf2qcvmWVHFswc6EsJR/vl7fJ2JF7Cfa16xRUtg9RhdmOoS0xIrnFBRyAucFORi0EK7Et85n/iLuyZZIHNgL7UOG+1Xtl5PwHV19qZVip4qiPlbTz4mabN5wNk5Rnk10brAcyEgeR/cv6n3YWiTkdk1/cks47/tALL6v9MWL7uX/6nJq59LcTOYEdh+Mo50oR6OgxQTNH5v3a8HnvSKS0JbM31eXx/pU06iRCyej9Qfde705eiuMBsfYna936e2jmWeIvHZ5W95xdPWOzD8Ix97vlczHVVRIG6Zr6369RWqb3OMc7T/U7YjnMbR06Fiq2T6SvHtO4DbXdIpEEsiQAdL1/Y8UqxU++OMXONd4TBbVzRxk2eJCHlJcLW6jKU3wjfDGwXzTuhoqe278SKAuJBDZ33pP9S2B8oBcFogvkcntwFyTwUPkcs31y4/lowJMMCu4jF09uFm3btjnSw1drOvSSuFsuFPArDxx3pOIhLBHeKOyJg6xHOTYG1q5z7ZgI650Nfq/R9mF3/hjZxlQZH+z0BwvAG5VP+QdUtgg8QdvFAnRbX6OkwIDvFmgiWVMdTe9tMUfjRPfIiRN3jUKxjyK5nkWIuRmsxROHETnjCecoD6JFBdoq9AgCeGigF8jn7PB2R+nBL4/8qKpGEtSPoocWleToUraetuy+IuCQBlCwHEjeKiVQpjRAFdkPjWzDuyN+lP+giiisOBhpIe8LR3PihViEj7RSRP71UurcHktnnO8YtmQXj0ppSqvEllE+Tyl/2QSwXg1ovWDCKeO5QWfmEOpjPqWTMewN5bfsRxLqmvqRf7wy1QDlwX4bylzQv0m4xweI6F+q0xEXIbyU9HRZp4lArwJPq4nt2H4jVQtrntuDHZ9KPK4IrZTe5pNdfZGu/xGZR/RPK3QT95RAZ3x3Zbyi5pMenuoJlMf1HG0vqD7ihMgzDMAzDMAzDMAzDMAzDMAzDMI6Tr3nYtu6XnfXVAAAAAElFTkSuQmCC";const pT=n.p+"static/media/arrow_forward.175cc52afaec3dff9cb32c3bf16b23aa.svg";const gT=n.p+"static/media/check_circle.7f4342b0cae05039bee15d7659a24510.svg";const mT=n.p+"static/media/img_upload.772cfaac66b174bfe49e1d071b83873b.svg";const vT=n.p+"static/media/icon_char_spacing.0ebc1ae6f09d704311aa4c1020393ce6.svg";function yT(){const[t,e]=(0,i.useState)(""),[n,r]=(0,i.useState)(sT[0].file),[o,s]=(0,i.useState)(oT[0].family),[a,l]=(0,i.useState)("#FFFFFF"),[c,u]=(0,i.useState)(100),[h,d]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(""),[v,y]=(0,i.useState)(null),[b,_]=(0,i.useState)(100),[w,x]=(0,i.useState)(100),[C,S]=(0,i.useState)(null),[T,E]=(0,i.useState)([]),[k,O]=(0,i.useState)(null),[A,I]=(0,i.useState)(!0),[D,P]=(0,i.useState)(null),L=(0,i.useRef)(null);(0,i.useEffect)((()=>{Aa.fabric.Object.prototype.objectCaching=!0,M()}),[]);const M=async()=>{const t=vw(N_(LS,"history"),ww("createdAt","desc"),Cw(5)),e=await jw(t);let n=[];e.forEach((async t=>{t.data();n.push({id:t.id,...t.data()})})),E(n)},R=async()=>{let t=null;if(C){const e=v.src.split(";")[0].split("/")[1],n=Zx(MS,"images/"+(new Date).toISOString()+"."+e);t=await function(t,e,n){return Hx(t=el(t),e,n)}(n,C,{contentType:"image/"+e})}const e={text:h,name:f,username:g,font:o,color:a,charSpacing:c,imageFile:n,customImage:t?t.metadata.fullPath:null,customImageWidth:b,customImageHeight:w,createdAt:(new Date).toISOString()};console.log("saveToHistory",e),await function(t,e){const n=D_(t.firestore,V_),i=B_(t),r=Iw(t.converter,e);return Nw(n,[tw(Z_(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Fm.exists(!1))]).then((()=>i))}(N_(LS,"history"),e)},F=()=>{},j=async()=>{null==k||k.dispose();const{canvas:t,imageData:i}=await aT({text:h,name:f,username:g,font:o,color:a,charSpacing:c,imageFile:n,customImage:v,customImageWidth:b,customImageHeight:w});O(t),e(i),console.log("finished render")},N=t=>t.file===n?"selected":"no-selected",B=t=>t===o?"selected-font":"",U=t=>t===a?"selected-color":"",V=()=>{OS(PS,"create_image"),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;clearTimeout(D),A&&R();const e=setTimeout((()=>{P(null),j(),F()}),t);P(e)}(0),setTimeout((()=>{document.getElementById("scroll-target").scrollIntoView({behavior:"smooth"})}),100)},z=async t=>{l(t),OS(PS,"select_color",{color:t})},H=()=>{window.location.href="/list"};return(0,lT.jsx)(lT.Fragment,{children:(0,lT.jsxs)("div",{id:"app",children:[(0,lT.jsx)("div",{className:"header",children:(0,lT.jsx)("div",{id:"productName",children:(0,lT.jsx)("img",{src:hT,onClick:()=>{window.location.href="https://share.wimouniv.com/"}})})}),(0,lT.jsxs)("div",{className:"body-content",children:[(0,lT.jsxs)("div",{className:"recent-row",children:[(0,lT.jsx)("div",{className:"recent-text",children:"\ub9cc\ub4e4\uc5b4\uc9c4 \uc774\ubbf8\uc9c0"}),(0,lT.jsxs)("div",{className:"recent-more",onClick:H,children:["\ub354\ubcf4\uae30",(0,lT.jsx)("img",{src:pT})]})]}),(0,lT.jsx)("div",{id:"recentImage",className:"container ps-0 pe-0",children:T.map(((t,e)=>(0,lT.jsx)("div",{className:"item",children:(0,lT.jsx)("div",{onClick:()=>(async t=>{OS(PS,"select_recent_image",{imageData:t}),H()})(t),style:{width:"150px",borderRadius:"6px"},children:(0,lT.jsx)(cT,{data:t})})},t.id)))})]}),""!=t&&(0,lT.jsxs)(lT.Fragment,{children:[(0,lT.jsx)("div",{id:"scroll-target",className:"gray-zone"}),(0,lT.jsx)("div",{className:"body-content",children:(0,lT.jsxs)("div",{className:"detailInput",children:[(0,lT.jsx)("p",{className:"modal-text",children:"\uc9e0! \uc774\ubbf8\uc9c0\uac00 \ub9cc\ub4e4\uc5b4\uc84c\uc5b4\uc694 \ud83c\udf89"}),(0,lT.jsx)("div",{className:"",children:(0,lT.jsx)("div",{id:"result",children:(0,lT.jsx)("img",{src:t,onCopy:()=>{OS(PS,"copy_image")}})})}),(0,lT.jsxs)("div",{className:"modal-bottom",children:[(0,lT.jsx)("div",{className:"modal-button share-button",onClick:async()=>{OS(PS,"share_image");let e="https://share.wimouniv.com/";const n="\uc704\ubaa8\uc5d0\uc11c \ub9cc\ub4e4\uae30";let i=t,r=atob(i.split(",")[1]),o=i.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),a=new Uint8Array(s);for(let t=0;t<r.length;t++)a[t]=r.charCodeAt(t);let l=new Blob([s],{type:o});const c={title:n,text:n,url:e,files:[new File([l],"image.png",{type:o})]};navigator.share?await navigator.share(c):navigator.clipboard?(await navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob(["".concat(n," ").concat(e)],{type:"text/plain"}),[o]:l})]),[].slice.call(document.querySelectorAll(".toast")).map((function(t){return new Oa(t,{autohide:!0,delay:3e3})})).forEach((t=>t.show()))):console.log("navigator.clipboard is not supported")},children:"\uacf5\uc720\ud558\uae30"}),(0,lT.jsx)("div",{className:"modal-button save-button",onClick:async()=>{if(OS(PS,"save_image"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)window.open(t);else{let e=document.createElement("a");e.href=t,e.download="image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},children:"\uc774\ubbf8\uc9c0 \uc800\uc7a5"})]})]})})]}),(0,lT.jsx)("div",{className:"gray-zone"}),(0,lT.jsxs)("div",{className:"body-content",children:[(0,lT.jsxs)("div",{className:"detailInput",children:[(0,lT.jsxs)("p",{style:{marginTop:"40px",fontWeight:"700"},children:["\uc774\ubbf8\uc9c0\ub85c \ub9cc\ub4e4\uace0 \uc2f6\uc740 ",(0,lT.jsx)("br",{}),"\ub0b4\uc6a9\uc744 \uc368\uc8fc\uc138\uc694"]}),(0,lT.jsx)("textarea",{type:"text",value:h,onChange:t=>d(t.target.value),placeholder:"\ub0b4\uc6a9\uc744 \ub123\uc5b4\uc8fc\uc138\uc694",style:{resize:"none",height:"200px",marginBottom:"12px",marginTop:"20px"},className:"inputTweetName"}),(0,lT.jsx)("input",{type:"text",value:f,onChange:t=>p(t.target.value),placeholder:"\uc81c\ubaa9",className:"inputTweetName"}),(0,lT.jsx)("input",{type:"text",value:g,onChange:t=>m(t.target.value),placeholder:"\uae00\uc4f4\uc774",className:"inputTweetName"})]}),(0,lT.jsxs)("div",{id:"selectImage",className:"container ps-0 pe-0",children:[(0,lT.jsx)("div",{className:"item",children:(0,lT.jsx)("div",{onClick:()=>{L.current.click()},children:(0,lT.jsx)("img",{id:"upload",src:mT,alt:"upload",className:"no-selected"})})}),v&&(0,lT.jsx)("div",{className:"item",children:(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{id:"custom",src:v.src,alt:"custom",className:"selected"})})}),sT.filter((t=>t.visible)).map(((t,e)=>(0,lT.jsx)("div",{className:"item",children:(0,lT.jsx)("div",{onClick:()=>(async t=>{OS(PS,"select_image",{image:t}),r(t.file),l(t.fontColor),L.current.value=null,y(null),S(null)})(t),children:(0,lT.jsx)("img",{id:t.file,src:t.image,alt:t.file,className:N(t)})})},e))),(0,lT.jsx)("input",{type:"file",ref:L,onChange:t=>{console.log("changeImageInput",t.target.files[0]);let e=t.target.files[0];var n=new FileReader;n.onload=function(t){var n=new Image;n.src=t.target.result,n.onload=function(){e.size>2097152?console.log("\uc774\ubbf8\uc9c0 \ud30c\uc77c \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. 2MB \uc774\ud558\uc758 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud574\uc8fc\uc138\uc694."):(console.log("imgObj",n),y(n),x(n.height),_(n.width),r(null))}},S(e),n.readAsDataURL(e)},style:{marginTop:"16px",display:"none"}})]}),(0,lT.jsx)("div",{class:"divied"}),(0,lT.jsxs)("div",{id:"selectFont",className:"container ps-0 pe-0",style:{marginTop:"24px"},children:[(0,lT.jsx)("div",{className:"font-text",children:"\ud3f0\ud2b8"}),oT.map(((t,e)=>(0,lT.jsx)("div",{className:"item-button",children:(0,lT.jsx)("div",{className:"fontButton ".concat(B(t.family)),onClick:()=>(async t=>{s(t),OS(PS,"select_font",{family:t})})(t.family),children:t.name})},e)))]}),(0,lT.jsxs)("div",{id:"selectColor",className:"container ps-0 pe-0",style:{marginTop:"20px"},children:[(0,lT.jsx)("div",{className:"item-button",style:{marginRight:"8px"},children:(0,lT.jsx)("div",{className:"colorButton colorButtonWhite ".concat(U("#FFFFFF")),onClick:()=>z("#FFFFFF"),children:"\uac00"})}),(0,lT.jsx)("div",{className:"item-button",children:(0,lT.jsx)("div",{className:"colorButton colorButtonBlack ".concat(U("#1C1C1E")),onClick:()=>z("#1C1C1E"),children:"\uac00"})})]}),(0,lT.jsxs)("div",{id:"selectCharSpacing",className:"container ps-0 pe-0",style:{marginBottom:"20px",marginTop:"24px",display:"flex"},children:[(0,lT.jsx)("div",{className:"item-button",style:{height:"40px",marginLeft:"8px"},children:(0,lT.jsx)("div",{style:{display:"flex",height:"40px",alignItems:"center",fontSize:"14px"},children:(0,lT.jsx)("img",{src:vT,style:{width:"24px",height:"24px",marginRight:"8px"}})})}),(0,lT.jsx)("div",{className:"item-button",style:{marginRight:"8px",flexGrow:"1"},children:(0,lT.jsxs)("div",{style:{padding:"0px 8px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,lT.jsx)("input",{type:"range",min:"0",max:"500",step:"10",className:"slider customSlider",id:"myRange",value:c,list:"values",onChange:t=>u(t.target.value)}),(0,lT.jsxs)("datalist",{id:"values",children:[(0,lT.jsx)("option",{value:"0",label:"0"}),(0,lT.jsx)("option",{value:"100",label:"100"}),(0,lT.jsx)("option",{value:"500",label:"500"})]})]})}),(0,lT.jsx)("div",{className:"item-button",style:{height:"40px",marginLeft:"8px"},children:(0,lT.jsx)("div",{style:{display:"flex",height:"40px",alignItems:"center",fontSize:"14px"},children:(0,lT.jsx)("img",{src:vT,style:{width:"24px",height:"24px",marginRight:"8px"}})})})]}),""!=t&&(0,lT.jsxs)(lT.Fragment,{children:[(0,lT.jsx)("div",{className:"roundCreateButton",onClick:V,children:"\uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30"}),(0,lT.jsxs)("div",{className:"float-bottom-text",children:[(0,lT.jsx)("div",{style:{marginRight:"4px"},children:(0,lT.jsx)("input",{type:"checkbox",id:"check",name:"check",checked:A,onChange:t=>I(t.target.checked)})}),(0,lT.jsx)("div",{children:"\ub9cc\ub4e0 \uae30\ub85d \ub0a8\uae30\uae30"})]})]})]}),(0,lT.jsx)("div",{style:{paddingTop:"76px"},children:(0,lT.jsxs)("div",{onClick:()=>{window.open("https://apps.apple.com/kr/app/%EB%93%80%EC%97%A3%ED%88%AC%EB%91%90/id6445875698","_blank")},style:{background:"black",padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,lT.jsxs)("div",{style:{display:"flex"},children:[(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{src:dT,style:{width:"40px"}})}),(0,lT.jsxs)("div",{style:{marginLeft:"12px"},children:[(0,lT.jsx)("div",{style:{color:"white",fontSize:"16px",fontWeight:"bold"},children:"\ub4c0\uc5e3\ud22c\ub450"}),(0,lT.jsx)("div",{style:{color:"white",opacity:"50%",fontSize:"14px"},children:"\uc624\ud0c0\ucfe0\uc6a9 \ud560\uc77c \uad00\ub9ac \uc571"})]})]}),(0,lT.jsx)("div",{style:{backgroundColor:"#2F7CF6",padding:"4px 18px",borderRadius:"100px"},children:(0,lT.jsx)("div",{style:{fontSize:"12px",fontWeight:"normal",color:"white"},children:"\ubc1b\uae30"})})]})}),(0,lT.jsxs)("div",{id:"credit",children:[(0,lT.jsx)("div",{className:"credit-text",children:"\uc11c\ube44\uc2a4"}),(0,lT.jsx)("div",{className:"credit-link",children:(0,lT.jsx)("a",{href:"https://twitter.com/widishare2021",className:"credit",target:"_blank",children:"\ubc84\uadf8 \uc2e0\uace0 \ubc0f \uc81c\ud734 \ubb38\uc758"})}),(0,lT.jsx)("div",{style:{marginBottom:"16px"}}),(0,lT.jsx)("div",{className:"credit-text",children:"\ub9cc\ub4e0 \uc0ac\ub78c"}),(0,lT.jsx)("div",{className:"credit-link",children:(0,lT.jsx)("a",{href:"https://twitter.com/FlatcherLynd",className:"credit",target:"_blank",children:"\uc70c\ub9ac \ud83d\udc40"})})]}),(0,lT.jsx)("div",{className:"toast custom-toast",role:"alert","aria-live":"assertive","aria-atomic":"true",children:(0,lT.jsxs)("div",{className:"toast-body z-toast",children:[(0,lT.jsx)("div",{style:{marginRight:"8px"},children:(0,lT.jsx)("img",{src:gT,style:{width:"24px",height:"24px"}})}),(0,lT.jsx)("div",{children:"\uc774\ubbf8\uc9c0\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc5b4\uc694"})]})}),(0,lT.jsxs)("div",{style:{display:"none"},children:[(0,lT.jsx)("canvas",{id:"canvas"}),sT.map(((t,e)=>(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{id:t.file,src:t.image,alt:t.file})},e))),(0,lT.jsx)("img",{id:"logo",src:fT})]}),""==t&&(0,lT.jsxs)("div",{className:"float-bottom",children:[(0,lT.jsx)("div",{className:"createButton",onClick:V,children:"\uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30"}),(0,lT.jsxs)("div",{className:"float-bottom-text",children:[(0,lT.jsx)("div",{style:{marginRight:"4px"},children:(0,lT.jsx)("input",{type:"checkbox",id:"check",name:"check",checked:A,onChange:t=>I(t.target.checked)})}),(0,lT.jsx)("div",{children:"\ub9cc\ub4e0 \uae30\ub85d \ub0a8\uae30\uae30"})]})]})]})})}const bT=n.p+"static/media/arrow_back.7e771d74054c4a9357a29aea66e744ce.svg";function _T(){const[t,e]=(0,i.useState)([]),[n,r]=(0,i.useState)(null),[o,s]=(0,i.useState)(!1),a=window.innerWidth,l=wT(a);(0,i.useEffect)((()=>{Aa.fabric.Object.prototype.objectCaching=!0,c()}),[]),(0,i.useEffect)((()=>{window.onscroll=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight&&c()}}),[n,t]);const c=async()=>{if(o)return void console.log("loading");s(!0);let i=null;i=n?vw(N_(LS,"history"),ww("createdAt","desc"),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Sw._create("startAfter",e,!1)}(n),Cw(5)):vw(N_(LS,"history"),ww("createdAt","desc"),Cw(5));const a=await jw(i);let l=[];a.forEach((async t=>{l.push({id:t.id,...t.data()})}));const c=[...t,...l];r(a.docs[a.docs.length-1]),e(c),s(!1)};return(0,lT.jsxs)("div",{className:"body-content",children:[(0,lT.jsx)("div",{style:l.header,children:(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{src:bT,alt:"arrowback",style:l.backButton,onClick:()=>{window.location.href="/"}})})}),(0,lT.jsx)("div",{style:l.recentText,children:(0,lT.jsx)("div",{children:"\ub9cc\ub4e4\uc5b4\uc9c4 \uc774\ubbf8\uc9c0"})}),(0,lT.jsxs)("div",{style:{display:"none"},children:[sT.map(((t,e)=>(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{id:t.file,src:t.image,alt:t.file})},e))),(0,lT.jsx)("img",{id:"logo",src:fT})]}),t.map(((t,e)=>(0,lT.jsx)("div",{style:l.item,onClick:()=>(t=>{window.location.href="/detail/".concat(t.id)})(t),children:(0,lT.jsx)(cT,{data:t})},e)))]})}const wT=t=>({header:{display:"flex",justifyContent:"space-between",padding:"20px",width:"".concat(t-20,"px")},backButton:{width:"24px",height:"24px"},recentText:{padding:"16px 20px",fontSize:"20px",fontWeight:"bold"},item:{width:"100%",padding:"10px"}});function xT(){const[t,e]=(0,i.useState)(null);let{id:n}=function(){let{matches:t}=i.useContext(Vt),e=t[t.length-1];return e?e.params:{}}();const r=window.innerWidth,o=CT(r);(0,i.useEffect)((()=>{Aa.fabric.Object.prototype.objectCaching=!0,s()}),[]);const s=async()=>{const t=await function(t){t=D_(t,F_);const e=D_(t.firestore,V_);return C_(z_(e),t._key).then((n=>Bw(e,t,n)))}(B_(LS,"history",n));e({id:t.id,...t.data()})};return(0,lT.jsxs)("div",{className:"body-content",children:[(0,lT.jsx)("div",{style:o.header,children:(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{src:bT,alt:"arrowback",style:o.backButton,onClick:()=>{window.location.href="/list"}})})}),(0,lT.jsxs)("div",{style:{display:"none"},children:[sT.map(((t,e)=>(0,lT.jsx)("div",{children:(0,lT.jsx)("img",{id:t.file,src:t.image,alt:t.file})},e))),(0,lT.jsx)("img",{id:"logo",src:fT})]}),t&&(0,lT.jsx)("div",{style:o.item,children:(0,lT.jsx)(cT,{data:t})}),(0,lT.jsx)("div",{style:{marginInline:"10px"},children:t&&(0,lT.jsxs)("div",{className:"detailInput",children:[(0,lT.jsx)("textarea",{type:"text",value:t.text,readOnly:!0,style:{resize:"none",height:"200px",marginBottom:"12px",marginTop:"20px"},className:"inputTweetName"}),(0,lT.jsx)("input",{type:"text",value:t.name,readOnly:!0,className:"inputTweetName"}),(0,lT.jsx)("input",{type:"text",value:t.username,readOnly:!0,className:"inputTweetName"})]})})]})}const CT=t=>({header:{display:"flex",justifyContent:"space-between",padding:"20px",width:"".concat(t-20,"px")},backButton:{width:"24px",height:"24px"},recentText:{padding:"16px 20px",fontSize:"20px",fontWeight:"bold"},item:{width:"100%",padding:"10px"}}),ST=function(t,e){return nt({basename:null==e?void 0:e.basename,future:ie({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:(n={window:null==e?void 0:e.window},void 0===n&&(n={}),m((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return f("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:p(e)}),null,n)),hydrationData:(null==e?void 0:e.hydrationData)||re(),routes:t,mapRouteProperties:ne,window:null==e?void 0:e.window}).initialize();var n}([{path:"/",element:(0,lT.jsx)(yT,{})},{path:"/list",element:(0,lT.jsx)(_T,{})},{path:"/detail/:id",element:(0,lT.jsx)(xT,{})}]);o.createRoot(document.getElementById("root")).render((0,lT.jsx)(i.StrictMode,{children:(0,lT.jsx)(de,{router:ST})})),me()})()})();
//# sourceMappingURL=main.798437bb.js.map